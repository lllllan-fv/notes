(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1120:function(s,t,a){"use strict";a.r(t);var v=a(1),_=Object(v.a)({},(function(){var s=this,t=s.$createElement,v=s._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[v("div",{staticClass:"custom-block warning"},[v("p",{staticClass:"custom-block-title"},[s._v("转载声明")]),s._v(" "),v("ul",[v("li",[s._v("《深入理解Java虚拟机》")]),s._v(" "),v("li",[v("a",{attrs:{href:"https://blog.csdn.net/BraveLoser/article/details/82500474",target:"_blank",rel:"noopener noreferrer"}},[s._v("基础储备----字面量, 符号引用与直接引用"),v("OutboundLink")],1)])])]),s._v(" "),v("p",[v("strong",[s._v("Class 文件是一组以 8 个字节为基础单位的二进制流。")])]),s._v(" "),v("p",[s._v("各个数据项目严格按照顺序紧凑地排列在文件之中，中间没有添加任何分隔符，这使得整个Class文件中存储的内容几乎全部是程序运行的必要数据，没有空隙存在。当遇到需要占用8个字节以上空间的数据项时，则会按照高位在前的方式分割成若干个8个字节进行存储。")]),s._v(" "),v("div",{staticClass:"custom-block info"},[v("p",{staticClass:"custom-block-title"},[s._v("【class文件】 和 【类或接口】")]),s._v(" "),v("p",[s._v("任何一个 Class 文件都对应着唯一的一个类或接口的定义信息。")]),s._v(" "),v("p",[s._v("但是反过来，类或接口不一定都得定义在文件里（譬如类或接口也可以动态生成，直接送入类加载器中）")])]),s._v(" "),v("p",[s._v("根据《Java虚拟机规范》的规定，Class文件格式采用一种类似于C语言结构体的伪结构来存储数据，这种伪结构中只有两种数据类型：【无符号数】和【表】。")]),s._v(" "),v("ul",[v("li",[s._v("无符号数属于基本的数据类型，以u1、u2、u4、u8来分别代表1个字节、2个字节、4个字节和8个字节的无符号数，"),v("u",[s._v("无符号数可以用来描述数字、索引引用、数量值或者按照UTF-8编码构成字符串值")]),s._v("。")]),s._v(" "),v("li",[s._v("表是由多个无符号数或者其他表作为数据项构成的复合数据类型，为了便于区分，所有表的命名都习惯性地以【_info】结尾。表用于描述有层次关系的复合结构的数据，整个Class文件本质上也可以视作是一张表")])]),s._v(" "),v("h2",{attrs:{id:"一、魔数与class文件的版本"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#一、魔数与class文件的版本"}},[s._v("#")]),s._v(" 一、魔数与Class文件的版本")]),s._v(" "),v("div",{staticClass:"custom-block info"},[v("p",{staticClass:"custom-block-title"},[s._v("魔数")]),s._v(" "),v("p",[s._v("每个 Class 文件的头4个字节被称为魔数，"),v("strong",[s._v("它唯一的作用是确定这个文件是否为一个能被虚拟机接收的 Class 文件。")])]),s._v(" "),v("p",[s._v("Class 文件的魔数取值为 "),v("code",[s._v("0xCAFEBABE")]),s._v(" （咖啡宝贝？）")])]),s._v(" "),v("div",{staticClass:"custom-block info"},[v("p",{staticClass:"custom-block-title"},[s._v("版本号")]),s._v(" "),v("p",[s._v("紧接着魔数的4个字节存储的 Class 文件的版本号，56两个字节是次版本号，78两个字节是主版本号。")])]),s._v(" "),v("h2",{attrs:{id:"二、常量池"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#二、常量池"}},[s._v("#")]),s._v(" 二、常量池")]),s._v(" "),v("div",{staticClass:"custom-block info"},[v("p",{staticClass:"custom-block-title"},[s._v("常量池")]),s._v(" "),v("p",[s._v("版本号之后的是常量池入口，可以比喻为 Class 文件里的资源仓库。")]),s._v(" "),v("p",[s._v("常量池中主要存放两大类常量：【字面量】、【符号引用】。")]),s._v(" "),v("ul",[v("li",[s._v("字面量比较接近于 Java 语言层面的常量概念，如文本字符串、被声明 final 的常量值")]),s._v(" "),v("li",[s._v("符号引用则属于编译原理方面的概念：被模块导出或者开放的包、类和接口的全限定名、字段的名称和描述符、方法的名称和描述符、方法句柄和方法类型、动态调用和动态常量")])])]),s._v(" "),v("blockquote",[v("p",[s._v("Class 文件结构中只有常量池的容量计数是从1开始的。")]),s._v(" "),v("p",[v("img",{attrs:{src:a(928),alt:"image-20220321134555529",loading:"lazy"}})])]),s._v(" "),v("div",{staticClass:"custom-block note"},[v("p",{staticClass:"custom-block-title"},[s._v("字面量 & 符号引用 & 直接引用")]),s._v(" "),v("ul",[v("li",[v("p",[s._v("字面量：字面量(literal)是用于表达源代码中一个固定值的表示法(notation)。")]),s._v(" "),v("blockquote",[v("p",[s._v("int i = 1; 把整数1赋值给int型变量i，整数1就是Java字面量。")]),s._v(" "),v("p",[s._v('String s = "abc"; 中的abc也是字面量。')])])]),s._v(" "),v("li",[v("p",[s._v("符号引用：以一组符号来描述所引用的目标。")]),s._v(" "),v("blockquote",[v("p",[s._v("比如 "),v("code",[s._v("org.simple.People")]),s._v(" 类引用了 "),v("code",[s._v("org.simple.Language")]),s._v(" 类, 在编译时 "),v("code",[s._v("People")]),s._v(" 类并不知道 "),v("code",[s._v("Language")]),s._v(" 类的实际内存地址, 因此只能使用符号 "),v("code",[s._v("org.simple.Language")]),s._v(" 来表示 "),v("code",[s._v("Language")]),s._v(" 类的地址")])])]),s._v(" "),v("li",[v("p",[s._v("直接引用：程序运行时可以定位到引用的东西（类, 对象, 变量或者方法等）的地址")])])])]),s._v(" "),v("h2",{attrs:{id:"三、访问标志"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#三、访问标志"}},[s._v("#")]),s._v(" 三、访问标志")]),s._v(" "),v("div",{staticClass:"custom-block info"},[v("p",{staticClass:"custom-block-title"},[s._v("访问标志")]),s._v(" "),v("p",[s._v("常量池之后两个字节标识访问标志，这个标志用于识别一些类或者接口层次的访问信息。")])]),s._v(" "),v("p",[v("img",{attrs:{src:a(929),alt:"image-20220321135723035",loading:"lazy"}})]),s._v(" "),v("h2",{attrs:{id:"四、类索引、父类索引、接口索引集合"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#四、类索引、父类索引、接口索引集合"}},[s._v("#")]),s._v(" 四、类索引、父类索引、接口索引集合")]),s._v(" "),v("p",[s._v("类索引和父类索引都是一个 u2 类型的数据，而接口索引集合是一组 u2 类型的数据的集合，Class 文件中由着三项数据来确定该类型的继承关系。")]),s._v(" "),v("ul",[v("li",[s._v("类型索引用于确定这个类的全限定名")]),s._v(" "),v("li",[s._v("父类索引用于确定这个类的父类的全限定名")]),s._v(" "),v("li",[s._v("接口索引集合用来描述实现了哪些接口")])]),s._v(" "),v("h2",{attrs:{id:"五、字段表集合"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#五、字段表集合"}},[s._v("#")]),s._v(" 五、字段表集合")]),s._v(" "),v("p",[s._v("字段表用于描述接口或类中声明的变量。")]),s._v(" "),v("blockquote",[v("p",[s._v("Java语言中的“字段”（Field）包括类级变量以及实例级变量，但不包括在方法内部声明的局部变量")])]),s._v(" "),v("p",[v("img",{attrs:{src:a(930),alt:"image-20220321141759349",loading:"lazy"}})]),s._v(" "),v("ol",[v("li",[v("p",[s._v("字段修饰符 access_flags")]),s._v(" "),v("blockquote",[v("p",[v("img",{attrs:{src:a(931),alt:"image-20220321141841952",loading:"lazy"}})])])]),s._v(" "),v("li",[v("p",[s._v("简单名称 name_index，方法名或字段名")])]),s._v(" "),v("li",[v("p",[s._v("修饰符 descriptor_index，描述字段的数据类型、方法的参数列表和返回值")])]),s._v(" "),v("li",[v("p",[s._v("属性表集合，用于存储一些额外的信息")])])]),s._v(" "),v("h2",{attrs:{id:"六、方法表集合"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#六、方法表集合"}},[s._v("#")]),s._v(" 六、方法表集合")]),s._v(" "),v("p",[s._v("Class文件存储 格式中对方法的描述与对字段的描述采用了几乎完全一致的方式，方法表的结构如同字段表一样，依次包括访问标志（access_flags）、名称索引（name_index）、描述符索引（descriptor_index）、属性表集合（attributes）几项")]),s._v(" "),v("p",[v("img",{attrs:{src:a(932),alt:"image-20220321142237514",loading:"lazy"}})]),s._v(" "),v("p",[v("img",{attrs:{src:a(933),alt:"image-20220321142247105",loading:"lazy"}})]),s._v(" "),v("h2",{attrs:{id:"七、属性表集合"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#七、属性表集合"}},[s._v("#")]),s._v(" 七、属性表集合")]),s._v(" "),v("p",[s._v("Class文件、字段表、方法表都可以携带自己的属性表集合，以描述某些场景专有的信息。")]),s._v(" "),v("p",[v("img",{attrs:{src:a(934),alt:"image-20220321142538079",loading:"lazy"}})]),s._v(" "),v("div",{staticClass:"custom-block note"},[v("p",{staticClass:"custom-block-title"},[s._v("属性表集合")]),s._v(" "),v("p",[s._v("《》P321，内容太多暂且跳过。")])])])}),[],!1,null,null,null);t.default=_.exports},928:function(s,t,a){s.exports=a.p+"assets/img/image-20220321134555529.74cfefb9.png"},929:function(s,t,a){s.exports=a.p+"assets/img/image-20220321135723035.1cc90eba.png"},930:function(s,t,a){s.exports=a.p+"assets/img/image-20220321141759349.347f515c.png"},931:function(s,t,a){s.exports=a.p+"assets/img/image-20220321141841952.299728cf.png"},932:function(s,t,a){s.exports=a.p+"assets/img/image-20220321142237514.26097dd9.png"},933:function(s,t,a){s.exports=a.p+"assets/img/image-20220321142247105.9af947e5.png"},934:function(s,t,a){s.exports=a.p+"assets/img/image-20220321142538079.75014f5a.png"}}]);