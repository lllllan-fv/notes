<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java 垃圾回收 | lllllan</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script src="https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <link rel="alternate" type="application/atom+xml" href="https://vue-blog.lllllan.cn/atom.xml" title="lllllan Atom Feed">
    <link rel="alternate" type="application/json" href="https://vue-blog.lllllan.cn/feed.json" title="lllllan JSON Feed">
    <link rel="alternate" type="application/rss+xml" href="https://vue-blog.lllllan.cn/rss.xml" title="lllllan RSS Feed">
    <link rel="icon" href="/logo.png">
    <link rel="icon" href="/logo.png" type="image/png" sizes="512x512">
    <link rel="icon" href="/logo.png" type="image/png" sizes="192x192">
    <link rel="icon" href="/logo.png" type="image/png" sizes="512x512">
    <link rel="icon" href="/logo.png" type="image/png" sizes="192x192">
    <link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials">
    <link rel="apple-touch-icon" href="/logo.png">
    <meta name="description" content="">
    <meta property="og:url" content="/1-java/2-jvm/2-garbage-collection/">
    <meta property="og:site_name" content="lllllan">
    <meta property="og:title" content="Java 垃圾回收">
    <meta property="og:description" content="本文转载自 JVM 垃圾回收详解 | JavaGuide，略有改动 写在前面 常见面试题如何判断对象是否死亡（两种方法）。; 简单的介绍一下强引用、软引用、弱引用、虚引用（虚引用与软引用和弱引用的区别、使用软引用能带来的好处）。; 如何判断一个常量是废弃常量; 如何判断一个类是无用的类; 垃圾收集有哪些算法，各自的特点？; HotSpot 为什么">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh">
    <meta property="og:locale:alternate" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="lllllan">
    <meta property="article:author" content="lllllan">
    <meta property="article:tag" content="JVM">
    <meta name="theme-color" content="#46bd87">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/logo.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <link rel="preload" href="/assets/css/0.styles.fe5e2315.css" as="style"><link rel="preload" href="/assets/js/app.7623ec66.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Layout.d3ef1ddc.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.e3241214.js" as="script"><link rel="preload" href="/assets/js/page-Java垃圾回收.d7d55f28.js" as="script"><link rel="prefetch" href="/assets/js/33.b926f2cf.js"><link rel="prefetch" href="/assets/js/34.4ff3e206.js"><link rel="prefetch" href="/assets/js/35.f71f7041.js"><link rel="prefetch" href="/assets/js/36.397fd158.js"><link rel="prefetch" href="/assets/js/37.431f10eb.js"><link rel="prefetch" href="/assets/js/38.38748c91.js"><link rel="prefetch" href="/assets/js/layout-Blog.c3dc6a5c.js"><link rel="prefetch" href="/assets/js/layout-Layout.28148f81.js"><link rel="prefetch" href="/assets/js/layout-NotFound.bf2f1f09.js"><link rel="prefetch" href="/assets/js/layout-Slide.ece6abf0.js"><link rel="prefetch" href="/assets/js/page-ArrayList源码解读.30b50c64.js"><link rel="prefetch" href="/assets/js/page-JavaGuide-Java基础知识.d8f6c0f5.js"><link rel="prefetch" href="/assets/js/page-Java基础面试题.61a602e0.js"><link rel="prefetch" href="/assets/js/page-Java笔记.71dfa51a.js"><link rel="prefetch" href="/assets/js/page-Java集合框架基础知识.d5a74d66.js"><link rel="prefetch" href="/assets/js/page-MySQL笔记.d2e361f2.js"><link rel="prefetch" href="/assets/js/page-R2Coding-Java基础核心总结.feed7cd3.js"><link rel="prefetch" href="/assets/js/page-java内存区域详解.b16d6e94.js"><link rel="prefetch" href="/assets/js/page-java是值传递.23bb10e9.js"><link rel="prefetch" href="/assets/js/page-代理详解.c998792c.js"><link rel="prefetch" href="/assets/js/page-刷题笔记.99da6df2.js"><link rel="prefetch" href="/assets/js/page-反射机制.ca0607d7.js"><link rel="prefetch" href="/assets/js/page-操作系统-常见面试题.b4eb21f5.js"><link rel="prefetch" href="/assets/js/page-数组练习.6522bf3c.js"><link rel="prefetch" href="/assets/js/page-第一章、浏览器生成消息.4eb7b9f4.js"><link rel="prefetch" href="/assets/js/page-第三章、从网线到网络设备.1e0ba80d.js"><link rel="prefetch" href="/assets/js/page-第二章、用电信号传输TCPIP数据.b5f4e806.js"><link rel="prefetch" href="/assets/js/page-计算机基础.4f7d1845.js"><link rel="prefetch" href="/assets/js/page-计算机网络-常见面试题.12b72724.js"><link rel="prefetch" href="/assets/js/page-项目主页.782c16fc.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.203be4f9.js"><link rel="prefetch" href="/assets/js/vendors~mermaid.0e400ad7.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.8923f59e.js"><link rel="prefetch" href="/assets/js/vendors~reveal.d4668ba8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fe5e2315.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="lllllan" class="logo"> <!----> <span class="site-name can-hide">lllllan</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link router-link-active"><i class="iconfont icon-home"></i>
  Blog Home
</a></div></nav> <!----> <a rel="noopener noreferrer" href="https://github.com/lllllan-fv/blog" target="_blank" class="repo-link can-hide">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="/" class="nav-link router-link-active"><i class="iconfont icon-home"></i>
  Blog Home
</a></div> <a rel="noopener noreferrer" href="https://github.com/lllllan-fv/blog" target="_blank" class="repo-link">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><a href="/1-java/" aria-current="page" class="sidebar-link"><i class="iconfont icon-info"></i>Java 笔记</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">java 基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable open"><!----> <span class="title">JVM</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/1-java/2-jvm/1-memory-area-details/" class="sidebar-link"><i class="iconfont icon-page"></i>java 内存区域详解</a></li><li><a href="/1-java/2-jvm/2-garbage-collection/" aria-current="page" class="active sidebar-link"><i class="iconfont icon-page"></i>Java 垃圾回收</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/1-java/2-jvm/2-garbage-collection/#写在前面" class="sidebar-link">写在前面</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/1-java/2-jvm/2-garbage-collection/#常见面试题" class="sidebar-link heading3">常见面试题</a></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/2-garbage-collection/#核心问题" class="sidebar-link heading3">核心问题</a></li></ul></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/2-garbage-collection/#一、jvm内存分配与回收" class="sidebar-link">一、JVM内存分配与回收</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/1-java/2-jvm/2-garbage-collection/#_1-1-对象优先在-eden-区域分配" class="sidebar-link heading3">1.1 对象优先在 Eden 区域分配</a></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/2-garbage-collection/#_1-2-大对象直接进入老年代" class="sidebar-link heading3">1.2 大对象直接进入老年代</a></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/2-garbage-collection/#_1-3-长期存活的对象将进入老年代" class="sidebar-link heading3">1.3 长期存活的对象将进入老年代</a></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/2-garbage-collection/#_1-4-动态对象年龄判断" class="sidebar-link heading3">1.4 动态对象年龄判断</a></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/2-garbage-collection/#_1-5-主要进行gc的区域" class="sidebar-link heading3">1.5 主要进行GC的区域</a></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/2-garbage-collection/#_1-6-空间分配担保" class="sidebar-link heading3">1.6 空间分配担保</a></li></ul></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/2-garbage-collection/#二、对象死亡" class="sidebar-link">二、对象死亡</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/1-java/2-jvm/2-garbage-collection/#_2-1-引用计数法" class="sidebar-link heading3">2.1 引用计数法</a></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/2-garbage-collection/#_2-2-可达性分析算法" class="sidebar-link heading3">2.2 可达性分析算法</a></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/2-garbage-collection/#_2-3-引用" class="sidebar-link heading3">2.3 引用</a></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/2-garbage-collection/#_2-4-不可达的对象并非-非死不可" class="sidebar-link heading3">2.4 不可达的对象并非“非死不可”</a></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/2-garbage-collection/#_2-5-如何判断一个常量是废弃常量" class="sidebar-link heading3">2.5 如何判断一个常量是废弃常量</a></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/2-garbage-collection/#_2-6-如何判断一个类是无用的类" class="sidebar-link heading3">2.6 如何判断一个类是无用的类</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">容器</span> <span class="arrow right"></span></p> <!----></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb"><ol vocab="https://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a href="/1-java/" property="item" typeof="WebPage" class="router-link-active"><i class="iconfont icon-info"></i> <span property="name">Java 笔记</span></a> <meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem" class="is-active"><a href="/1-java/2-jvm/2-garbage-collection/" aria-current="page" property="item" typeof="WebPage" class="router-link-exact-active router-link-active"><i class="iconfont icon-page"></i> <span property="name">Java 垃圾回收</span></a> <meta property="position" content="2"></li></ol></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><i class="iconfont icon-page"></i> <span property="headline">Java 垃圾回收</span></h1> <div class="page-info"><!----> <span aria-label="Author🖊" data-balloon-pos="down"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon author-icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z" fill="currentColor"></path></svg> <span property="author">lllllan</span></span><!----><span aria-label="Writing Date📅" data-balloon-pos="down" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2022-1-20</span></span><span role="navigation" aria-label="Category🌈" data-balloon-pos="down" class="category-info enable"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon category-icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zm-.854 446.486H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zm446.371-446.486h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zm136.293 813.51H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z" fill="currentColor"></path></svg> <span property="articleSection">Java</span></span><span aria-label="Tags🏷" data-balloon-pos="down"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon tag-icon"><path d="M939.902 458.563 910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 0 0 0 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z" fill="currentColor"></path></svg> <ul class="tags-wrapper"><li class="tag clickable tag0"><span role="navigation">JVM</span></li></ul> <meta property="keywords" content="JVM"></span><span aria-label="Reading Time⌛" data-balloon-pos="down" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon timer-icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z" fill="currentColor"></path></svg> <span>About 11 min</span> <meta property="timeRequired" content="PT11M"></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/1-java/2-jvm/2-garbage-collection/#写在前面" class="anchor-link heading2"><div>写在前面</div></a></li><li class="anchor"><a href="/1-java/2-jvm/2-garbage-collection/#常见面试题" class="anchor-link heading3"><div>常见面试题</div></a></li><li class="anchor"><a href="/1-java/2-jvm/2-garbage-collection/#核心问题" class="anchor-link heading3"><div>核心问题</div></a></li><li class="anchor"><a href="/1-java/2-jvm/2-garbage-collection/#一、jvm内存分配与回收" class="anchor-link heading2"><div>一、JVM内存分配与回收</div></a></li><li class="anchor"><a href="/1-java/2-jvm/2-garbage-collection/#_1-1-对象优先在-eden-区域分配" class="anchor-link heading3"><div>1.1 对象优先在 Eden 区域分配</div></a></li><li class="anchor"><a href="/1-java/2-jvm/2-garbage-collection/#_1-2-大对象直接进入老年代" class="anchor-link heading3"><div>1.2 大对象直接进入老年代</div></a></li><li class="anchor"><a href="/1-java/2-jvm/2-garbage-collection/#_1-3-长期存活的对象将进入老年代" class="anchor-link heading3"><div>1.3 长期存活的对象将进入老年代</div></a></li><li class="anchor"><a href="/1-java/2-jvm/2-garbage-collection/#_1-4-动态对象年龄判断" class="anchor-link heading3"><div>1.4 动态对象年龄判断</div></a></li><li class="anchor"><a href="/1-java/2-jvm/2-garbage-collection/#_1-5-主要进行gc的区域" class="anchor-link heading3"><div>1.5 主要进行GC的区域</div></a></li><li class="anchor"><a href="/1-java/2-jvm/2-garbage-collection/#_1-6-空间分配担保" class="anchor-link heading3"><div>1.6 空间分配担保</div></a></li><li class="anchor"><a href="/1-java/2-jvm/2-garbage-collection/#二、对象死亡" class="anchor-link heading2"><div>二、对象死亡</div></a></li><li class="anchor"><a href="/1-java/2-jvm/2-garbage-collection/#_2-1-引用计数法" class="anchor-link heading3"><div>2.1 引用计数法</div></a></li><li class="anchor"><a href="/1-java/2-jvm/2-garbage-collection/#_2-2-可达性分析算法" class="anchor-link heading3"><div>2.2 可达性分析算法</div></a></li><li class="anchor"><a href="/1-java/2-jvm/2-garbage-collection/#_2-3-引用" class="anchor-link heading3"><div>2.3 引用</div></a></li><li class="anchor"><a href="/1-java/2-jvm/2-garbage-collection/#_2-4-不可达的对象并非-非死不可" class="anchor-link heading3"><div>2.4 不可达的对象并非“非死不可”</div></a></li><li class="anchor"><a href="/1-java/2-jvm/2-garbage-collection/#_2-5-如何判断一个常量是废弃常量" class="anchor-link heading3"><div>2.5 如何判断一个常量是废弃常量</div></a></li><li class="anchor"><a href="/1-java/2-jvm/2-garbage-collection/#_2-6-如何判断一个类是无用的类" class="anchor-link heading3"><div>2.6 如何判断一个类是无用的类</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><div class="custom-block warning"><p class="custom-block-title">Note</p> <p>本文转载自 <a href="https://javaguide.cn/java/jvm/jvm-garbage-collection/" target="_blank" rel="noopener noreferrer">JVM 垃圾回收详解 | JavaGuide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，略有改动</p></div> <h2 id="写在前面"><a href="#写在前面" class="header-anchor">#</a> 写在前面</h2> <h3 id="常见面试题"><a href="#常见面试题" class="header-anchor">#</a> 常见面试题</h3> <ul><li>如何判断对象是否死亡（两种方法）。</li> <li>简单的介绍一下强引用、软引用、弱引用、虚引用（虚引用与软引用和弱引用的区别、使用软引用能带来的好处）。</li> <li>如何判断一个常量是废弃常量</li> <li>如何判断一个类是无用的类</li> <li>垃圾收集有哪些算法，各自的特点？</li> <li>HotSpot 为什么要分为新生代和老年代？</li> <li>常见的垃圾回收器有哪些？</li> <li>介绍一下 CMS,G1 收集器。</li> <li>Minor Gc 和 Full GC 有什么不同呢？</li></ul> <h3 id="核心问题"><a href="#核心问题" class="header-anchor">#</a> 核心问题</h3> <ol><li>内存如何分配和回收</li> <li>哪些垃圾需要回收</li> <li>什么时候回收</li> <li>如何回收</li></ol> <p><img src="/assets/img/image-20220118102736004.63d0a8d6.png" alt="image-20220118102736004"></p> <h2 id="一、jvm内存分配与回收"><a href="#一、jvm内存分配与回收" class="header-anchor">#</a> 一、JVM内存分配与回收</h2> <p>Java 的自动内存管理主要是针对<strong>对象内存</strong>的回收和对象内存的分配。同时，Java 自动内存管理最核心的功能是 <strong>堆</strong> 内存中对象的分配与回收。</p> <p>Java 堆是垃圾收集器管理的主要区域，因此也被称作<strong>GC 堆（Garbage Collected Heap）</strong>.从垃圾回收的角度，由于现在收集器基本都采用分代垃圾收集算法，所以 Java 堆还可以细分为：新生代和老年代：再细致一点有：Eden 空间、From Survivor、To Survivor 空间等。<strong>进一步划分的目的是更好地回收内存，或者更快地分配内存。</strong></p> <p><img src="/assets/img/01d330d8-2710-4fad-a91c-7bbbfaaefc0e.fac41c8a.fac41c8a.png" alt="img"></p> <div class="custom-block tip"><p class="custom-block-title">第一次理解</p> <p>如图所示，一般对象的创建，会先分配到图左1的 <code>Eden</code> 区域，随着垃圾回收的进行，仍然存活的对象会根据存活时间向老年代转移。</p></div> <div class="custom-block tip"><p class="custom-block-title">常见分配策略</p> <ol><li>对象优先在 <code>Eden</code> 区域分配</li> <li>大对象直接进入老年代</li> <li>长期存活的对象将进入老年代</li></ol></div> <h3 id="_1-1-对象优先在-eden-区域分配"><a href="#_1-1-对象优先在-eden-区域分配" class="header-anchor">#</a> 1.1 对象优先在 <code>Eden</code> 区域分配</h3> <p>目前主流的垃圾收集器都会采用<strong>分代回收算法</strong>，因此需要将堆内存分为新生代和老年代，这样我们就可以根据各个年代的特点选择合适的垃圾收集算法。</p> <p>大多数情况下，对象在新生代中 eden 区分配。当 eden 区没有足够空间进行分配时，虚拟机将发起一次 Minor GC.</p> <p>具体测试见 <a href="https://javaguide.cn/java/jvm/jvm-garbage-collection/#_1-1-%E5%AF%B9%E8%B1%A1%E4%BC%98%E5%85%88%E5%9C%A8-eden-%E5%8C%BA%E5%88%86%E9%85%8D" target="_blank" rel="noopener noreferrer">JVM 垃圾回收详解 | JavaGuide | 1.1 对象优先在 <code>Eden</code> 区域分配<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_1-2-大对象直接进入老年代"><a href="#_1-2-大对象直接进入老年代" class="header-anchor">#</a> 1.2 大对象直接进入老年代</h3> <p><strong>为什么要这样呢？</strong></p> <p>为了避免为大对象分配内存时由于分配担保机制带来的复制而降低效率。（我的理解是：eden中内存分配不足时，总有对象要被转移到老年代的，不如一开始就将比较大的对象直接分配在老年代）</p> <h3 id="_1-3-长期存活的对象将进入老年代"><a href="#_1-3-长期存活的对象将进入老年代" class="header-anchor">#</a> 1.3 长期存活的对象将进入老年代</h3> <p>如果对象在 Eden 出生并经过第一次 Minor GC 后仍然能够存活，并且能被 Survivor 容纳的话，将被移动到 Survivor 空间中，并将对象年龄设为 1.对象在 Survivor 中每熬过一次 MinorGC,年龄就增加 1 岁，当它的年龄增加到一定程度（默认为 15 岁），就会被晋升到老年代中。对象晋升到老年代的年龄阈值，可以通过参数 <code>-XX:MaxTenuringThreshold</code> 来设置。</p> <h3 id="_1-4-动态对象年龄判断"><a href="#_1-4-动态对象年龄判断" class="header-anchor">#</a> 1.4 动态对象年龄判断</h3> <p>大部分情况，对象都会首先在 Eden 区域分配，在一次新生代垃圾回收后，如果对象还存活，则会进入 s0 或者 s1，并且对象的年龄还会加 1(Eden 区-&gt;Survivor 区后对象的初始年龄变为 1)，当它的年龄增加到一定程度（默认为 15 岁），就会被晋升到老年代中。对象晋升到老年代的年龄阈值，可以通过参数 <code>-XX:MaxTenuringThreshold</code> 来设置</p> <div class="custom-block tip"><p class="custom-block-title">晋升年龄阈值</p> <p>Hotspot 遍历所有对象时，按照年龄从小到大对其所占用的大小进行累积，当累积的某个年龄大小超过了 survivor 区的 50% 时（默认值是 50%，可以通过 <code>-XX:TargetSurvivorRatio=percent</code> 来设置，参见 <a href="https://github.com/Snailclimb/JavaGuide/issues/1199" target="_blank" rel="noopener noreferrer">issue1199  (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ），取这个年龄和 MaxTenuringThreshold 中更小的一个值，作为新的晋升年龄阈值</p></div> <div class="custom-block tip"><p class="custom-block-title">默认晋升年龄</p> <p><strong>《深入理解 Java 虚拟机》</strong> 中说默认的晋升年龄是15，但是 Oracle 官网中说明这个晋升年龄并不都是15，这个是要区分垃圾收集器的，CMS 就是 6</p></div> <h3 id="_1-5-主要进行gc的区域"><a href="#_1-5-主要进行gc的区域" class="header-anchor">#</a> 1.5 主要进行GC的区域</h3> <p>针对 HotSpot VM 的实现，它里面的 GC 其实准确分类只有两大种：</p> <p>部分收集 (Partial GC)：</p> <ul><li>新生代收集（Minor GC / Young GC）：只对新生代进行垃圾收集；</li> <li>老年代收集（Major GC / Old GC）：只对老年代进行垃圾收集。需要注意的是 Major GC 在有的语境中也用于指代整堆收集；</li> <li>混合收集（Mixed GC）：对整个新生代和部分老年代进行垃圾收集。</li></ul> <p>整堆收集 (Full GC)：收集整个 Java 堆和方法区</p> <h3 id="_1-6-空间分配担保"><a href="#_1-6-空间分配担保" class="header-anchor">#</a> 1.6 空间分配担保</h3> <p>空间分配担保是为了确保在 Minor GC 之前老年代本身还有容纳新生代所有对象的剩余空间</p> <blockquote><p>JDK 6 Update 24 之前，在发生 Minor GC 之前，虚拟机必须先检查老年代最大可用的连续空间是否大于新生代所有对象总空间，如果这个条件成立，那这一次 Minor GC 可以确保是安全的。如果不成立，则虚拟机会先查看 <code>-XX:HandlePromotionFailure</code> 参数的设置值是否允许担保失败(Handle Promotion Failure);如果允许，那会继续检查老年代最大可用的连续空间是否大于历次晋升到老年代对象的平均大小，如果大于，将尝试进行一次 Minor GC，尽管这次 Minor GC 是有风险的;如果小于，或者 <code>-XX: HandlePromotionFailure</code> 设置不允许冒险，那这时就要改为进行一次 Full GC。</p> <p>JDK 6 Update 24 之后的规则变为只要老年代的连续空间大于新生代对象总大小或者历次晋升的平均大小，就会进行 Minor GC，否则将进行 Full GC。</p></blockquote> <h2 id="二、对象死亡"><a href="#二、对象死亡" class="header-anchor">#</a> 二、对象死亡</h2> <p>堆中几乎放着所有的对象实例，对堆垃圾回收前的第一步就是要判断哪些对象已经死亡（即不能再被任何途径使用的对象）。</p> <p><img src="/assets/img/11034259.2dc6983d.2dc6983d.png" alt="img"></p> <h3 id="_2-1-引用计数法"><a href="#_2-1-引用计数法" class="header-anchor">#</a> 2.1 引用计数法</h3> <p>给对象中添加一个引用计数器，每当有一个地方引用它，计数器就加 1；当引用失效，计数器就减 1；任何时候计数器为 0 的对象就是不可能再被使用的。</p> <p><strong>这个方法实现简单，效率高，但是目前主流的虚拟机中并没有选择这个算法来管理内存，其最主要的原因是它很难解决对象之间相互循环引用的问题。</strong> 所谓对象之间的相互引用问题，如下面代码所示：除了对象 objA 和 objB 相互引用着对方之外，这两个对象之间再无任何引用。但是他们因为互相引用对方，导致它们的引用计数器都不为 0，于是引用计数算法无法通知 GC 回收器回收他们。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReferenceCountingGc</span> <span class="token punctuation">{</span>
    <span class="token class-name">Object</span> instance <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">ReferenceCountingGc</span> objA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReferenceCountingGc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">ReferenceCountingGc</span> objB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReferenceCountingGc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		objA<span class="token punctuation">.</span>instance <span class="token operator">=</span> objB<span class="token punctuation">;</span>
		objB<span class="token punctuation">.</span>instance <span class="token operator">=</span> objA<span class="token punctuation">;</span>
		objA <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		objB <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_2-2-可达性分析算法"><a href="#_2-2-可达性分析算法" class="header-anchor">#</a> 2.2 可达性分析算法</h3> <p>这个算法的基本思想就是通过一系列的称为 <strong>“GC Roots”</strong> 的对象作为起点，从这些节点开始向下搜索，节点所走过的路径称为引用链，当一个对象到 GC Roots 没有任何引用链相连的话，则证明此对象是不可用的。</p> <p>可作为 GC Roots 的对象包括下面几种:</p> <ul><li>虚拟机栈(栈帧中的本地变量表)中引用的对象</li> <li>本地方法栈(Native 方法)中引用的对象</li> <li>方法区中类静态属性引用的对象</li> <li>方法区中常量引用的对象</li> <li>所有被同步锁持有的对象</li></ul> <p><img src="data:image/png;base64,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" alt="下载"></p> <h3 id="_2-3-引用"><a href="#_2-3-引用" class="header-anchor">#</a> 2.3 引用</h3> <p>无论是通过引用计数法判断对象引用数量，还是通过可达性分析法判断对象的引用链是否可达，判定对象的存活都与“引用”有关。</p> <p>JDK1.2 之前，Java 中引用的定义很传统：如果 reference 类型的数据存储的数值代表的是另一块内存的起始地址，就称这块内存代表一个引用。</p> <p>JDK1.2 以后，Java 对引用的概念进行了扩充，将引用分为强引用、软引用、弱引用、虚引用四种（引用强度逐渐减弱）</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">String</span> str<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                     <span class="token comment">// 强引用</span>
<span class="token class-name">SoftReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> softRef<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SoftReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 软引用</span>
<span class="token class-name">WeakReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> abcWeakRef <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 弱引用</span>
<span class="token operator">?</span><span class="token operator">?</span><span class="token operator">?</span>                                                               <span class="token comment">// 虚引用</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>更多解释见 <a href="https://javaguide.cn/java/jvm/jvm-garbage-collection/#_2-3-%E5%86%8D%E8%B0%88%E5%BC%95%E7%94%A8" target="_blank" rel="noopener noreferrer">JVM 垃圾回收详解 | JavaGuide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="/assets/img/8vvr30i6ew.0c7a4f18.png" alt="8vvr30i6ew"></p> <p><img src="/assets/img/a3je2pxov.a0bd9c08.png" alt="a3je2pxov"></p> <h3 id="_2-4-不可达的对象并非-非死不可"><a href="#_2-4-不可达的对象并非-非死不可" class="header-anchor">#</a> 2.4 不可达的对象并非“非死不可”</h3> <p>即使在可达性分析法中不可达的对象，也并非是“非死不可”的，这时候它们暂时处于“缓刑阶段”，要真正宣告一个对象死亡，至少要经历两次标记过程；可达性分析法中不可达的对象被第一次标记并且进行一次筛选，筛选的条件是此对象是否有必要执行 <code>finalize</code> 方法。当对象没有覆盖 <code>finalize</code> 方法，或 <code>finalize</code> 方法已经被虚拟机调用过时，虚拟机将这两种情况视为没有必要执行。</p> <p>被判定为需要执行的对象将会被放在一个队列中进行第二次标记，除非这个对象与引用链上的任何一个对象建立关联，否则就会被真的回收。</p> <blockquote><p><code>Object</code> 类中的 <code>finalize</code> 方法一直被认为是一个糟糕的设计，成为了 Java 语言的负担，影响了 Java 语言的安全和 GC 的性能。JDK9 版本及后续版本中各个类中的 <code>finalize</code> 方法会被逐渐弃用移除。忘掉它的存在吧！</p> <p>参考：</p> <ul><li><a href="https://openjdk.java.net/jeps/421" target="_blank" rel="noopener noreferrer">JEP 421: Deprecate Finalization for Removal  (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mp.weixin.qq.com/s/LW-paZAMD08DP_3-XCUxmg" target="_blank" rel="noopener noreferrer">是时候忘掉 finalize 方法了<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></blockquote> <h3 id="_2-5-如何判断一个常量是废弃常量"><a href="#_2-5-如何判断一个常量是废弃常量" class="header-anchor">#</a> 2.5 如何判断一个常量是废弃常量</h3> <ol><li><strong>JDK1.7 之前运行时常量池逻辑包含字符串常量池存放在方法区, 此时 hotspot 虚拟机对方法区的实现为永久代</strong></li> <li><strong>JDK1.7 字符串常量池被从方法区拿到了堆中, 这里没有提到运行时常量池,也就是说字符串常量池被单独拿到堆,运行时常量池剩下的东西还在方法区, 也就是 hotspot 中的永久代</strong> 。</li> <li><strong>JDK1.8 hotspot 移除了永久代用元空间(Metaspace)取而代之, 这时候字符串常量池还在堆, 运行时常量池还在方法区, 只不过方法区的实现从永久代变成了元空间(Metaspace)</strong></li></ol> <p>假如在字符串常量池中存在字符串 &quot;abc&quot;，如果当前没有任何 String 对象引用该字符串常量的话，就说明常量 &quot;abc&quot; 就是废弃常量，如果这时发生内存回收的话而且有必要的话，&quot;abc&quot; 就会被系统清理出常量池了</p> <h3 id="_2-6-如何判断一个类是无用的类"><a href="#_2-6-如何判断一个类是无用的类" class="header-anchor">#</a> 2.6 如何判断一个类是无用的类</h3> <p>方法区主要回收的是无用的类，那么如何判断一个类是无用的类的呢？</p> <p>判定一个常量是否是“废弃常量”比较简单，而要判定一个类是否是“无用的类”的条件则相对苛刻许多。类需要同时满足下面 3 个条件才能算是 <strong>“无用的类”</strong> ：</p> <ul><li>该类所有的实例都已经被回收，也就是 Java 堆中不存在该类的任何实例。</li> <li>加载该类的 <code>ClassLoader</code> 已经被回收。</li> <li>该类对应的 <code>java.lang.Class</code> 对象没有在任何地方被引用，无法在任何地方通过反射访问该类的方法。</li></ul> <p>虚拟机可以对满足上述 3 个条件的无用类进行回收，这里说的仅仅是“可以”，而并不是和对象一样不使用了就会必然被回收。</p></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><div class="edit-link"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon edit-icon"><path d="M117.953 696.992 64.306 959.696l265.931-49.336 450.204-452.505-212.284-213.376-450.204 452.513zm496.384-296.326L219.039 797.993l-46.108-46.34L568.233 354.33l46.104 46.335zm345.357-122.99-114.45 115.04-212.288-213.377 114.45-115.035 212.288 213.371zm0 0" fill="currentColor"></path></svg> <a href="https://github.com/lllllan-fv/blog/edit/main/1-java/2-jvm/2-garbage-collection/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a></div> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">2022年1月22日 18:25</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: 342310798@qq.com" class="contributor">
          lllllan
        </span> <!----></span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/1-java/2-jvm/1-memory-area-details/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 0 1-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 0 1 9.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        java 内存区域详解
      </a></span> <span class="next"><a href="/1-java/3-container/1-collection-basic/">
        Java 集合框架基础知识
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 0 1-18.616.092 15.368 15.368 0 0 1-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 0 1 5.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 0 1 5.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <!----> <!----> <div class="content__page-bottom"></div></main> <footer class="footer-wrapper"><!----> <div class="footer"><a href="https://beian.miit.gov.cn/" target="_blank">粤ICP备2021095794号</a></div> <div class="copyright">Copyright © 2022 lllllan</div></footer></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button class="pswp__button pswp__button--close"></button> <button class="pswp__button pswp__button--share"></button> <button class="pswp__button pswp__button--fs"></button> <button class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button class="pswp__button pswp__button--arrow--left"></button> <button class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/assets/js/app.7623ec66.js" defer></script><script src="/assets/js/vendors~layout-Layout.d3ef1ddc.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.e3241214.js" defer></script><script src="/assets/js/page-Java垃圾回收.d7d55f28.js" defer></script>
  </body>
</html>
