<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>认识 JVM | lllllan</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script src="https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <link rel="alternate" type="application/atom+xml" href="https://vue-blog.lllllan.cn/atom.xml" title="lllllan Atom Feed">
    <link rel="alternate" type="application/json" href="https://vue-blog.lllllan.cn/feed.json" title="lllllan JSON Feed">
    <link rel="alternate" type="application/rss+xml" href="https://vue-blog.lllllan.cn/rss.xml" title="lllllan RSS Feed">
    <link rel="icon" href="/logo.png">
    <link rel="icon" href="/logo.png" type="image/png" sizes="512x512">
    <link rel="icon" href="/logo.png" type="image/png" sizes="192x192">
    <link rel="icon" href="/logo.png" type="image/png" sizes="512x512">
    <link rel="icon" href="/logo.png" type="image/png" sizes="192x192">
    <link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials">
    <link rel="apple-touch-icon" href="/logo.png">
    <meta name="description" content="">
    <meta property="og:url" content="/1-java/2-jvm/3-know-the-jvm/">
    <meta property="og:site_name" content="lllllan">
    <meta property="og:title" content="认识 JVM">
    <meta property="og:description" content="本文转载自 大白话带你认识JVM，略有改动 一、JVM的基本介绍 JVM，Java Virtual Machine。是一个虚构出来的计算机，是一种规范。 1.1 Java 文件如何被运行 比如我们现在写了一个 HelloWorld.java 好了，那这个 HelloWorld.java 抛开所有东西不谈，那是不是就类似于一个文本文件，只是这个文本文件它写的都">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh">
    <meta property="og:locale:alternate" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="lllllan">
    <meta property="article:author" content="lllllan">
    <meta property="article:tag" content="JVM">
    <meta name="theme-color" content="#46bd87">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/logo.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <link rel="preload" href="/assets/css/0.styles.fe5e2315.css" as="style"><link rel="preload" href="/assets/js/app.5b6a1d0a.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Layout.b7034363.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.e3241214.js" as="script"><link rel="preload" href="/assets/js/page-认识JVM.83d08df2.js" as="script"><link rel="prefetch" href="/assets/js/34.9e403830.js"><link rel="prefetch" href="/assets/js/35.34fe3b13.js"><link rel="prefetch" href="/assets/js/36.48ba4a80.js"><link rel="prefetch" href="/assets/js/37.ace73e26.js"><link rel="prefetch" href="/assets/js/38.98d68e96.js"><link rel="prefetch" href="/assets/js/39.47aa2530.js"><link rel="prefetch" href="/assets/js/layout-Blog.a09f0d27.js"><link rel="prefetch" href="/assets/js/layout-Layout.28148f81.js"><link rel="prefetch" href="/assets/js/layout-NotFound.12bb8c6a.js"><link rel="prefetch" href="/assets/js/layout-Slide.5a063677.js"><link rel="prefetch" href="/assets/js/page-ArrayList源码解读.54c70136.js"><link rel="prefetch" href="/assets/js/page-JavaGuide-Java基础知识.8413c851.js"><link rel="prefetch" href="/assets/js/page-Java垃圾回收.614d7314.js"><link rel="prefetch" href="/assets/js/page-Java基础面试题.750b8f65.js"><link rel="prefetch" href="/assets/js/page-Java笔记.48c90d4b.js"><link rel="prefetch" href="/assets/js/page-Java集合框架基础知识.a51f9030.js"><link rel="prefetch" href="/assets/js/page-MySQL笔记.7ee195f2.js"><link rel="prefetch" href="/assets/js/page-R2Coding-Java基础知识.cf2ae1dc.js"><link rel="prefetch" href="/assets/js/page-java内存区域详解.f5d6976d.js"><link rel="prefetch" href="/assets/js/page-java是值传递.19eaaf1d.js"><link rel="prefetch" href="/assets/js/page-代理详解.221e5fa2.js"><link rel="prefetch" href="/assets/js/page-刷题笔记.0403bb93.js"><link rel="prefetch" href="/assets/js/page-反射机制.cb410293.js"><link rel="prefetch" href="/assets/js/page-操作系统-常见面试题.64bca471.js"><link rel="prefetch" href="/assets/js/page-数组练习.c1b39318.js"><link rel="prefetch" href="/assets/js/page-第一章、浏览器生成消息.fd615be8.js"><link rel="prefetch" href="/assets/js/page-第三章、从网线到网络设备.2575f204.js"><link rel="prefetch" href="/assets/js/page-第二章、用电信号传输TCPIP数据.35e82b87.js"><link rel="prefetch" href="/assets/js/page-计算机基础.9eca6ee9.js"><link rel="prefetch" href="/assets/js/page-计算机网络-常见面试题.ce3d3341.js"><link rel="prefetch" href="/assets/js/page-项目主页.a5deedfb.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.874b7c55.js"><link rel="prefetch" href="/assets/js/vendors~mermaid.e4365cdb.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.99f6c6a2.js"><link rel="prefetch" href="/assets/js/vendors~reveal.f00fc94c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fe5e2315.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="lllllan" class="logo"> <!----> <span class="site-name can-hide">lllllan</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link router-link-active"><i class="iconfont icon-home"></i>
  Blog Home
</a></div></nav> <!----> <a rel="noopener noreferrer" href="https://github.com/lllllan-fv/blog" target="_blank" class="repo-link can-hide">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="/" class="nav-link router-link-active"><i class="iconfont icon-home"></i>
  Blog Home
</a></div> <a rel="noopener noreferrer" href="https://github.com/lllllan-fv/blog" target="_blank" class="repo-link">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><a href="/1-java/" aria-current="page" class="sidebar-link"><i class="iconfont icon-info"></i>Java 笔记</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">java 基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable open"><!----> <span class="title">JVM</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/1-java/2-jvm/1-memory-area-details/" class="sidebar-link"><i class="iconfont icon-page"></i>java 内存区域详解</a></li><li><a href="/1-java/2-jvm/2-garbage-collection/" class="sidebar-link"><i class="iconfont icon-page"></i>Java 垃圾回收</a></li><li><a href="/1-java/2-jvm/3-know-the-jvm/" aria-current="page" class="active sidebar-link"><i class="iconfont icon-page"></i>认识 JVM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/1-java/2-jvm/3-know-the-jvm/#一、jvm的基本介绍" class="sidebar-link">一、JVM的基本介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/1-java/2-jvm/3-know-the-jvm/#_1-1-java-文件如何被运行" class="sidebar-link heading3">1.1 Java 文件如何被运行</a></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/3-know-the-jvm/#_1-2-简单例子" class="sidebar-link heading3">1.2 简单例子</a></li></ul></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/3-know-the-jvm/#二、类加载器" class="sidebar-link">二、类加载器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/1-java/2-jvm/3-know-the-jvm/#_2-1-类加载器的流程" class="sidebar-link heading3">2.1 类加载器的流程</a></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/3-know-the-jvm/#_2-2-类加载器的加载顺序" class="sidebar-link heading3">2.2 类加载器的加载顺序</a></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/3-know-the-jvm/#_2-3-双亲委派机制" class="sidebar-link heading3">2.3 双亲委派机制</a></li></ul></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/3-know-the-jvm/#三、运行时数据" class="sidebar-link">三、运行时数据</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/1-java/2-jvm/3-know-the-jvm/#_3-1-本地方法栈和程序计数器" class="sidebar-link heading3">3.1 本地方法栈和程序计数器</a></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/3-know-the-jvm/#_3-2-方法区" class="sidebar-link heading3">3.2 方法区</a></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/3-know-the-jvm/#_3-3-虚拟机栈和虚拟机堆" class="sidebar-link heading3">3.3 虚拟机栈和虚拟机堆</a></li></ul></li><li class="sidebar-sub-header"><a href="/1-java/2-jvm/3-know-the-jvm/#未完待续" class="sidebar-link">未完待续</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">容器</span> <span class="arrow right"></span></p> <!----></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb"><ol vocab="https://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a href="/1-java/" property="item" typeof="WebPage" class="router-link-active"><i class="iconfont icon-info"></i> <span property="name">Java 笔记</span></a> <meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem" class="is-active"><a href="/1-java/2-jvm/3-know-the-jvm/" aria-current="page" property="item" typeof="WebPage" class="router-link-exact-active router-link-active"><i class="iconfont icon-page"></i> <span property="name">认识 JVM</span></a> <meta property="position" content="2"></li></ol></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><i class="iconfont icon-page"></i> <span property="headline">认识 JVM</span></h1> <div class="page-info"><!----> <span aria-label="Author🖊" data-balloon-pos="down"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon author-icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z" fill="currentColor"></path></svg> <span property="author">lllllan</span></span><!----><span aria-label="Writing Date📅" data-balloon-pos="down" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2022-1-26</span></span><span role="navigation" aria-label="Category🌈" data-balloon-pos="down" class="category-info enable"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon category-icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zm-.854 446.486H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zm446.371-446.486h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zm136.293 813.51H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z" fill="currentColor"></path></svg> <span property="articleSection">Java</span></span><span aria-label="Tags🏷" data-balloon-pos="down"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon tag-icon"><path d="M939.902 458.563 910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 0 0 0 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z" fill="currentColor"></path></svg> <ul class="tags-wrapper"><li class="tag clickable tag0"><span role="navigation">JVM</span></li></ul> <meta property="keywords" content="JVM"></span><span aria-label="Reading Time⌛" data-balloon-pos="down" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon timer-icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z" fill="currentColor"></path></svg> <span>About 11 min</span> <meta property="timeRequired" content="PT11M"></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/1-java/2-jvm/3-know-the-jvm/#一、jvm的基本介绍" class="anchor-link heading2"><div>一、JVM的基本介绍</div></a></li><li class="anchor"><a href="/1-java/2-jvm/3-know-the-jvm/#_1-1-java-文件如何被运行" class="anchor-link heading3"><div>1.1 Java 文件如何被运行</div></a></li><li class="anchor"><a href="/1-java/2-jvm/3-know-the-jvm/#_1-2-简单例子" class="anchor-link heading3"><div>1.2 简单例子</div></a></li><li class="anchor"><a href="/1-java/2-jvm/3-know-the-jvm/#二、类加载器" class="anchor-link heading2"><div>二、类加载器</div></a></li><li class="anchor"><a href="/1-java/2-jvm/3-know-the-jvm/#_2-1-类加载器的流程" class="anchor-link heading3"><div>2.1 类加载器的流程</div></a></li><li class="anchor"><a href="/1-java/2-jvm/3-know-the-jvm/#_2-2-类加载器的加载顺序" class="anchor-link heading3"><div>2.2 类加载器的加载顺序</div></a></li><li class="anchor"><a href="/1-java/2-jvm/3-know-the-jvm/#_2-3-双亲委派机制" class="anchor-link heading3"><div>2.3 双亲委派机制</div></a></li><li class="anchor"><a href="/1-java/2-jvm/3-know-the-jvm/#三、运行时数据" class="anchor-link heading2"><div>三、运行时数据</div></a></li><li class="anchor"><a href="/1-java/2-jvm/3-know-the-jvm/#_3-1-本地方法栈和程序计数器" class="anchor-link heading3"><div>3.1 本地方法栈和程序计数器</div></a></li><li class="anchor"><a href="/1-java/2-jvm/3-know-the-jvm/#_3-2-方法区" class="anchor-link heading3"><div>3.2 方法区</div></a></li><li class="anchor"><a href="/1-java/2-jvm/3-know-the-jvm/#_3-3-虚拟机栈和虚拟机堆" class="anchor-link heading3"><div>3.3 虚拟机栈和虚拟机堆</div></a></li><li class="anchor"><a href="/1-java/2-jvm/3-know-the-jvm/#未完待续" class="anchor-link heading2"><div>未完待续</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><div class="custom-block warning"><p class="custom-block-title">Note</p> <p>本文转载自 <a href="https://juejin.cn/post/6844904048013869064#heading-28" target="_blank" rel="noopener noreferrer">大白话带你认识JVM<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，略有改动</p></div> <h2 id="一、jvm的基本介绍"><a href="#一、jvm的基本介绍" class="header-anchor">#</a> 一、JVM的基本介绍</h2> <p>JVM，Java Virtual Machine。是一个虚构出来的计算机，是一种规范。</p> <p><img src="data:image/png;base64,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" alt="img"></p> <h3 id="_1-1-java-文件如何被运行"><a href="#_1-1-java-文件如何被运行" class="header-anchor">#</a> 1.1 Java 文件如何被运行</h3> <p>比如我们现在写了一个 <code>HelloWorld.java</code> 好了，那这个 <code>HelloWorld.java</code> 抛开所有东西不谈，那是不是就类似于一个文本文件，只是这个文本文件它写的都是英文，而且有一定的缩进而已。</p> <p>那我们的 <strong>JVM</strong> 是不认识文本文件的，所以它需要一个 <strong>编译</strong> ，让其成为一个它会读二进制文件的 <code>HelloWorld.class</code></p> <h4 id="_1-1-1-类加载器"><a href="#_1-1-1-类加载器" class="header-anchor">#</a> 1.1.1 类加载器</h4> <p>如果 <code>JVM</code> 想要执行这个 <code>.class</code> 文件，我们需要将其装进一个 <strong>类加载器</strong> 中，它就像一个搬运工一样，会把所有的 <code>.class</code> 文件全部搬进JVM里面来。</p> <p><img src="data:image/png;base64,UklGRp4SAABXRUJQVlA4IJISAABwXgCdASpfAmkAPpFEm0slo6Mio5RroLASCWlt2ATgHTnC9b/x4Z3P2c7Tf8H0bfqP229frQH2Dak3yj73/rPYP/Af6zxZ98GoL6t/1His/uPcqat+1XqBenf0L/Uf4D95P8x6Tv9l6GfWX/c+4B/KP6T/t/za+Kf+N4vP17/dewD/Nv7p/yPuL+QD/W/y35o+2v9B/x3/e/zfwF/y7+w/8L/D/j/86vsS/dr2QP11/+RXjU+8TUImatUSbbQtyS7kIJk5vpNPFPHKCUPGoCJayIw9a+U6GbV5nPDw39wY+SRu9j5yRu9j5yO/gFYqihXuzml6H3yjt6l+BlUKkBvo67d3x7MsfFCwONCjsLN84frWamuFthubV+4kKL5BEqUEtzknTgnn+9z+SC51ZoDHQJPMSEnA4COtEYvPN18M3FfVon/ts3gjrw0Jfpa5rUvYEv/w0X2YaRp3aT+ce899P/KEkxQmgy47LHmi1GDN1Ucw6IiymBhIEt9A+X3EPEqD9ktjt1yDtXbWK9MP+zvI7NCjWQm2ajD6KgGE1KiQV3yaHtob2vphLkKdO/TNyk0Mtb+GTWh0KG2+znL36jFvjvK7xp9aAFdNFI9N7lvhQu3c2LQRUro+PhbibZLMrjDFqcdlaDCv2V+DwFuEs3l61aGzhHdKdJel73/QXy+yOJpl+IRuL+oKVdb/4geEv9fBW+V3fGLeSYZBVqzlxrxeUIn45m6S8ANF9mLQTVEFizQpwFIon01Ot4gcZRC7eK0tKuqKfFkRfEx7hJJrps9DQcknfNEXBB3TEhx9Ut8I8+yReLDDAZbydg8pvCwGDortxVO3CgplsAflhgA6Oqp1QRUJiMk/9usP7cmbL70B/jtZgY6uQaAqNpSkLybhlufBnXKWeoqNfF3W1WfmrWOya+575RLT8uO35rUDKSwUOV7+tbyUlNFSJp+SmQuvSgsVH7A2cFOfHR5vznhIu28CDTdN9tsooI5XD+x5WXNg6guw3WaUUVMZ3b0iAAD++wCsyWHecluOtMVmqcR6CAAdCOUMcNRiubb8u0P7+o5WQZcZVmEZ7pOq57xRMl7Y1jac2Pi2TFsxd1sMAHDQ0hdsaj97elHKsD4wwcQr7BBGpnuptFszy32dIuUzPVCnZR08pDmUSSGVXUSoeiLdPMZFl1MMKa6KooKuuF66cCo1IPbTLFSRN5gnwh5RHaGxW0Z+ftAehsjFI3JZxYkC/Y56T0Z1gRUOptewqWK5t0B+Z0ZkyABz2YlhOvk8/y9g5O6oCs6/lSOgBJYVScroU6RK9/fmwu83Ab/pFWlJdvYZyKH5QKOccQQrA+xABmDGE1ODFqvgdz+0GIUsOqExGo1Gp9OeosTqPgRj6Krq5PWloxX1LAiubb8u9hIrqRxufbinQI91EctfjuOUBygGYOmBgp+NAfrWhIxwYNGXtNh7PN9MjBkgJZ8erZOxm8GjboM20ywXLyuwTy/NcHdq7oBrYsEtRoIZr3yvg0zGMHAYxjBe7+OLuejU9OD9Y0ADzcDh+QsVbYt3+3KKydwFC4lZcq9nd3HBOYeNzpopblLl/f1IXnoErk6rF5YubWoDUvzqCYh2DdXvD7AsvX2UsvqJsQdjpcVAaroa2xX/x8+xx1OW6HeW1d0JaUI1s21TLbphwlt/VKzuxB+yikZ+MSAA3X2gnoRo/cvw4I95w2IYDoGsqBD14gR78GcA8LSbFNPoI3kphQ8xvq5gzlosGI/vmxHrwidHuow+JsnM9C+b6Jz1T0bBwVQCKCs9X1aQUepZysvRsZE3mbc2Z5Hs2ZQG+lgAAJOiADpMVAB0VW5Zc/vtY3YR0MI2YlSYtx12PJZZzO81/vV6og0sow1y1SgDWwwaCVWVhKvaiQFfUMhVx6nvjBiXhPwbpqikprxVPdmb7YNYa0KiAAf2Oa+xcN9zjlP3XhxtTQ2G4glY4bNg5il3L9I4zYADnn88JJfPBSjTw2VQoQwHP8ryoIhqDvhJH2MDpTFVkKEcTUWB6w0Ma7Cu9oIuNF2nGS2lNFeebANT7WZdkXhV9xHTHR2iRufiiFfZvphaksqwELeR1OZOLIl36CO/2D5L4ZFi5me4Jb2sRYQaqDoFjPLS8zZzvHlW5nEgF3G8W06Ff4M5isNIYEpGrQXWPfERedjguOAOXKxLB7zz7xFnIPTwdlCKOHw3D4/q9n3QEWVGjslix2bD/NOvwEwE8aDDsQbQ3bgqgIL+SQED5D5/40Wg3+GM5OyAljouw7Dd/LnEr8oD2nbPtlQOh63q4uB35J1El8Hj2bP7MkIZFR3Gv2IX696wk/iO8TapZ9iQHubXScjZXQTYc8Y3oaBDQd+ZUTJ0Uf9LhQdIc3DbD3BTWmNcaYtRSUUqYMf3BfvZSd6H8eMRUKc8iksMYDe9kGcRPe4W1+RJMR8rafewMRo2bUdbA7AAiP/hLjazoJXBWs0bwpSoVqxs9MZm+/AB0QWLB5TGk9yqDM8jZsAjlKFQCBIApowqVk/IPb5TB8hbVlEMVnVM9XMA/7ib3qxVcYtz/F/HF/g28kFiCWaMRa58xCLvVl1xYptpo2Yhsa48vEapWJMDunw/PfaBRguTEpywKiJsC8PrdPUxSkCptTLEPqGn1GZJSV2TdMxkfNUPX/zJVsqSRqMMWA3VE3p80jcl81vwHu1qCDpIZuop8EyBANLoZe28P+eXjk9Rh0vcaUkEEcwc6MQF5QG9ivdD8d3PUwnr7BWefHrFfCeDfnBUbljyyYT57TP2+nMBEMRcGaiWbxrhKgqAsOL5Ubo7ZhxsmNCxAKNritW1Uy5s7ut6FEaSSzls9gD2aJt4f88vHJ6jDpe40pIII5g52E4D+KmuTv56pPysISNZ0dhMSFAReWShj3/fqR+XWVf5mXq4DyTkJhUmPrqNZO2SbZUoQf2QT+S1QLqhtRJGHPr4SHKQkMbQK+CtzGUCOlAgQLPyqamHYj8qXXvXNdG0rIj7OZzdjalY//NmNM4qR2g5m/aMczuC/iVxgvWmt02SDB3OwcwIJMBLahgpdaug1tQDX5kYbVTDRW0t/+V9Cwu89QhPVp44Sb5n8/aQMrNuqpXN/fmM3TLHrlq0r1xNyjvkjbIPox5dfbCXPTcXX2rq/lp6K5FK2wrS6R2JJD8fFHvY9RdpTqducXOu6FS49RJTj1bVv3SK1SQlxtGjgwBRSG2++luSQ9Bn30m+FM7xbafle7l/+N8nz+8LGwwbQkTtCcJuM8hKcKVfzSL4wAwGzcQ1JyKpVcu0B+El/xIe+paeHxM3oMlceKRi31QbN/RCcEo4ZZbVLzEaPtEbaOJCwbnCqid9EYG7Gg/gB7hhm7CoWr6InI3j2Nc2fnYZ3XnLAzOZULx7jNxCRwuly7XNxiv5Xkxe8ioayuaFSycDayZJO1W+ThZ1QrwVjPZjuMyDv1+9gg/fns4RF0bAVMyI8yZ4lqHT3p9fPIIv/TJPeqlnMWKekwwIPedbiGEO9B3F/2gmJNNesdX8F1XZRQ6jvlZbK7YPOm6hWZ3P9IACPOGxbmvM9uvuSkmRQhBSlt66uL5ZG1k63m/EwGxeqoGnqetUJ7+zgxidfxoLcV9DXP2O8qdky1jVWT2Uto5/nKt87npZYvGujsw9nTmY5WDEA3WUJHRKU6EjAQ0wp5XuOyIe6VLCQZ6OErIP/C8oBPVbgA6ZlHUq6byaRdz4vZXdR/KRqfx4lV8vUiDAQ52cFt/7AXj1hk8pZEVLfjfW6l1TbPo4aEP9Fu5y+8jC5l3H5BG00QrHzsyvxG1d7GIXqEnR+nL6ku/cpNtHkcCkuSTveauPcPjV8PGLc0A+3aYewmTwoKk05csoWAp1UYxM2dNpnBArt+KjJt0RclXEiOEq2p2ijk0fbKQFw1t3f4yVJXfmEZkygnnCb1QqT9XyZ50meGzMkky41c2EIA6Unpw4C2Sy768DPkrtPeHlyKa9/pZ/LlMBO9B2VQIscy35Z4Aw1VS98yoZk5bWButaChzh1g+ZOFHvxvaTGHei0W0wPiTT7jurfDqEKpdKqSqZM2Z+tzW7nJRAiN4TAPPyVM1OVFJ1wLQBFR5lwdpQ3n2kQVqNx6YuBmO8UJUhQlcO9Ve0bKYv0J/GvLgjr1i07b3Gs0qvKByFcmzXAYQjgMo2sNqYXusFrqiyq3a3LMP7AOB/Ivku9ZG0BnbbbkjsOt5DOT33egAkw7xWVpD8etT+drf+YDGt4Ajqi398w3HXMJLg/MYVd00BfJKIBi0yT+1BW15HgdDLk+E+ENZo9LCuXqTDoLUc77c+gtjEFk4JcrRuvt7o+H/2c3jM+xJQuUqxsULd/dYqDpEAb5HYdfb+JznsWBRmxiOPT3ypcNVvqlevlpqh8fwlUzkWH7RCKuL7sQyDhsPqfBv/h3t6J2dV89y20lzv66DHP/jGqiSMhSHAEeH9/x7hwQ9iY3BvC7cne1F6QHWlnsoHirlEqro9kmzFkseT7jb0OYMquZoYgp4VCw03I9LTqsWiLK0WZk8Pa5zxQzGoTJTScpQhdin4crLT4BxGCteoUUzjX4vAAC3Uw3kLPYcoE2GbZWF1wfC5f74QgB2WNVF/VLdVl/r1B+ZEEI7KhV3H8ErAPlgD4FI4UK61qVloAcQPu7x7kNFQAM4QNA9aLQlVdX/qQVZLWSgT1orDGPkKie3PoevRjljHTFKil5OMop+GZTVyDolYLtAVy/dPsZUmE/1HSNCDC3Nt1mnUDEUxACM85NTwVWk7k4mCWMeQ6fUzk2QuwI/c44AJRu39yBl5n7QdpGjbylbVikxbPH1Eukm0XurEEutrGfNbq+04k7MzEdMKtB11Gj1I251Uq4yqmRyTi0W9WlO9zkbWY7dLeTj7zTGXVzo51H0pVil8xa0CGVybD7DYN+qc0Fqvq+W8NEwe0+17Lpooi6ZrZXAOvJtUg4+3P37EZe7+PX1xh2dfPyhPjt2Td8PNU03nQBnXuzPtjhfdODceG64fRAZd5oi0eN4ridhQ9bLtEqJ4LSkD/sNtEHtoB9dEEjUvHNzJn0s0PfjUh3bWPD+qSYQVEBEACCW4rKQI0uPmeMSPAwn0UtQZRP9iOhOLMc6vvyMuyt+k8nTw5lc88lVgfC3aYmwiUtEr69pmYIamk/6Se+YhMeEfBJb2hMKNHLQyIxjFTmbEsaiTakKK3WcFuG5fX+iQzdTIfcogxE6Lemir4IcViocChAPsBS46FOM2bvkxIBudsUmCMUIxWp6S5g4QDhmjv86o0w9b/7el2/9FwCWqY4KTh9jKgFoeHL/VsMKWZShftBf7yxZwvfY4hljHEMjbFi+58ItMDcDMprRazDYHII31/CKgT2T788lBOPCyEpradHFA8k8TyPnSb0dv8EOV4jUaDCIgZnkrx/bHhGXmOSn3iA+AQCvO6XNETeYnWnsQi9ROoGOzjG+b6Qe4m8wQoYAVEjdwTx++w0h93v/q+64zl6ri5cxeD9Q1pylAnPyP+0BaOlRrWnAbgLnaWSypk+KlGT81AaL3IUP3fVhc4zEl9n5cN7w+aAPA3ITKGJMTExKOgMS7UtdwT3E5PheqkxIZnci4z3Kc+mNXRO0evsYkvMz7rfXHC93UsABQvam9kvKfyDuIkhaY9hjylkByR17AA35jqeyjcyX7lO9NOWRgTcaCisvH8kaprqPL7MV7s8nbGr7wguqlzfvtTPPrTyDK5z3VqXPMCPNx5T6CkBUg3nRX/vnxCPgUtb4M8OnuNLN2e2uomgOcWTr5ufO74DK6tnp3PlgTx/mWPY+4gcFPn9Dv82QHYNt4F6XWXpzf1wkQzbjK4o2o1bJUm7olgU5KizV2J2C0Sbk1RBXRNtJxk0fQ88N5KY75qqNnYOw6o1bmsLLEvSJwcnbyUMulZ1kPyKV6yLzNARlK4LJODKTQjjofqT2i2l8SgH4xvERcL/YRhqPkk6Pm6VETZSXOCwp+7tJqT1uemvKJbh6aViSoLYyY801vFVJgB0CYv4esaOTOCdyeengQod9hioe8WlICip9VDCOkkBoAcfc2VRihMausshCbV0i1BMSA9U2ycF8H/WcxzhFcJokwg7dhxDbiFbJFqQjvzqhAAkFvlBE2pNijgULcbTeo+VQBFMJ3yMpNuAf3CGklVXRywRgJOAwD45QhzRHuVRVWyc2yAtsb9CCe+NAMV6gs8nPvOkviCIeWaY3QFmzvMlBBvrZ3bFkOM4hM4zO5RdjoIdsYgPE/zmizp+jxdQ6PsHaclLF5hcAn4A721mqjYj1eIplmlKOx2ghK3YXynU3n2In0JACcCvjAfOn+Sn7Tdn/Ct4AAAA==" alt="img"></p> <h4 id="_1-1-2-方法区"><a href="#_1-1-2-方法区" class="header-anchor">#</a> 1.1.2 方法区</h4> <p><strong>方法区</strong> 是用于存放类似于元数据信息方面的数据的，比如类信息，常量，静态变量，编译后代码···等</p> <p>类加载器将 <code>.class</code> 文件搬过来就是先丢到这一块上</p> <h4 id="_1-1-3-堆"><a href="#_1-1-3-堆" class="header-anchor">#</a> 1.1.3 堆</h4> <p><strong>堆</strong> 主要放了一些存储的数据，比如对象实例，数组···等，它和方法区都同属于 <strong>线程共享区域</strong> 。也就是说它们都是 <strong>线程不安全</strong> 的</p> <h4 id="_1-1-4-栈"><a href="#_1-1-4-栈" class="header-anchor">#</a> 1.1.4 栈</h4> <p><strong>栈</strong> 这是我们的代码运行空间。我们编写的每一个方法都会放到 <strong>栈</strong> 里面运行。</p> <p>我们会听说过 本地方法栈 或者 本地方法接口 这两个名词，不过我们基本不会涉及这两块的内容，它俩底层是使用C来进行工作的，和Java没有太大的关系。</p> <h4 id="_1-1-5-程序计数器"><a href="#_1-1-5-程序计数器" class="header-anchor">#</a> 1.1.5 程序计数器</h4> <p>主要就是完成一个加载工作，类似于一个指针一样的，指向下一行我们需要执行的代码。和栈一样，都是 <strong>线程独享</strong> 的，就是说每一个线程都会有自己对应的一块区域而不会存在并发和多线程的问题。</p> <p><img src="/assets/img/16f8ab42da5a81cdtplv-t2oaga2asx-watermark.a58f892d.png" alt="img"></p> <h4 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h4> <ol><li>Java文件经过编译后变成 <code>.class</code> 字节码文件</li> <li>字节码文件通过 <strong>类加载器</strong> 被搬运到 JVM 虚拟机中</li> <li>虚拟机主要的5大块：方法区，堆都为线程共享区域，有线程安全问题，栈和本地方法栈和计数器都是独享区域，不存在线程安全问题，而 JVM 的调优主要就是围绕堆，栈两大块进行</li></ol> <h3 id="_1-2-简单例子"><a href="#_1-2-简单例子" class="header-anchor">#</a> 1.2 简单例子</h3> <p>一个简单的学生类：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;student's name is &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>一个 main 方法：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Student</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">&quot;jack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        student<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>执行步骤：</p> <ol><li>编译好 <code>App.java</code> 后得到 <code>App.class</code> 后，执行 <code>App.class</code>，系统会启动一个 JVM 进程，从 <code>classpath</code> 路径中找到一个名为 <code>App.class</code> 的二进制文件，将 App 的类信息加载到运行时数据区的方法区内，这个过程叫做 <strong>App 类的加载</strong></li> <li>JVM 找到 App 的主程序入口，执行main方法</li> <li>这个main中的第一条语句为 Student student = new Student(&quot;tellUrDream&quot;) ，就是让 JVM 创建一个Student对象，但是这个时候方法区中是没有 Student 类的信息的，所以 JVM 马上加载 Student 类，把 Student 类的信息放到方法区中</li> <li>加载完 Student 类后，JVM 在堆中为一个新的 Student 实例分配内存，然后调用构造函数初始化 Student 实例，这个 Student 实例持有 <strong>指向方法区中的 Student 类的类型信息</strong> 的引用</li> <li>执行student.sayName();时，JVM 根据 student 的引用找到 student 对象，然后根据 student 对象持有的引用定位到方法区中 student 类的类型信息的方法表，获得 sayName() 的字节码地址。</li> <li>执行sayName()</li></ol> <h2 id="二、类加载器"><a href="#二、类加载器" class="header-anchor">#</a> 二、类加载器</h2> <p>之前也提到了它是负责加载 <code>.class</code> 文件的，它们在文件开头会有特定的文件标示，将 <code>.class</code> 文件字节码内容加载到内存中，并将这些内容转换成方法区中的运行时数据结构，并且 <code>ClassLoader</code> 只负责 <code>.class</code> 文件的加载，而是否能够运行则由 <code>Execution Engine</code> 来决定</p> <h3 id="_2-1-类加载器的流程"><a href="#_2-1-类加载器的流程" class="header-anchor">#</a> 2.1 类加载器的流程</h3> <p>从类被加载到虚拟机内存中开始，到释放内存总共有7个步骤：加载，验证，准备，解析，初始化，使用，卸载。其中 <strong>验证，准备，解析三个部分统称为连接</strong></p> <h4 id="_2-1-1-加载"><a href="#_2-1-1-加载" class="header-anchor">#</a> 2.1.1 加载</h4> <ol><li>将 <code>.class</code> 文件加载到内存</li> <li>将静态数据结构转化成方法区中运行时的数据结构</li> <li>在堆中生成一个代表这个类的 <code>java.lang.Class</code> 对象作为数据访问的入口</li></ol> <h4 id="_2-1-2-连接"><a href="#_2-1-2-连接" class="header-anchor">#</a> 2.1.2 连接</h4> <ol><li><strong>验证</strong>：确保加载的类符合 JVM 规范和安全，保证被校验类的方法在运行时不会做出危害虚拟机的事件，其实就是一个<u>安全检查</u></li> <li><strong>准备</strong>：为 <code>static</code> 变量在方法区中分配内存空间，设置变量的初始值，例如 <code>static int a = 3</code> （注意：<strong>准备阶段只设置类中的静态变量（方法区中），不包括实例变量（堆内存中），实例变量是对象初始化时赋值的）</strong></li> <li><strong>解析</strong>：虚拟机将常量池内的<u>符号引用替换为直接引用</u>的过程（符号引用比如我现在import java.util.ArrayList这就算符号引用，直接引用就是指针或者对象地址，注意引用对象一定是在内存进行）</li></ol> <h4 id="_2-1-3-初始化"><a href="#_2-1-3-初始化" class="header-anchor">#</a> 2.1.3 初始化</h4> <p>初始化其实就是一个赋值的操作，它会执行一个类构造器的 <code>&lt;clinit&gt;()</code> 方法。由编译器自动收集类中所有变量的赋值动作，此时准备阶段时的那个 static int a = 3 的例子，在这个时候就正式赋值为3</p> <h4 id="_2-1-4-卸载"><a href="#_2-1-4-卸载" class="header-anchor">#</a> 2.1.4 卸载</h4> <p>GC将无用对象从内存中卸载</p> <h3 id="_2-2-类加载器的加载顺序"><a href="#_2-2-类加载器的加载顺序" class="header-anchor">#</a> 2.2 类加载器的加载顺序</h3> <p>加载一个 <code>Class</code> 类的顺序也是有优先级的，类加载器从最底层开始往上的顺序是这样的</p> <ol><li>BootStrap ClassLoader：rt.jar</li> <li>Extention ClassLoader: 加载扩展的jar包</li> <li>App ClassLoader：指定的classpath下面的jar包</li> <li>Custom ClassLoader：自定义的类加载器</li></ol> <h3 id="_2-3-双亲委派机制"><a href="#_2-3-双亲委派机制" class="header-anchor">#</a> 2.3 双亲委派机制</h3> <p>当一个类收到了加载请求时，它是不会先自己去尝试加载的，而是委派给父类去完成，比如我现在要new一个 <code>Person</code> ，这个 Person 是我们自定义的类，如果我们要加载它，就会先委派 <code>App ClassLoader</code> ，只有当父类加载器都反馈自己无法完成这个请求（也就是父类加载器都没有找到加载所需的Class）时，子类加载器才会自行尝试加载</p> <p>这样做的好处是，加载位于 <code>rt.jar</code> 包中的类时不管是哪个加载器加载，最终都会委托到 <code>BootStrap ClassLoader</code> 进行加载，这样<strong>保证了使用不同的类加载器得到的都是同一个结果</strong>。</p> <p>其实这个也是一个隔离的作用，避免了我们的代码影响了JDK的代码，比如我现在要来一个</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这种时候，我们的代码肯定会报错，因为在加载的时候其实是找到了 <code>rt.jar</code> 中的 <code>String.class</code>，然后发现这也没有main方法</p> <h2 id="三、运行时数据"><a href="#三、运行时数据" class="header-anchor">#</a> 三、运行时数据</h2> <h3 id="_3-1-本地方法栈和程序计数器"><a href="#_3-1-本地方法栈和程序计数器" class="header-anchor">#</a> 3.1 本地方法栈和程序计数器</h3> <p>比如说我们现在点开 <code>Thread</code> 类的源码，会看到它的 <code>start()</code>  方法带有一个 <code>native</code> 关键字修饰，而且不存在方法体，这种用 <code>native</code> 修饰的方法就是本地方法，这是使用 <code>C</code> 来实现的，然后一般这些方法都会放到一个叫做本地方法栈的区域。</p> <p>程序计数器其实就是一个指针，它指向了我们程序中下一句需要执行的指令，它也是内存区域中唯一一个不会出现<code>OutOfMemoryError</code> 的区域，而且占用内存空间小到基本可以忽略不计。这个内存仅代表当前线程所执行的字节码的行号指示器，字节码解析器通过改变这个计数器的值选取下一条需要执行的字节码指令。</p> <p>如果执行的是 <code>native</code> 方法，那这个指针就不工作了。</p> <h3 id="_3-2-方法区"><a href="#_3-2-方法区" class="header-anchor">#</a> 3.2 方法区</h3> <p>方法区主要的作用技术存放类的元数据信息，常量和静态变量···等。当它存储的信息过大时，会在无法满足内存分配时报错。</p> <h3 id="_3-3-虚拟机栈和虚拟机堆"><a href="#_3-3-虚拟机栈和虚拟机堆" class="header-anchor">#</a> 3.3 虚拟机栈和虚拟机堆</h3> <p>一句话便是：栈管运行，堆管存储。则虚拟机栈负责运行代码，而虚拟机堆负责存储数据。</p> <h4 id="_3-3-1-虚拟机栈的概念"><a href="#_3-3-1-虚拟机栈的概念" class="header-anchor">#</a> 3.3.1 虚拟机栈的概念</h4> <p>它是Java方法执行的内存模型。里面会对局部变量，动态链表，方法出口，栈的操作（入栈和出栈）进行存储，且线程独享。同时如果我们听到局部变量表，那也是在说虚拟机栈</p> <h4 id="_3-3-2-虚拟机栈存在的异常"><a href="#_3-3-2-虚拟机栈存在的异常" class="header-anchor">#</a> 3.3.2 虚拟机栈存在的异常</h4> <p>如果线程请求的栈的深度大于虚拟机栈的最大深度，就会报 <code>StackOverflowError</code>（这种错误经常出现在递归中）。Java虚拟机也可以动态扩展，但随着扩展会不断地申请内存，当无法申请足够内存时就会报错 <code>OutOfMemoryError</code>。</p> <h4 id="_3-3-3-虚拟机栈的生命周期"><a href="#_3-3-3-虚拟机栈的生命周期" class="header-anchor">#</a> 3.3.3 虚拟机栈的生命周期</h4> <p>对于栈来说，不存在垃圾回收。只要程序运行结束，栈的空间自然就会释放了。栈的生命周期和所处的线程是一致的。</p> <p>这里补充一句：8种基本类型的变量+对象的引用变量+实例方法都是在栈里面分配内存。</p> <h4 id="_3-3-4-虚拟机栈的执行"><a href="#_3-3-4-虚拟机栈的执行" class="header-anchor">#</a> 3.3.4 虚拟机栈的执行</h4> <p>我们经常说的栈帧数据，说白了在JVM中叫栈帧，放到Java中其实就是方法，它也是存放在栈中的。</p> <p>栈中的数据都是以栈帧的格式存在，它是一个关于方法和运行期数据的数据集。比如我们执行一个方法a，就会对应产生一个栈帧A1，然后A1会被压入栈中。同理方法b会有一个B1，方法c会有一个C1，等到这个线程执行完毕后，栈会先弹出C1，后B1,A1。它是一个先进后出，后进先出原则。</p> <h4 id="_3-3-5-局部变量的复用"><a href="#_3-3-5-局部变量的复用" class="header-anchor">#</a> 3.3.5 局部变量的复用</h4> <p>局部变量表用于存放方法参数和方法内部所定义的局部变量。它的容量是以Slot为最小单位，一个slot可以存放32位以内的数据类型。</p> <p>虚拟机通过索引定位的方式使用局部变量表，范围为[0,局部变量表的slot的数量]。方法中的参数就会按一定顺序排列在这个局部变量表中，至于怎么排的我们可以先不关心。而为了节省栈帧空间，这些slot是可以复用的，当方法执行位置超过了某个变量，那么这个变量的slot可以被其它变量复用。当然如果需要复用，那我们的垃圾回收自然就不会去动这些内存。</p> <h4 id="_3-3-6-虚拟机堆的概念"><a href="#_3-3-6-虚拟机堆的概念" class="header-anchor">#</a> 3.3.6 虚拟机堆的概念</h4> <p>JVM内存会划分为堆内存和非堆内存，堆内存中也会划分为<strong>年轻代</strong>和<strong>老年代</strong>，而非堆内存则为<strong>永久代</strong>。年轻代又会分为 <code>Eden</code> 和 <code>Survivor</code> 区。<code>Survivor</code> 也会分为 <code>FromPlace</code> 和 <code>ToPlace</code>，<code>toPlace</code> 的 <code>survivor</code> 区域是空的。<code>Eden</code>，<code>FromPlace</code> 和 <code>ToPlace</code> 的默认占比为 <strong>8:1:1</strong>。当然这个东西其实也可以通过一个 <code>-XX:+UsePSAdaptiveSurvivorSizePolicy</code> 参数来根据生成对象的速率动态调整</p> <p>堆内存中存放的是对象，垃圾收集就是收集这些对象然后交给GC算法进行回收。非堆内存其实我们已经说过了，就是方法区。在1.8中已经移除永久代，替代品是一个元空间(MetaSpace)，最大区别是 <code>metaSpace</code> 是不存在于JVM中的，它使用的是本地内存。并有两个参数</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>MetaspaceSize：初始化元空间大小，控制发生GC
MaxMetaspaceSize：限制元空间大小上限，防止占用过多物理内存。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>移除的原因可以大致了解一下：融合 <code>HotSpot JVM</code> 和 <code>JRockit VM</code> 而做出的改变，因为 <code>JRockit</code> 是没有永久代的，不过这也间接性地解决了永久代的OOM问题。</p> <h2 id="未完待续"><a href="#未完待续" class="header-anchor">#</a> 未完待续</h2></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><div class="edit-link"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon edit-icon"><path d="M117.953 696.992 64.306 959.696l265.931-49.336 450.204-452.505-212.284-213.376-450.204 452.513zm496.384-296.326L219.039 797.993l-46.108-46.34L568.233 354.33l46.104 46.335zm345.357-122.99-114.45 115.04-212.288-213.377 114.45-115.035 212.288 213.371zm0 0" fill="currentColor"></path></svg> <a href="https://github.com/lllllan-fv/blog/edit/main/1-java/2-jvm/3-know-the-jvm/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a></div> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">2022年2月3日 20:21</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: 342310798@qq.com" class="contributor">
          lllllan
        </span> <!----></span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/1-java/2-jvm/2-garbage-collection/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 0 1-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 0 1 9.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        Java 垃圾回收
      </a></span> <span class="next"><a href="/1-java/3-container/1-collection-basic/">
        Java 集合框架基础知识
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 0 1-18.616.092 15.368 15.368 0 0 1-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 0 1 5.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 0 1 5.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <!----> <!----> <div class="content__page-bottom"></div></main> <footer class="footer-wrapper"><!----> <div class="footer"><a href="https://beian.miit.gov.cn/" target="_blank">粤ICP备2021095794号</a></div> <div class="copyright">Copyright © 2022 lllllan</div></footer></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button class="pswp__button pswp__button--close"></button> <button class="pswp__button pswp__button--share"></button> <button class="pswp__button pswp__button--fs"></button> <button class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button class="pswp__button pswp__button--arrow--left"></button> <button class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/assets/js/app.5b6a1d0a.js" defer></script><script src="/assets/js/vendors~layout-Layout.b7034363.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.e3241214.js" defer></script><script src="/assets/js/page-认识JVM.83d08df2.js" defer></script>
  </body>
</html>
