<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第一章、浏览器生成消息 | lllllan</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script src="https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <link rel="alternate" type="application/atom+xml" href="https://vue-blog.lllllan.cn/atom.xml" title="lllllan Atom Feed">
    <link rel="alternate" type="application/json" href="https://vue-blog.lllllan.cn/feed.json" title="lllllan JSON Feed">
    <link rel="alternate" type="application/rss+xml" href="https://vue-blog.lllllan.cn/rss.xml" title="lllllan RSS Feed">
    <link rel="icon" href="/logo.png">
    <link rel="icon" href="/logo.png" type="image/png" sizes="512x512">
    <link rel="icon" href="/logo.png" type="image/png" sizes="192x192">
    <link rel="icon" href="/logo.png" type="image/png" sizes="512x512">
    <link rel="icon" href="/logo.png" type="image/png" sizes="192x192">
    <link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials">
    <link rel="apple-touch-icon" href="/logo.png">
    <meta name="description" content="">
    <meta property="og:url" content="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/">
    <meta property="og:site_name" content="lllllan">
    <meta property="og:title" content="第一章、浏览器生成消息">
    <meta property="og:description" content="本文作为 《网络是怎样连接的》 的笔记，绝大部分内容均抄自该书。 一、生成 HTTP 请求消息 1.1 网址（URL, Uniform Resource Locator） 1.2 解析 URL 1.3 文件名省略当 URL 以 / 结尾时，服务器会默认访问该路径下的 index.html 或 default.html 文件; 当 URL 连 / 和文件类">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh">
    <meta property="og:locale:alternate" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="lllllan">
    <meta property="article:author" content="lllllan">
    <meta property="article:tag" content="计算机网络">
    <meta name="theme-color" content="#46bd87">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/logo.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <link rel="preload" href="/assets/css/0.styles.fe5e2315.css" as="style"><link rel="preload" href="/assets/js/app.158e873d.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Layout.c0b53bd6.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.e3241214.js" as="script"><link rel="preload" href="/assets/js/page-第一章、浏览器生成消息.71111cc2.js" as="script"><link rel="prefetch" href="/assets/js/33.39244b62.js"><link rel="prefetch" href="/assets/js/34.474c482b.js"><link rel="prefetch" href="/assets/js/35.c11cc2cc.js"><link rel="prefetch" href="/assets/js/36.9d2d125b.js"><link rel="prefetch" href="/assets/js/37.ab4f03a1.js"><link rel="prefetch" href="/assets/js/38.01bc0b6a.js"><link rel="prefetch" href="/assets/js/layout-Blog.5c949d9a.js"><link rel="prefetch" href="/assets/js/layout-Layout.28148f81.js"><link rel="prefetch" href="/assets/js/layout-NotFound.2bc3b0ae.js"><link rel="prefetch" href="/assets/js/layout-Slide.7cc3b8a6.js"><link rel="prefetch" href="/assets/js/page-ArrayList源码解读.fa1114ee.js"><link rel="prefetch" href="/assets/js/page-JavaGuide-Java基础知识.57a7322f.js"><link rel="prefetch" href="/assets/js/page-Java垃圾回收.05a28a58.js"><link rel="prefetch" href="/assets/js/page-Java基础面试题.db832299.js"><link rel="prefetch" href="/assets/js/page-Java笔记.9a597748.js"><link rel="prefetch" href="/assets/js/page-Java集合框架基础知识.8a375241.js"><link rel="prefetch" href="/assets/js/page-MySQL笔记.deff70f4.js"><link rel="prefetch" href="/assets/js/page-R2Coding-Java基础知识.61f0c4e2.js"><link rel="prefetch" href="/assets/js/page-java内存区域详解.1d2685fb.js"><link rel="prefetch" href="/assets/js/page-java是值传递.e0257912.js"><link rel="prefetch" href="/assets/js/page-代理详解.4d7d701a.js"><link rel="prefetch" href="/assets/js/page-刷题笔记.a1a5e85c.js"><link rel="prefetch" href="/assets/js/page-反射机制.bfb7f171.js"><link rel="prefetch" href="/assets/js/page-操作系统-常见面试题.ab811256.js"><link rel="prefetch" href="/assets/js/page-数组练习.f01039eb.js"><link rel="prefetch" href="/assets/js/page-第三章、从网线到网络设备.57c9ce63.js"><link rel="prefetch" href="/assets/js/page-第二章、用电信号传输TCPIP数据.7fdb4f95.js"><link rel="prefetch" href="/assets/js/page-计算机基础.e8952b8c.js"><link rel="prefetch" href="/assets/js/page-计算机网络-常见面试题.796d913a.js"><link rel="prefetch" href="/assets/js/page-项目主页.2b9c5161.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.b89f523f.js"><link rel="prefetch" href="/assets/js/vendors~mermaid.b0c9b269.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.6c306f93.js"><link rel="prefetch" href="/assets/js/vendors~reveal.7d8e50da.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fe5e2315.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="lllllan" class="logo"> <!----> <span class="site-name can-hide">lllllan</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link router-link-active"><i class="iconfont icon-home"></i>
  Blog Home
</a></div></nav> <!----> <a rel="noopener noreferrer" href="https://github.com/lllllan-fv/blog" target="_blank" class="repo-link can-hide">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="/" class="nav-link router-link-active"><i class="iconfont icon-home"></i>
  Blog Home
</a></div> <a rel="noopener noreferrer" href="https://github.com/lllllan-fv/blog" target="_blank" class="repo-link">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><a href="/3-cs-basic/" aria-current="page" class="sidebar-link"><i class="iconfont icon-info"></i>计算机基础</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable open"><!----> <span class="title">计算机网络</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/3-cs-basic/1-network/2-interview-questions/" class="sidebar-link"><i class="iconfont icon-page"></i>计算机网络-常见面试题</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable open"><!----> <span class="title">网络是怎样连接的</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/" aria-current="page" class="active sidebar-link"><i class="iconfont icon-page"></i>第一章、浏览器生成消息</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#一、生成-http-请求消息" class="sidebar-link">一、生成 HTTP 请求消息</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_1-1-网址-url-uniform-resource-locator" class="sidebar-link heading3">1.1 网址（URL, Uniform Resource Locator）</a></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_1-2-解析-url" class="sidebar-link heading3">1.2 解析 URL</a></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_1-3-文件名省略" class="sidebar-link heading3">1.3 文件名省略</a></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_1-4-http-基本思路" class="sidebar-link heading3">1.4 HTTP 基本思路</a></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_1-5-生成-http-请求信息" class="sidebar-link heading3">1.5 生成 HTTP 请求信息</a></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_1-6-服务器响应" class="sidebar-link heading3">1.6 服务器响应</a></li></ul></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#二、向-dns-服务器查询-web-服务器的-ip-地址" class="sidebar-link">二、向 DNS 服务器查询 Web 服务器的 IP 地址</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_2-1-ip-地址的基本知识" class="sidebar-link heading3">2.1 IP 地址的基本知识</a></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_2-2-域名和ip地址并用的理由" class="sidebar-link heading3">2.2 域名和IP地址并用的理由</a></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_2-3-socket-库提供查询-ip-地址的功能" class="sidebar-link heading3">2.3 Socket 库提供查询 IP 地址的功能</a></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_2-4-通过解析器向dns服务器发出查询" class="sidebar-link heading3">2.4 通过解析器向DNS服务器发出查询</a></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_2-5-解析器的内部原理" class="sidebar-link heading3">2.5 解析器的内部原理</a></li></ul></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#三、dns-服务器" class="sidebar-link">三、DNS 服务器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_3-1-dns-服务器的基本工作" class="sidebar-link heading3">3.1 DNS 服务器的基本工作</a></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_3-2-域名的层次结构" class="sidebar-link heading3">3.2 域名的层次结构</a></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_3-3-寻找相应的-dns-服务器并获取-ip-地址" class="sidebar-link heading3">3.3 寻找相应的 DNS 服务器并获取 IP 地址</a></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_3-4-通过缓存加快-dns-服务器的响应" class="sidebar-link heading3">3.4 通过缓存加快 DNS 服务器的响应</a></li></ul></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#四、委托协议栈发送消息" class="sidebar-link">四、委托协议栈发送消息</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_4-1-数据收发操作概览" class="sidebar-link heading3">4.1 数据收发操作概览</a></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_4-2-创建套接字阶段" class="sidebar-link heading3">4.2 创建套接字阶段</a></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_4-3-连接阶段" class="sidebar-link heading3">4.3 连接阶段</a></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_4-4-通信阶段" class="sidebar-link heading3">4.4 通信阶段</a></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_4-5-断开阶段" class="sidebar-link heading3">4.5 断开阶段</a></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_4-6-各阶段功能和调用组件" class="sidebar-link heading3">4.6 各阶段功能和调用组件</a></li></ul></li><li class="sidebar-sub-header"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#五、本章回顾" class="sidebar-link">五、本章回顾</a></li></ul></li><li><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/2-transmission-of-electrical-signal/" class="sidebar-link"><i class="iconfont icon-page"></i>第二章、用电信号传输 TCP/IP 数据</a></li><li><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/3-network-cables-to-network-devices/" class="sidebar-link"><i class="iconfont icon-page"></i>第三章、从网线到网络设备</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">操作系统</span> <span class="arrow right"></span></p> <!----></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb"><ol vocab="https://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a href="/3-cs-basic/" property="item" typeof="WebPage" class="router-link-active"><i class="iconfont icon-info"></i> <span property="name">计算机基础</span></a> <meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem" class="is-active"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/" aria-current="page" property="item" typeof="WebPage" class="router-link-exact-active router-link-active"><i class="iconfont icon-page"></i> <span property="name">第一章、浏览器生成消息</span></a> <meta property="position" content="2"></li></ol></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><i class="iconfont icon-page"></i> <span property="headline">第一章、浏览器生成消息</span></h1> <div class="page-info"><!----> <span aria-label="Author🖊" data-balloon-pos="down"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon author-icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z" fill="currentColor"></path></svg> <span property="author">lllllan</span></span><!----><span aria-label="Writing Date📅" data-balloon-pos="down" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2022-1-21</span></span><span role="navigation" aria-label="Category🌈" data-balloon-pos="down" class="category-info enable"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon category-icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zm-.854 446.486H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zm446.371-446.486h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zm136.293 813.51H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z" fill="currentColor"></path></svg> <span property="articleSection">计算机基础</span></span><span aria-label="Tags🏷" data-balloon-pos="down"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon tag-icon"><path d="M939.902 458.563 910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 0 0 0 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z" fill="currentColor"></path></svg> <ul class="tags-wrapper"><li class="tag clickable tag0"><span role="navigation">计算机网络</span></li><li class="tag clickable tag1"><span role="navigation">网络是怎样连接的</span></li></ul> <meta property="keywords" content="计算机网络,网络是怎样连接的"></span><span aria-label="Reading Time⌛" data-balloon-pos="down" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon timer-icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z" fill="currentColor"></path></svg> <span>About 7 min</span> <meta property="timeRequired" content="PT7M"></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#一、生成-http-请求消息" class="anchor-link heading2"><div>一、生成 HTTP 请求消息</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_1-1-网址-url-uniform-resource-locator" class="anchor-link heading3"><div>1.1 网址（URL, Uniform Resource Locator）</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_1-2-解析-url" class="anchor-link heading3"><div>1.2 解析 URL</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_1-3-文件名省略" class="anchor-link heading3"><div>1.3 文件名省略</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_1-4-http-基本思路" class="anchor-link heading3"><div>1.4 HTTP 基本思路</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_1-5-生成-http-请求信息" class="anchor-link heading3"><div>1.5 生成 HTTP 请求信息</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_1-6-服务器响应" class="anchor-link heading3"><div>1.6 服务器响应</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#二、向-dns-服务器查询-web-服务器的-ip-地址" class="anchor-link heading2"><div>二、向 DNS 服务器查询 Web 服务器的 IP 地址</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_2-1-ip-地址的基本知识" class="anchor-link heading3"><div>2.1 IP 地址的基本知识</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_2-2-域名和ip地址并用的理由" class="anchor-link heading3"><div>2.2 域名和IP地址并用的理由</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_2-3-socket-库提供查询-ip-地址的功能" class="anchor-link heading3"><div>2.3 Socket 库提供查询 IP 地址的功能</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_2-4-通过解析器向dns服务器发出查询" class="anchor-link heading3"><div>2.4 通过解析器向DNS服务器发出查询</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_2-5-解析器的内部原理" class="anchor-link heading3"><div>2.5 解析器的内部原理</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#三、dns-服务器" class="anchor-link heading2"><div>三、DNS 服务器</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_3-1-dns-服务器的基本工作" class="anchor-link heading3"><div>3.1 DNS 服务器的基本工作</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_3-2-域名的层次结构" class="anchor-link heading3"><div>3.2 域名的层次结构</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_3-3-寻找相应的-dns-服务器并获取-ip-地址" class="anchor-link heading3"><div>3.3 寻找相应的 DNS 服务器并获取 IP 地址</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_3-4-通过缓存加快-dns-服务器的响应" class="anchor-link heading3"><div>3.4 通过缓存加快 DNS 服务器的响应</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#四、委托协议栈发送消息" class="anchor-link heading2"><div>四、委托协议栈发送消息</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_4-1-数据收发操作概览" class="anchor-link heading3"><div>4.1 数据收发操作概览</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_4-2-创建套接字阶段" class="anchor-link heading3"><div>4.2 创建套接字阶段</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_4-3-连接阶段" class="anchor-link heading3"><div>4.3 连接阶段</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_4-4-通信阶段" class="anchor-link heading3"><div>4.4 通信阶段</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_4-5-断开阶段" class="anchor-link heading3"><div>4.5 断开阶段</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#_4-6-各阶段功能和调用组件" class="anchor-link heading3"><div>4.6 各阶段功能和调用组件</div></a></li><li class="anchor"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/#五、本章回顾" class="anchor-link heading2"><div>五、本章回顾</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><div class="custom-block warning"><p class="custom-block-title">Note</p> <p>本文作为 《网络是怎样连接的》 的笔记，绝大部分内容均抄自该书。</p></div> <h2 id="一、生成-http-请求消息"><a href="#一、生成-http-请求消息" class="header-anchor">#</a> 一、生成 HTTP 请求消息</h2> <h3 id="_1-1-网址-url-uniform-resource-locator"><a href="#_1-1-网址-url-uniform-resource-locator" class="header-anchor">#</a> 1.1 网址（URL, Uniform Resource Locator）</h3> <p><img src="/assets/img/image-20211217214228466.3b434ea2.png" alt="image-20211217214228466"></p> <h3 id="_1-2-解析-url"><a href="#_1-2-解析-url" class="header-anchor">#</a> 1.2 解析 URL</h3> <p><img src="/assets/img/image-20211217214541708.cd92fa3c.png" alt="image-20211217214541708"></p> <p><img src="/assets/img/image-20211217214555087.0e5accaa.png" alt="image-20211217214555087"></p> <h3 id="_1-3-文件名省略"><a href="#_1-3-文件名省略" class="header-anchor">#</a> 1.3 文件名省略</h3> <ul><li>当 URL 以 <code>/</code> 结尾时，服务器会默认访问该路径下的 <code>index.html</code> 或 <code>default.html</code> 文件</li> <li>当 URL 连 <code>/</code> 和文件类型都省略的时候：</li></ul> <p><img src="/assets/img/image-20211217215354653.0a58ddbc.png" alt="image-20211217215354653"></p> <p>（实测：当一个文件没有文件类型的时候，不允许和一个同名文件夹同时存在。而当这个文件有后缀时，应该会访问同名文件夹）</p> <h3 id="_1-4-http-基本思路"><a href="#_1-4-http-基本思路" class="header-anchor">#</a> 1.4 HTTP 基本思路</h3> <ul><li>对什么 + 进行怎样的操作</li></ul> <p><img src="/assets/img/image-20211217215856796.2fd361d5.png" alt="image-20211217215856796"></p> <p><img src="/assets/img/image-20211217215922575.70593d1c.png" alt="image-20211217215922575"></p> <h3 id="_1-5-生成-http-请求信息"><a href="#_1-5-生成-http-请求信息" class="header-anchor">#</a> 1.5 生成 HTTP 请求信息</h3> <blockquote><p><strong>一条请求消息中只能写一个URI</strong>。如果需要获取多个文件，必须对每个文件单独发送一条请求</p></blockquote> <p><img src="/assets/img/image-20211217223257489.542fb77f.png" alt="image-20211217223257489"></p> <p><img src="/assets/img/image-20211217223351942.c1ab3311.png" alt="image-20211217223351942"></p> <p>更多字段信息见文档 44 页。</p> <h3 id="_1-6-服务器响应"><a href="#_1-6-服务器响应" class="header-anchor">#</a> 1.6 服务器响应</h3> <p><img src="/assets/img/image-20211217223257489.542fb77f.png" alt="image-20211217223257489"></p> <blockquote><p>状态码时一个数字，主要用来向程序告知执行的结果</p> <p>响应短语是一段文字，用来向人们告知执行的结果</p></blockquote> <p><img src="/assets/img/image-20211217224050584.b2774fbc.png" alt="image-20211217224050584"></p> <p><img src="/assets/img/image-20211217224916808.c71b6a44.png" alt="image-20211217224916808"></p> <h2 id="二、向-dns-服务器查询-web-服务器的-ip-地址"><a href="#二、向-dns-服务器查询-web-服务器的-ip-地址" class="header-anchor">#</a> 二、向 DNS 服务器查询 Web 服务器的 IP 地址</h2> <h3 id="_2-1-ip-地址的基本知识"><a href="#_2-1-ip-地址的基本知识" class="header-anchor">#</a> 2.1 IP 地址的基本知识</h3> <p><img src="/assets/img/image-20211219221243726.dd326114.png" alt="image-20211219221243726"></p> <p><img src="/assets/img/image-20211219221343432.db44bc9a.png" alt="image-20211219221343432"></p> <ul><li>IP 地址是 32 比特的数字，被分成了4组</li> <li>子网掩码也是 32 比特的数字
<ul><li><strong>左边全1的部分表示网络号</strong></li> <li><strong>右边全0的部分表示主机号</strong></li></ul></li></ul> <p><img src="/assets/img/image-20211219222137630.c4d07ffd.png" alt="image-20211219222137630"></p> <p><img src="/assets/img/image-20211219222245701.e5ddaedd.png" alt="image-20211219222245701"></p> <h3 id="_2-2-域名和ip地址并用的理由"><a href="#_2-2-域名和ip地址并用的理由" class="header-anchor">#</a> 2.2 域名和IP地址并用的理由</h3> <ul><li>域名比IP地址更容易记忆</li> <li>IP地址的传输比域名更高效（IP地址只是4字节的数字，域名最长可以是255字节的字符）</li></ul> <p>于是让人来使用域名，让路由器来使用IP地址，这个机制就是<strong>DNS</strong>。</p> <h3 id="_2-3-socket-库提供查询-ip-地址的功能"><a href="#_2-3-socket-库提供查询-ip-地址的功能" class="header-anchor">#</a> 2.3 Socket 库提供查询 IP 地址的功能</h3> <blockquote><p><strong>域名解析</strong>：通过DNS查询IP地址的操作。</p></blockquote> <blockquote><p><strong>解析器</strong>：负责执行域名解析的DNS客户端。（解析器实际上是一段程序。）</p></blockquote> <p>​	库是一堆通用程序组件的集合，他们具有诸多好处：</p> <ul><li>节省编程工作量</li> <li>实现程序的标准化</li> <li>等等</li></ul> <p>​	Socket库也是一种库，其中包含的程序组件可以让其他的应用程序调用操作系统的网络功能，而解析器就是这个库中的其中一种程序组件。</p> <h3 id="_2-4-通过解析器向dns服务器发出查询"><a href="#_2-4-通过解析器向dns服务器发出查询" class="header-anchor">#</a> 2.4 通过解析器向DNS服务器发出查询</h3> <ul><li>调用解析器</li> <li>解析器向DNS服务器发送查询消息</li> <li>DNS服务器返回响应消息</li> <li>解析器从响应消息中取出IP地址并写入内存</li></ul> <p><img src="/assets/img/image-20211223215500444.fe4e1524.png" alt="image-20211223215500444"></p> <p>根据域名查询IP地址时，浏览器会使用Socket库中的解析器。</p> <h3 id="_2-5-解析器的内部原理"><a href="#_2-5-解析器的内部原理" class="header-anchor">#</a> 2.5 解析器的内部原理</h3> <blockquote><p><strong>控制流程转移</strong>：由于调用了其他程序，原本运行的程序进入暂停状态，而被调用的程序开始运行。</p></blockquote> <ul><li>从上往下顺序执行应用程序编写的操作内容，当到达需要调用解析器的部分时</li> <li>控制流程转移到解析器，解析器会生成要发送给DNS服务器的查询消息</li> <li>委托操作系统内部的协议栈来发送这个消息（因为解析器本身并不具备使用网络收发数据的功能</li></ul> <p><img src="/assets/img/image-20211224205322811.4f991c91.png" alt="image-20211224205322811"></p> <p>向DNS服务器发送消息时，也需要知道DNS服务器的IP地址。这是这个地址实现设置好了，不需要再查询。</p> <p><img src="/assets/img/image-20211224213701480.e62e0947.png" alt="image-20211224213701480"></p> <h2 id="三、dns-服务器"><a href="#三、dns-服务器" class="header-anchor">#</a> 三、DNS 服务器</h2> <h3 id="_3-1-dns-服务器的基本工作"><a href="#_3-1-dns-服务器的基本工作" class="header-anchor">#</a> 3.1 DNS 服务器的基本工作</h3> <p>DNS 服务器的基本工作就是根据需要查询的域名和记录类型查找相关的记录，并向客户端返回响应消息。</p> <ul><li>域名：服务器、邮件服务器（邮件地址@后面的部分）的名称</li> <li>Class：代表互联网的IN</li> <li>记录类型：表示域名对应何种类型的记录。</li></ul> <p><img src="/assets/img/image-20211224215024279.544d08be.png" alt="image-20211224215024279"></p> <h3 id="_3-2-域名的层次结构"><a href="#_3-2-域名的层次结构" class="header-anchor">#</a> 3.2 域名的层次结构</h3> <p>由于存在着不计其数的服务器，不可能将所有服务器的信息保存在一台DNS服务器中，只能是将这些信息分布保存在多台DNS服务器中。</p> <ul><li>按域名以分层次的结构来保存</li> <li>域名中越靠右的位置表示气层级越高</li> <li>每个域都是作为一个整体存放在DNS服务器中的</li></ul> <h3 id="_3-3-寻找相应的-dns-服务器并获取-ip-地址"><a href="#_3-3-寻找相应的-dns-服务器并获取-ip-地址" class="header-anchor">#</a> 3.3 寻找相应的 DNS 服务器并获取 IP 地址</h3> <ul><li>负责管理下级域的 DNS 服务器的 IP 地址注册到他们的上级 DNS 服务器中</li> <li>com和jp 的上面存在一个 根域</li> <li>所有 DNS 服务器中都保存有根域的 DNS 服务器信息</li></ul> <p><img src="/assets/img/image-20211224220739596.7ccce407.png" alt="image-20211224220739596"></p> <p><img src="/assets/img/image-20211224220802400.a2034a10.png" alt="image-20211224220802400"></p> <h3 id="_3-4-通过缓存加快-dns-服务器的响应"><a href="#_3-4-通过缓存加快-dns-服务器的响应" class="header-anchor">#</a> 3.4 通过缓存加快 DNS 服务器的响应</h3> <p>DNS 服务器有一个缓存功能，可以记住之前查询过的域名</p> <ul><li>如果要查询的域名和相关信息已经在缓存中，那么就可以直接返回响应。</li> <li>当查询的域名不存在时，“不存在”这一响应结果也会被缓存</li> <li>缓存信息设置有一个有效期，当信息超过有效期后，数据会从缓存中删除</li> <li>DNS服务器返回响应时，会告知这一响应结果是来自缓存还是来自负责管理该域名的DNS服务器</li></ul> <h2 id="四、委托协议栈发送消息"><a href="#四、委托协议栈发送消息" class="header-anchor">#</a> 四、委托协议栈发送消息</h2> <h3 id="_4-1-数据收发操作概览"><a href="#_4-1-数据收发操作概览" class="header-anchor">#</a> 4.1 数据收发操作概览</h3> <blockquote><p>委托操作系统内部的协议栈发送HTTP消息，适用于<strong>任何</strong>网络应用程序。</p></blockquote> <p><img src="/assets/img/image-20211225120920801.9b50f6df.png" alt="image-20211225120920801"></p> <ul><li>创建套接字（出入口） —— <strong>创建套接字阶段</strong></li> <li>【客户端】向【服务器端】套接字连接管道 —— <strong>连接阶段</strong></li> <li>收发数据 —— <strong>通信阶段</strong></li> <li>断开管道并删除套接字 —— <strong>断开阶段</strong></li></ul> <blockquote><p>这个管道中，<em>数据流动是<strong>双向</strong>的</em></p></blockquote> <h3 id="_4-2-创建套接字阶段"><a href="#_4-2-创建套接字阶段" class="header-anchor">#</a> 4.2 创建套接字阶段</h3> <blockquote><p>创建套接字需要调用 Socket 库中的 <strong>socket 程序组件</strong></p></blockquote> <p>客户端创建套接字：</p> <ul><li>调用 Socket 库中的 socket 程序组件</li> <li>控制流程转移到 socket 内部并执行创建套接字操作</li> <li>控制流程交回应用程序</li></ul> <p><img src="/assets/img/image-20211225122553775.ad9a2dd3.png" alt="image-20211225122553775"></p> <blockquote><p>套接字创建完成以后，协议栈返回一个<strong>描述符</strong>，用来标识该套接字</p></blockquote> <h3 id="_4-3-连接阶段"><a href="#_4-3-连接阶段" class="header-anchor">#</a> 4.3 连接阶段</h3> <blockquote><p>连接阶段需要调用 Socket 库中的 <strong>connect 程序组件</strong></p></blockquote> <p>调用 connect 时需要指定三个参数：描述符、服务器IP地址、端口号</p> <p><img src="/assets/img/image-20211225130205613.d037d14f.png" alt="image-20211225130205613"></p> <h3 id="_4-4-通信阶段"><a href="#_4-4-通信阶段" class="header-anchor">#</a> 4.4 通信阶段</h3> <blockquote><p>通信阶段需要调用 Socket 库中的 <strong>write 程序组件</strong>、<strong>read 程序组件</strong></p></blockquote> <p>发送数据：</p> <ul><li>生成 HTTP 请求消息</li> <li>指定描述符和要发送的数据，由协议栈将数据发送到服务器</li></ul> <p>接收数据：</p> <ul><li>指定存放响应消息的内存地址（称为接收缓冲区）</li> <li>read 将接收到的响应消息存放到接收缓冲区中</li></ul> <h3 id="_4-5-断开阶段"><a href="#_4-5-断开阶段" class="header-anchor">#</a> 4.5 断开阶段</h3> <blockquote><p>断开阶段需要调用 Socket 库中的 <strong>close 程序组件</strong></p></blockquote> <ul><li>Web服务器在发送完响应消息之后，会首先调用 close 来断开连接</li> <li>客户端中 read 执行接收数据时，会告知浏览器通信阶段已结束</li> <li>浏览器调用 close 进入断开阶段</li></ul> <h3 id="_4-6-各阶段功能和调用组件"><a href="#_4-6-各阶段功能和调用组件" class="header-anchor">#</a> 4.6 各阶段功能和调用组件</h3> <table><thead><tr><th style="text-align:center;">阶段</th> <th style="text-align:center;">组件</th></tr></thead> <tbody><tr><td style="text-align:center;">创建套接字</td> <td style="text-align:center;">socket</td></tr> <tr><td style="text-align:center;">连接</td> <td style="text-align:center;">connect</td></tr> <tr><td style="text-align:center;">通信</td> <td style="text-align:center;">发送：write<br>接收：read</td></tr> <tr><td style="text-align:center;">断开</td> <td style="text-align:center;">close</td></tr></tbody></table> <h2 id="五、本章回顾"><a href="#五、本章回顾" class="header-anchor">#</a> 五、本章回顾</h2> <ul><li>网址前的 <code>http</code> 代表什么意思</li></ul> <blockquote><p>HTTP，即超文本传输协议，是 HyperText Transfer Protocol的缩写。</p></blockquote> <ul><li>用来识别连接在互联网上的计算机和服务器的地址叫什么</li></ul> <blockquote><p>IP 地址</p></blockquote> <ul><li>根据Web服务器的域名来查询IP地址时所用的服务器叫什么</li></ul> <blockquote><p>DNS 服务器</p></blockquote> <ul><li>向DNS服务器发送请求消息的程序叫什么</li></ul> <blockquote><p>协议栈</p></blockquote></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><div class="edit-link"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon edit-icon"><path d="M117.953 696.992 64.306 959.696l265.931-49.336 450.204-452.505-212.284-213.376-450.204 452.513zm496.384-296.326L219.039 797.993l-46.108-46.34L568.233 354.33l46.104 46.335zm345.357-122.99-114.45 115.04-212.288-213.377 114.45-115.035 212.288 213.371zm0 0" fill="currentColor"></path></svg> <a href="https://github.com/lllllan-fv/blog/edit/main/3-cs-basic/1-network/1-how-is-the-network-connected/1-browser-generated-messages/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a></div> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">2022年1月21日 10:30</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: 342310798@qq.com" class="contributor">
          lllllan
        </span> <!----></span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/3-cs-basic/1-network/2-interview-questions/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 0 1-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 0 1 9.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        计算机网络-常见面试题
      </a></span> <span class="next"><a href="/3-cs-basic/1-network/1-how-is-the-network-connected/2-transmission-of-electrical-signal/">
        第二章、用电信号传输 TCP/IP 数据
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 0 1-18.616.092 15.368 15.368 0 0 1-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 0 1 5.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 0 1 5.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <!----> <!----> <div class="content__page-bottom"></div></main> <footer class="footer-wrapper"><!----> <div class="footer"><a href="https://beian.miit.gov.cn/" target="_blank">粤ICP备2021095794号</a></div> <div class="copyright">Copyright © 2022 lllllan</div></footer></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button class="pswp__button pswp__button--close"></button> <button class="pswp__button pswp__button--share"></button> <button class="pswp__button pswp__button--fs"></button> <button class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button class="pswp__button pswp__button--arrow--left"></button> <button class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/assets/js/app.158e873d.js" defer></script><script src="/assets/js/vendors~layout-Layout.c0b53bd6.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.e3241214.js" defer></script><script src="/assets/js/page-第一章、浏览器生成消息.71111cc2.js" defer></script>
  </body>
</html>
