<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>文件管理 | lllllan</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script src="https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <link rel="alternate" type="application/atom+xml" href="https://notes.lllllan.cn/atom.xml" title="lllllan Atom Feed">
    <link rel="alternate" type="application/json" href="https://notes.lllllan.cn/feed.json" title="lllllan JSON Feed">
    <link rel="alternate" type="application/rss+xml" href="https://notes.lllllan.cn/rss.xml" title="lllllan RSS Feed">
    <link rel="icon" href="/logo.png">
    <link rel="icon" href="/logo.png" type="image/png" sizes="512x512">
    <link rel="icon" href="/logo.png" type="image/png" sizes="192x192">
    <link rel="icon" href="/logo.png" type="image/png" sizes="512x512">
    <link rel="icon" href="/logo.png" type="image/png" sizes="192x192">
    <link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials">
    <link rel="apple-touch-icon" href="/logo.png">
    <meta name="description" content="">
    <meta property="og:url" content="/cs-basic/os/wangdao/4/1/">
    <meta property="og:site_name" content="lllllan">
    <meta property="og:title" content="文件管理">
    <meta property="og:description" content="转载声明《王道考研-操作系统》; 一、文件的基本概念 文件（File）是以硬盘为载体的存储在计算机上的信息集合，文件可以是文本文档、图片、程序等。 在系统运行时，计算机以进程为基本单位进行资源的调度和分配；而在用户进行的输入、输出中，则以文件为基本单位。大多数应用程序的输入都是通过文件来实现的，其输出也都保存在文件中，以便信息的长期存储及将来的访问。 从用">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh">
    <meta property="og:locale:alternate" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="lllllan">
    <meta property="article:author" content="lllllan">
    <meta property="article:tag" content="操作系统">
    <meta name="theme-color" content="#46bd87">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/logo.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <link rel="preload" href="/assets/css/0.styles.8357e793.css" as="style"><link rel="preload" href="/assets/js/app.3cfaf037.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Layout.57f7cf63.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.b5e5e957.js" as="script"><link rel="preload" href="/assets/js/page-文件管理.17c3170b.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout.3d94df6c.js" as="script"><link rel="prefetch" href="/assets/js/146.8ecf0fcc.js"><link rel="prefetch" href="/assets/js/147.7277abfe.js"><link rel="prefetch" href="/assets/js/148.72b87788.js"><link rel="prefetch" href="/assets/js/149.5b1c78b5.js"><link rel="prefetch" href="/assets/js/150.9f3c442c.js"><link rel="prefetch" href="/assets/js/151.397eb6c6.js"><link rel="prefetch" href="/assets/js/152.946d1bed.js"><link rel="prefetch" href="/assets/js/layout-Blog.f99d2bb8.js"><link rel="prefetch" href="/assets/js/layout-Layout.54f62305.js"><link rel="prefetch" href="/assets/js/layout-NotFound.d261f6b6.js"><link rel="prefetch" href="/assets/js/layout-Slide.ea59fbea.js"><link rel="prefetch" href="/assets/js/page--07c97f1e.9682816c.js"><link rel="prefetch" href="/assets/js/page-ArrayList源码解读.ac617910.js"><link rel="prefetch" href="/assets/js/page-CPU缓存.b1450893.js"><link rel="prefetch" href="/assets/js/page-Class类文件的结构.fff783c4.js"><link rel="prefetch" href="/assets/js/page-ConcurrentHashMap源码解读.7d274ff4.js"><link rel="prefetch" href="/assets/js/page-HTTP传输大文件.d069f78c.js"><link rel="prefetch" href="/assets/js/page-HTTP各版本.0f54efa8.js"><link rel="prefetch" href="/assets/js/page-HTTP和HTTPS.a307440d.js"><link rel="prefetch" href="/assets/js/page-HTTP常见面试题.02cfb7ad.js"><link rel="prefetch" href="/assets/js/page-HashMap源码解读.e4b0b293.js"><link rel="prefetch" href="/assets/js/page-HashTable源码解读.8dfd411b.js"><link rel="prefetch" href="/assets/js/page-HotSpot的算法实现细节.b3692516.js"><link rel="prefetch" href="/assets/js/page-HotSpot虚拟机中的对象.d8064812.js"><link rel="prefetch" href="/assets/js/page-IO多路复用.ea148810.js"><link rel="prefetch" href="/assets/js/page-IO管理概述.db862336.js"><link rel="prefetch" href="/assets/js/page-JVM常见问题.e2418f44.js"><link rel="prefetch" href="/assets/js/page-Java-IO.6369db6e.js"><link rel="prefetch" href="/assets/js/page-Java-反射.67f807aa.js"><link rel="prefetch" href="/assets/js/page-Java-基本概念与常识.ee6063ec.js"><link rel="prefetch" href="/assets/js/page-Java-基础语法.bdad3a89.js"><link rel="prefetch" href="/assets/js/page-Java-异常.9839f810.js"><link rel="prefetch" href="/assets/js/page-Java-数据类型.94028146.js"><link rel="prefetch" href="/assets/js/page-Java-注解.e0de1c52.js"><link rel="prefetch" href="/assets/js/page-Java-面向对象.0cb9a8a8.js"><link rel="prefetch" href="/assets/js/page-Java集合框架基础知识.5041ae0e.js"><link rel="prefetch" href="/assets/js/page-MVCC.d3753661.js"><link rel="prefetch" href="/assets/js/page-MySQL基础架构.9323b9b1.js"><link rel="prefetch" href="/assets/js/page-MySQL日志系统.8c5ad6eb.js"><link rel="prefetch" href="/assets/js/page-MySQL面试题合集.79f4bdf0.js"><link rel="prefetch" href="/assets/js/page-OSI和TCPIP网络分层模型详解.9a83baa3.js"><link rel="prefetch" href="/assets/js/page-TCP可靠传输.dbf4f132.js"><link rel="prefetch" href="/assets/js/page-TCP常见面试题.17d88d75.js"><link rel="prefetch" href="/assets/js/page-Vector源码解读.1f7882ef.js"><link rel="prefetch" href="/assets/js/page-keep-alive.660d6377.js"><link rel="prefetch" href="/assets/js/page-next-key锁.1c1605b7.js"><link rel="prefetch" href="/assets/js/page-三次握手.eeca79bd.js"><link rel="prefetch" href="/assets/js/page-不稳定的快速排序.847b1f67.js"><link rel="prefetch" href="/assets/js/page-事务.7fd522ac.js"><link rel="prefetch" href="/assets/js/page-二叉搜索树代码实现.ba59d2ea.js"><link rel="prefetch" href="/assets/js/page-代理模式.33e7d015.js"><link rel="prefetch" href="/assets/js/page-低延迟垃圾收集器.5957b38b.js"><link rel="prefetch" href="/assets/js/page-内存分配与回收策略.fa1beb18.js"><link rel="prefetch" href="/assets/js/page-内存管理.21c2b061.js"><link rel="prefetch" href="/assets/js/page-内存管理概念.fd14d2bf.js"><link rel="prefetch" href="/assets/js/page-动态类型语言支持.cc325dab.js"><link rel="prefetch" href="/assets/js/page-同步与互斥.e0216efd.js"><link rel="prefetch" href="/assets/js/page-四次挥手.5f9bf01e.js"><link rel="prefetch" href="/assets/js/page-垃圾收集算法.4ffb0014.js"><link rel="prefetch" href="/assets/js/page-处理机调度.206354d1.js"><link rel="prefetch" href="/assets/js/page-字节后端实习.5f806ee8.js"><link rel="prefetch" href="/assets/js/page-字节后端日常实习.682f997d.js"><link rel="prefetch" href="/assets/js/page-字节客户端春招.5da03438.js"><link rel="prefetch" href="/assets/js/page-字节抖音直播支付日常实习.70b08b50.js"><link rel="prefetch" href="/assets/js/page-字节番茄后端实习.d08dd9b5.js"><link rel="prefetch" href="/assets/js/page-字节码指令简介.28f93755.js"><link rel="prefetch" href="/assets/js/page-字节码解释执行引擎.2e2e8d2c.js"><link rel="prefetch" href="/assets/js/page-字节飞书后端春招.a8861f6e.js"><link rel="prefetch" href="/assets/js/page-对象已死.81214d58.js"><link rel="prefetch" href="/assets/js/page-常见面试题.d9eb79ea.js"><link rel="prefetch" href="/assets/js/page-平衡搜索树.01472381.js"><link rel="prefetch" href="/assets/js/page-排序算法.0fc7cd5e.js"><link rel="prefetch" href="/assets/js/page-操作系统.bcbaa656.js"><link rel="prefetch" href="/assets/js/page-操作系统发展历程.1643b450.js"><link rel="prefetch" href="/assets/js/page-操作系统的基本概念.0d693799.js"><link rel="prefetch" href="/assets/js/page-操作系统结构.e665da9b.js"><link rel="prefetch" href="/assets/js/page-操作系统运行环境.fd564f64.js"><link rel="prefetch" href="/assets/js/page-数据结构.7bcfc44f.js"><link rel="prefetch" href="/assets/js/page-数据结构和算法.fd8d96d6.js"><link rel="prefetch" href="/assets/js/page-文件系统.2119f002.js"><link rel="prefetch" href="/assets/js/page-方法调用.7c89d00f.js"><link rel="prefetch" href="/assets/js/page-无关性的基石.f9392463.js"><link rel="prefetch" href="/assets/js/page-框架技术概览.040752f8.js"><link rel="prefetch" href="/assets/js/page-概述.83749280.js"><link rel="prefetch" href="/assets/js/page-死锁.02c94d20.js"><link rel="prefetch" href="/assets/js/page-目录.18627bc0.js"><link rel="prefetch" href="/assets/js/page-磁盘和固态硬盘.ae5b6830.js"><link rel="prefetch" href="/assets/js/page-第一章、Web及网络基础.bd9f2488.js"><link rel="prefetch" href="/assets/js/page-第一章、浏览器生成消息.8487d4c1.js"><link rel="prefetch" href="/assets/js/page-第一章、进程与线程的基本概念.61ff5e39.js"><link rel="prefetch" href="/assets/js/page-第七章、HTTPS.705f7cf3.js"><link rel="prefetch" href="/assets/js/page-第七章、重排序与happens-before.f397aa11.js"><link rel="prefetch" href="/assets/js/page-第三章、HTTP报文.cd78f9a3.js"><link rel="prefetch" href="/assets/js/page-第三章、从网线到网络设备.ee12068c.js"><link rel="prefetch" href="/assets/js/page-第三章、线程组和线程优先级.eb5780ec.js"><link rel="prefetch" href="/assets/js/page-第九章、synchronized与锁.545db104.js"><link rel="prefetch" href="/assets/js/page-第九章、追加协议.4c3565e9.js"><link rel="prefetch" href="/assets/js/page-第二十章、计划任务.db158ba5.js"><link rel="prefetch" href="/assets/js/page-第二章、Java多线程入门类和接口.d67fade0.js"><link rel="prefetch" href="/assets/js/page-第二章、用电信号传输TCPIP数据.6ca26d3f.js"><link rel="prefetch" href="/assets/js/page-第二章、简单的HTTP协议.482c12da.js"><link rel="prefetch" href="/assets/js/page-第五章、Java线程间的通信.87783899.js"><link rel="prefetch" href="/assets/js/page-第五章、Web服务器.a3458c74.js"><link rel="prefetch" href="/assets/js/page-第八章、volatile.79caedc9.js"><link rel="prefetch" href="/assets/js/page-第八章、确认用户身份.d1254733.js"><link rel="prefetch" href="/assets/js/page-第六章、Http首部.4e518637.js"><link rel="prefetch" href="/assets/js/page-第六章、Java内存模型基础知识.c6da8868.js"><link rel="prefetch" href="/assets/js/page-第十一章、AQS（不懂）.511d4d29.js"><link rel="prefetch" href="/assets/js/page-第十一章、Web的攻击技术.fbf36423.js"><link rel="prefetch" href="/assets/js/page-第十七章、通信工具类.0fb368b3.js"><link rel="prefetch" href="/assets/js/page-第十三章、阻塞队列.208bddeb.js"><link rel="prefetch" href="/assets/js/page-第十九章、Stream并行计算原理（不懂）.e5a43d6c.js"><link rel="prefetch" href="/assets/js/page-第十二章、线程池原理.3278632a.js"><link rel="prefetch" href="/assets/js/page-第十五章、并发容器集合.41631d72.js"><link rel="prefetch" href="/assets/js/page-第十八章、ForkJoin框架.1b5c300c.js"><link rel="prefetch" href="/assets/js/page-第十六章、CopyOnWrite容器.704da6e8.js"><link rel="prefetch" href="/assets/js/page-第十四章、锁接口和类.193cf6db.js"><link rel="prefetch" href="/assets/js/page-第十章、CAS与原子操作.c70c1f56.js"><link rel="prefetch" href="/assets/js/page-第十章、构建Web内容的技术.0700ec3d.js"><link rel="prefetch" href="/assets/js/page-第四章、Http状态码.bf7c2706.js"><link rel="prefetch" href="/assets/js/page-第四章、Java线程的状态及主要转化方法.fac7b947.js"><link rel="prefetch" href="/assets/js/page-算法.87f91ecc.js"><link rel="prefetch" href="/assets/js/page-类加载器.0e8812ee.js"><link rel="prefetch" href="/assets/js/page-类加载的时机.8807ba03.js"><link rel="prefetch" href="/assets/js/page-类加载的过程.775f3dea.js"><link rel="prefetch" href="/assets/js/page-索引.efcf3576.js"><link rel="prefetch" href="/assets/js/page-经典垃圾收集器.58be1e98.js"><link rel="prefetch" href="/assets/js/page-虚拟内存管理.544e96eb.js"><link rel="prefetch" href="/assets/js/page-虚拟机.6023f0a9.js"><link rel="prefetch" href="/assets/js/page-计算机基础.61f3ffaa.js"><link rel="prefetch" href="/assets/js/page-计算机网络-常见面试题.9082da64.js"><link rel="prefetch" href="/assets/js/page-设备独立性软件.7a800410.js"><link rel="prefetch" href="/assets/js/page-设计模式.e243f235.js"><link rel="prefetch" href="/assets/js/page-路由器和交换机.378394d6.js"><link rel="prefetch" href="/assets/js/page-输入url网址到页面显示.43f78fb6.js"><link rel="prefetch" href="/assets/js/page-运行时数据区域.4455e38d.js"><link rel="prefetch" href="/assets/js/page-运行时栈帧结构.e6b9f372.js"><link rel="prefetch" href="/assets/js/page-进程与线程.912285b0.js"><link rel="prefetch" href="/assets/js/page-进程和线程.2f7d4f3c.js"><link rel="prefetch" href="/assets/js/page-进程间通信.1fec56ad.js"><link rel="prefetch" href="/assets/js/page-选择合适的垃圾收集器.d5134ff8.js"><link rel="prefetch" href="/assets/js/page-项目主页.efb34bec.js"><link rel="prefetch" href="/assets/js/page-顺序一致性.ff3e582e.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.8857f3dd.js"><link rel="prefetch" href="/assets/js/vendors~mermaid.20000af9.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.e38cb1a8.js"><link rel="prefetch" href="/assets/js/vendors~reveal.bec24043.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8357e793.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="lllllan" class="logo"> <!----> <span class="site-name can-hide">lllllan</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link router-link-active"><i class="iconfont icon-home"></i>
  Blog Home
</a></div><div class="nav-item"><a href="/java/basic/" class="nav-link"><!---->
  Java
</a></div><div class="nav-item"><a href="/cs-basic/network/" class="nav-link"><!---->
  计算机网络
</a></div><div class="nav-item"><a href="/cs-basic/os/" class="nav-link router-link-active active"><!---->
  操作系统
</a></div><div class="nav-item"><a href="/mysql/" class="nav-link"><!---->
  MySQL
</a></div></nav> <!----> <a rel="noopener noreferrer" href="https://github.com/lllllan-fv/notes" target="_blank" class="repo-link can-hide">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="/" class="nav-link router-link-active"><i class="iconfont icon-home"></i>
  Blog Home
</a></div><div class="nav-item"><a href="/java/basic/" class="nav-link"><!---->
  Java
</a></div><div class="nav-item"><a href="/cs-basic/network/" class="nav-link"><!---->
  计算机网络
</a></div><div class="nav-item"><a href="/cs-basic/os/" class="nav-link router-link-active active"><!---->
  操作系统
</a></div><div class="nav-item"><a href="/mysql/" class="nav-link"><!---->
  MySQL
</a></div> <a rel="noopener noreferrer" href="https://github.com/lllllan-fv/notes" target="_blank" class="repo-link">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><a href="/cs-basic/os/" aria-current="page" class="sidebar-link"><i class="iconfont icon-page"></i>操作系统</a></li><li><a href="/cs-basic/os/processes&amp;threads/" class="sidebar-link"><i class="iconfont icon-page"></i>进程和线程</a></li><li><a href="/cs-basic/os/memory-manage/" class="sidebar-link"><i class="iconfont icon-page"></i>内存管理</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">补充</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable open"><!----> <span class="title">王道-操作系统</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">计算机系统概述</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">进程与线程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">内存管理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable open"><!----> <span class="title">文件管理</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cs-basic/os/wangdao/4/1/" aria-current="page" class="active sidebar-link"><i class="iconfont icon-page"></i>文件管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/4/1/#一、文件的基本概念" class="sidebar-link">一、文件的基本概念</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/4/1/#二、文件控制块和索引结点" class="sidebar-link">二、文件控制块和索引结点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/4/1/#_2-1-文件的属性" class="sidebar-link heading3">2.1 文件的属性</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/4/1/#_2-2-文件控制块" class="sidebar-link heading3">2.2 文件控制块</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/4/1/#_2-3-索引结点" class="sidebar-link heading3">2.3 索引结点</a></li></ul></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/4/1/#三、文件的操作" class="sidebar-link">三、文件的操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/4/1/#_3-1-文件的基本操作" class="sidebar-link heading3">3.1 文件的基本操作</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/4/1/#_3-2-文件的打开与关闭" class="sidebar-link heading3">3.2 文件的打开与关闭</a></li></ul></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/4/1/#四、文件保护" class="sidebar-link">四、文件保护</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/4/1/#_4-1-访问类型" class="sidebar-link heading3">4.1 访问类型</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/4/1/#_4-2-访问控制" class="sidebar-link heading3">4.2 访问控制</a></li></ul></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/4/1/#五、文件的逻辑结构" class="sidebar-link">五、文件的逻辑结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/4/1/#_5-1-无结构文件-流式文件" class="sidebar-link heading3">5.1 无结构文件(流式文件)</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/4/1/#_5-2-有结构文件-记录式文件" class="sidebar-link heading3">5.2 有结构文件(记录式文件)</a></li></ul></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/4/1/#六、文件的物理结构" class="sidebar-link">六、文件的物理结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/4/1/#_6-1-连续分配" class="sidebar-link heading3">6.1 连续分配</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/4/1/#_6-2-链接分配" class="sidebar-link heading3">6.2 链接分配</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/4/1/#_6-3-索引分配" class="sidebar-link heading3">6.3 索引分配</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/4/1/#_6-4-混合索引分配" class="sidebar-link heading3">6.4 混合索引分配</a></li></ul></li></ul></li><li><a href="/cs-basic/os/wangdao/4/2/" class="sidebar-link"><i class="iconfont icon-page"></i>目录</a></li><li><a href="/cs-basic/os/wangdao/4/3/" class="sidebar-link"><i class="iconfont icon-page"></i>文件系统</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">IO管理</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb"><ol vocab="https://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a href="/cs-basic/" property="item" typeof="WebPage" class="router-link-active"><i class="iconfont icon-info"></i> <span property="name">计算机基础</span></a> <meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a href="/cs-basic/os/" property="item" typeof="WebPage" class="router-link-active"><i class="iconfont icon-page"></i> <span property="name">操作系统</span></a> <meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem" class="is-active"><a href="/cs-basic/os/wangdao/4/1/" aria-current="page" property="item" typeof="WebPage" class="router-link-exact-active router-link-active"><i class="iconfont icon-page"></i> <span property="name">文件管理</span></a> <meta property="position" content="3"></li></ol></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><i class="iconfont icon-page"></i> <span property="headline">文件管理</span></h1> <div class="page-info"><!----> <span aria-label="Author🖊" data-balloon-pos="down" categoryPath="/category/$category/" tagPath="/tag/$tag/"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon author-icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z" fill="currentColor"></path></svg> <span property="author">lllllan</span></span><span aria-label="Page views🔢" data-balloon-pos="down" defaultAuthor="lllllan" categoryPath="/category/$category/" tagPath="/tag/$tag/" class="visitor-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon eye-icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 0 0-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z" fill="currentColor"></path></svg> <span id="/cs-basic/os/wangdao/4/1/" data-flag-title="文件管理" class="leancloud_visitors waline-visitor-count"><span class="leancloud-visitors-count">...</span></span></span><span aria-label="Writing Date📅" data-balloon-pos="down" defaultAuthor="lllllan" categoryPath="/category/$category/" tagPath="/tag/$tag/" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2022-4-2</span></span><span role="navigation" aria-label="Category🌈" data-balloon-pos="down" defaultAuthor="lllllan" tagPath="/tag/$tag/" class="category-info enable"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon category-icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zm-.854 446.486H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zm446.371-446.486h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zm136.293 813.51H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z" fill="currentColor"></path></svg> <span property="articleSection">计算机基础</span></span><span aria-label="Tags🏷" data-balloon-pos="down" defaultAuthor="lllllan" categoryPath="/category/$category/"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon tag-icon"><path d="M939.902 458.563 910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 0 0 0 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z" fill="currentColor"></path></svg> <ul class="tags-wrapper"><li class="tag clickable tag0"><span role="navigation">操作系统</span></li><li class="tag clickable tag1"><span role="navigation">王道-操作系统</span></li></ul> <meta property="keywords" content="操作系统,王道-操作系统"></span><span aria-label="Reading Time⌛" data-balloon-pos="down" defaultAuthor="lllllan" categoryPath="/category/$category/" tagPath="/tag/$tag/" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon timer-icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z" fill="currentColor"></path></svg> <span>About 29 min</span> <meta property="timeRequired" content="PT29M"></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/cs-basic/os/wangdao/4/1/#一、文件的基本概念" class="anchor-link heading2"><div>一、文件的基本概念</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/4/1/#二、文件控制块和索引结点" class="anchor-link heading2"><div>二、文件控制块和索引结点</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/4/1/#_2-1-文件的属性" class="anchor-link heading3"><div>2.1 文件的属性</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/4/1/#_2-2-文件控制块" class="anchor-link heading3"><div>2.2 文件控制块</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/4/1/#_2-3-索引结点" class="anchor-link heading3"><div>2.3 索引结点</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/4/1/#三、文件的操作" class="anchor-link heading2"><div>三、文件的操作</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/4/1/#_3-1-文件的基本操作" class="anchor-link heading3"><div>3.1 文件的基本操作</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/4/1/#_3-2-文件的打开与关闭" class="anchor-link heading3"><div>3.2 文件的打开与关闭</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/4/1/#四、文件保护" class="anchor-link heading2"><div>四、文件保护</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/4/1/#_4-1-访问类型" class="anchor-link heading3"><div>4.1 访问类型</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/4/1/#_4-2-访问控制" class="anchor-link heading3"><div>4.2 访问控制</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/4/1/#五、文件的逻辑结构" class="anchor-link heading2"><div>五、文件的逻辑结构</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/4/1/#_5-1-无结构文件-流式文件" class="anchor-link heading3"><div>5.1 无结构文件(流式文件)</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/4/1/#_5-2-有结构文件-记录式文件" class="anchor-link heading3"><div>5.2 有结构文件(记录式文件)</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/4/1/#六、文件的物理结构" class="anchor-link heading2"><div>六、文件的物理结构</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/4/1/#_6-1-连续分配" class="anchor-link heading3"><div>6.1 连续分配</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/4/1/#_6-2-链接分配" class="anchor-link heading3"><div>6.2 链接分配</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/4/1/#_6-3-索引分配" class="anchor-link heading3"><div>6.3 索引分配</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/4/1/#_6-4-混合索引分配" class="anchor-link heading3"><div>6.4 混合索引分配</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><div class="custom-block warning"><p class="custom-block-title">转载声明</p> <ul><li>《王道考研-操作系统》</li></ul></div> <h2 id="一、文件的基本概念"><a href="#一、文件的基本概念" class="header-anchor">#</a> 一、文件的基本概念</h2> <p>文件（File）是以硬盘为载体的存储在计算机上的信息集合，文件可以是文本文档、图片、程序等。</p> <p>在系统运行时，计算机以进程为基本单位进行资源的调度和分配；而在用户进行的输入、输出中，则以文件为基本单位。大多数应用程序的输入都是通过文件来实现的，其输出也都保存在文件中，以便信息的长期存储及将来的访问。</p> <p>从用户的角度看，文件系统是操作系统的重要部分之一。用户关心的是如何命名、分类和查找文件，如何保证文件数据的安全性及对文件可以进行哪些操作等。而对于其中的细节，如文件如何存储在辅存上、如何管理文件辅存区域等方面关心甚少。</p> <p>文件系统提供了与二级存储相关的资源的抽象，让用户能在不了解文件的各种属性、文件存储介质的特征及文件在存储介质上的具体位置等情况下，方便快捷地使用文件。用户通过文件系统建立文件，提供应用程序的输入、输出，对资源进行管理。</p> <p>首先了解文件的结构，我们通过自底向上的方式来定义。</p> <div class="custom-block note"><p class="custom-block-title">Note</p> <ol><li>数据项。是文件系统中最低级的数据组织形式，可分为以下两种类型：
<ul><li>基本数据项。用于描述一个对象的某种属性的一个值，是数据中的最小逻辑单位。</li> <li>组合数据项。由多个基本数据项组成。</li></ul></li> <li>记录。是一组相关的数据项的集合，用于描述一个对象在某方面的属性。</li> <li>文件。是指由创建者所定义的、具有文件名的一组相关元素的集合，可分为有结构文件和无结构文件两种。在有结构的文件中，文件由若干个相似的记录组成，如一个班的学生记录；而无结构文件则被视为一个字符流，比如一个二进制文件或字符文件。</li></ol></div> <p>虽然上面给出了结构化的表述，但实际上关于文件并无严格的定义。在操作系统中，通常将程序和数据组织成文件。文件可以是数字、字符或二进制代码，基本访问单元可以是字节或记录。文件可以长期存储在硬盘中，允许可控制的进程间共享访问，能够被组织成复杂的结构。</p> <h2 id="二、文件控制块和索引结点"><a href="#二、文件控制块和索引结点" class="header-anchor">#</a> 二、文件控制块和索引结点</h2> <p>与进程管理一样，为便于文件管理，在操作系统中引入了文件控制块的数据结构。</p> <h3 id="_2-1-文件的属性"><a href="#_2-1-文件的属性" class="header-anchor">#</a> 2.1 文件的属性</h3> <p>除了文件数据，操作系统还会保存与文件相关的信息，如所有者、创建时间等，这些附加信息称为文件属性或文件元数据。文件属性在不同系统中差别很大，但通常都包括如下属性。</p> <ol><li>名称。文件名称唯一，以容易读取的形式保存。</li> <li>类型。被支持不同类型的文件系统所使用。</li> <li>创建者。文件创建者的ID。</li> <li>所有者。文件当前所有者的ID.</li> <li>位置。指向设备和设备.上文件的指针。</li> <li>大小。文件当前大小(用字节、字或块表示)，也可包含文件允许的最大值。</li> <li>保护。对文件进行保护的访问控制信息。</li> <li>创建时间、最后一次修改时间和最后一次存取时间。文件创建、上次修改和上次访问的相关信息，用于保护和跟踪文件的使用。</li></ol> <p>操作系统通过文件控制块(FCB)来维护文件元数据。</p> <h3 id="_2-2-文件控制块"><a href="#_2-2-文件控制块" class="header-anchor">#</a> 2.2 文件控制块</h3> <p>文件控制块(FCB)是用来存放控制文件需要的各种信息的数据结构，以实现【按名存取】。FCB的有序集合称为文件目录，一个FCB就是一个文件目录项。为了创建一个新文件，系统将分配一个FCB并存放在文件目录中，称为目录项。</p> <p>FCB主要包含以下信息：</p> <ul><li>基本信息，如文件名、文件的物理位置、文件的逻辑结构、文件的物理结构等。</li> <li>存取控制信息，包括文件主的存取权限、核准用户的存取权限以及一般用户的存取权限。</li> <li>使用信息，如文件建立时间、上次修改时间等。</li></ul> <p>一个文件目录也被视为一个文件，称为目录文件。</p> <h3 id="_2-3-索引结点"><a href="#_2-3-索引结点" class="header-anchor">#</a> 2.3 索引结点</h3> <p>文件目录通常存放在磁盘上，当文件很多时，文件目录会占用大量的盘块。在查找目录的过程中，要先将存放目录文件的第一个盘块中的目录调入内存，然后用给定的文件名逐一比较，若未找到指定文件，就还需要不断地将下一盘块中的目录项调入内存，逐一比较。</p> <p>我们发现，在检索目录的过程中，只用到了文件名，仅当找到一个目录项（其中的文件名与要查找的文件名匹配）时，才需从该目录项中读出该文件的物理地址。也就是说，在检索目录时，文件的其他描述信息不会用到，也不需要调入内存。</p> <p>因此，有的系统便采用了文件名和文件描述信息分开的方法，使文件描述信息单独形成一个称为索引结点的数据结构，简称 i 结点（inode）。</p> <p><mark>在文件目录中的每个目录项仅由文件名和指向该文件所对应的 i 结点的指针构成</mark></p> <hr> <p><strong>磁盘索引结点</strong></p> <p>它是指存放在磁盘上的索引结点。每个文件有一个唯一的磁盘索引结点，主要包括以下内容：</p> <ul><li>文件主标识符，拥有该文件的个人或小组的标识符。</li> <li>文件类型，包括普通文件、目录文件或特别文件。</li> <li>文件存取权限，各类用户对该文件的存取权限。</li> <li>文件物理地址，每个索引结点中含有13个地址项，即iaddr(0)~iaddr(12)，它们以直接或间接方式给出数据文件所在盘块的编号。</li> <li>文件长度，指以字节为单位的文件长度。</li> <li>文件链接计数，在本文件系统中所有指向该文件的文件名的指针计数。</li> <li>文件存取时间，本文件最近被进程存取的时间、最近被修改的时间及索引结点最近被修改的时间。</li></ul> <hr> <p><strong>内存索引结点</strong></p> <p>它是指存放在内存中的索引结点。当文件被打开时，要将磁盘索引结点复制到内存的索引结点中，便于以后使用。在内存索引结点中增加了以下内容：</p> <ul><li>索引结点编号，用于标识内存索引结点。</li> <li>状态，指示i结点是否上锁或被修改。访问计数，每当有一-进程要访问此i结点时，计数加1;访问结束减1。</li> <li>逻辑设备号，文件所属文件系统的逻辑设备号。</li> <li>链接指针，设置分别指向空闲链表和散列队列的指针。</li></ul> <p>FCB或索引结点相当于图书馆中图书的索书号，我们可以在图书馆网站上找到图书的索书号，然后根据索书号找到想要的书本。</p> <h2 id="三、文件的操作"><a href="#三、文件的操作" class="header-anchor">#</a> 三、文件的操作</h2> <h3 id="_3-1-文件的基本操作"><a href="#_3-1-文件的基本操作" class="header-anchor">#</a> 3.1 文件的基本操作</h3> <p>文件属于抽象数据类型。为了正确地定义文件，需要考虑可以对文件执行的操作。操作系统提供系统调用，它对文件进行创建、写、读、重定位、删除和截断等操作。</p> <ol><li>创建文件。创建文件有两个必要步骤：一是为新文件分配必要的外存空间；二是在目录中为之创建一个目录项，目录项记录了新文件名、在外存中的地址及其他可能的信息。</li> <li>写文件。为了写文件，执行一个系统调用。对于给定文件名，搜索目录以查找文件位置。系统必须为该文件维护一个写位置的指针。每当发生写操作时，便更新写指针。</li> <li>读文件。为了读文件，执行一个系统调用。同样需要搜索目录以找到相关目录项，系统维护一个读位置的指针。每当发生读操作时，更新读指针。一个进程通常只对一个文件读或写，因此当前操作位置可作为每个进程当前文件位置的指针。由于读和写操作都使用同一指针，因此节省了空间，也降低了系统复杂度。</li> <li>重新定位文件，也称文件定位。搜索目录以找到适当的条目，并将当前文件位置指针重新定位到给定值。重新定位文件不涉及读、写文件。</li> <li>删除文件。为了删除文件，先从目录中检索指定文件名的目录项，然后释放该文件所占的存储空间，以便可被其他文件重复使用，并删除目录条目。</li> <li>截断文件。允许文件所有属性不变，并删除文件内容，将其长度置为0并释放其空间。</li></ol> <h3 id="_3-2-文件的打开与关闭"><a href="#_3-2-文件的打开与关闭" class="header-anchor">#</a> 3.2 文件的打开与关闭</h3> <p>当用户对一个文件实施操作时，每次都要从检索目录开始。为了避免多次重复地检索目录，大多数操作系统要求，在文件使用之前通过系统调用 open 被显式地打开。操作系统维护一个包含所有打开文件信息的表（打开文件表）。所谓【打开】，是指调用open根据文件名搜索目录，将指明文件的属性（包括该文件在外存上的物理位置），从外存复制到内存打开文件表的一个表目中，并将该表目的编号（也称索引）返回给用户。当用户再次向系统发出文件操作请求时，可通过索引在打开文件表中查到文件信息，从而节省再次搜索目录的开销。当文件不再使用时，可利用系统调用 close 关闭它，操作系统将会从打开文件表中删除这一条目。</p> <p>在多个不同进程可以同时打开文件的操作系统中，通常采用两级表：每个进程表和整个系统表。每个进程表根据它打开的所有文件，表中存储的是进程对文件的使用信息。系统打开文件表包含文件相关信息，如文件在磁盘的位置、访问日期和大小。一旦有进程打开了一个文件，系统表就包含该文件的条目。当另一个进程执行调用open时，只不过是在其进程打开表中增加一个条目，并指向系统表的相应条目。通常，系统打开文件表为每个文件关联一个打开计数器（OpenCount），以记录多少进程打开了该文件。每个关闭操作 close 使 count 递减，当打开计数器为 0 时，表示该文件不再被使用，并且可从系统打开文件表中删除相应条目。</p> <p>文件名不必是打开文件表的一部分，因为一旦完成对FCB在磁盘上的定位，系统就不再使用文件名。对于访问打开文件表的索引，UNIX称之为文件描述符，而Windows称之为文件句柄。因此，只要文件未被关闭，所有文件操作就通过打开文件表来进行。</p> <p>每个打开文件都具有如下关联信息：</p> <ul><li>文件指针。系统跟踪上次的读写位置作为当前文件位置的指针，这种指针对打开文件的某个进程来说是唯一的， 因此必须与磁盘文件属性分开保存。</li> <li>文件打开计数。计数器跟踪当前文件打开和关闭的数量。因为多个进程可能打开同一个文件，所以系统在删除打开文件条目之前，必须等待最后一个进程关闭文件。</li> <li>文件磁盘位置。大多数文件操作要求系统修改文件数据。查找磁盘上的文件所需的信息保存在内存中，以便系统不必为每个操作都从磁盘上读取该信息。</li> <li>访问权限。每个进程打开文件都需要有一个访问模式(创建、只读、读写、添加等)。该信息保存在进程的打开文件表中，以便操作系统能够允许或拒绝后续的I/O请求。</li></ul> <h2 id="四、文件保护"><a href="#四、文件保护" class="header-anchor">#</a> 四、文件保护</h2> <p>为了防止文件共享可能会导致文件被破坏或未经核准的用户修改文件，文件系统必须控制用户对文件的存取，即解决对文件的读、写、执行的许可问题。为此，必须在文件系统中建立相应的文件保护机制。文件保护通过口令保护、加密保护和访问控制等方式实现。其中，口令和加密是为了防止用户文件被他人存取或窃取，而访问控制则用于控制用户对文件的访问方式。</p> <h3 id="_4-1-访问类型"><a href="#_4-1-访问类型" class="header-anchor">#</a> 4.1 访问类型</h3> <p>对文件的保护可从限制对文件的访问类型中出发。可加以控制的访问类型主要有以下几种。</p> <ul><li>读。从文件中读。</li> <li>写。向文件中写。</li> <li>执行。将文件装入内存并执行。</li> <li>添加。将新信息添加到文件结尾部分。</li> <li>删除。删除文件，释放空间。</li> <li>列表清单。列出文件名和文件属性。</li></ul> <p>此外还可以对文件的重命名、复制、编辑等加以控制。这些高层的功能可以通过系统程序调用低层系统调用来实现。保护可以只在低层提供。例如，复制文件可利用一系列的读请求来完成，这样，具有读访问权限的用户同时也就具有了复制和打印权限。</p> <h3 id="_4-2-访问控制"><a href="#_4-2-访问控制" class="header-anchor">#</a> 4.2 访问控制</h3> <p>解决访问控制最常用的方法是根据用户身份进行控制。而实现基于身份访问的最为普通的方法是，为每个文件和目录增加一个访问控制列表( Acess-Control List, ACL)， 以规定每个用户名及其所允许的访问类型。这种方法的优点是可以使用复杂的访问方法，缺点是长度无法预计并且可能导致复杂的空间管理，使用精简的访问列表可以解决这个问题。</p> <p>精简的访问列表采用拥有者、组和其他三种用户类型。</p> <ol><li>拥有者。创建文件的用户。</li> <li>组。一组需要共享文件且具有类似访问的用户。</li> <li>其他。系统内的所有其他用户。</li></ol> <p>这样，只需用三个域即可列出访问表中这三类用户的访问权限。文件拥有者在创建文件时，说明创建者用户名及所在的组名，系统在创建文件时也将文件主的名字、所属组名列在该文件的FCB中。用户访问该文件时，按照拥有者所拥有的权限访问文件，若用户和拥有者在同一个用户组，则按照同组权限访问，否则只能按其他用户权限访问。UNIX操作系统即采用此种方法。</p> <p>口令和密码是另外两种访问控制方法。</p> <p>口令指用户在建立一个文件时提供一个口令，系统为其建立FCB时附上相应口令，同时告诉允许共享该文件的其他用户。用户请求访问时必须提供相应的口令。这种方法时间和空间的开销不多，缺点是口令直接存在系统内部，不够安全。</p> <p>密码指用户对文件进行加密，文件被访问时需要使用密钥。这种方法保密性强，节省了存储空间，不过编码和译码要花费一定的时间。</p> <p>口令和密码都是防止用户文件被他人存取或窃取，并没有控制用户对文件的访问类型。</p> <p>注意两个问题：</p> <ol><li>现代操作系统常用的文件保护方法是，将访问控制列表与用户、组和其他成员访问控制方案一起组合使用。</li> <li>对于多级目录结构而言，不仅需要保护单个文件，而且需要保护子目录内的文件，即需要提供目录保护机制。目录操作与文件操作并不相同，因此需要不同的保护机制。</li></ol> <h2 id="五、文件的逻辑结构"><a href="#五、文件的逻辑结构" class="header-anchor">#</a> 五、文件的逻辑结构</h2> <p>文件的逻辑结构是从用户观点出发看到的文件的组织形式。文件的物理结构是从实现观点出发看到的文件在外存上的存储组织形式。文件的逻辑结构与存储介质特性无关，它实际上是指在文件的内部，数据逻辑上是如何组织起来的。</p> <p>按逻辑结构，文件可划分为无结构文件和有结构文件两大类。</p> <h3 id="_5-1-无结构文件-流式文件"><a href="#_5-1-无结构文件-流式文件" class="header-anchor">#</a> 5.1 无结构文件(流式文件)</h3> <p>无结构文件是最简单的文件组织形式。无结构文件将数据按顺序组织成记录并积累、保存，它是有序相关信息项的集合，以字节(Byte)为单位。由于无结构文件没有结构，因而对记录的访问只能通过穷举搜索的方式，因此这种文件形式对大多数应用不适用。但字符流的无结构文件管理简单，用户可以方便地对其进行操作。所以，那些对基本信息单位操作不多的文件较适于采用字符流的无结构方式，如源程序文件、目标代码文件等。</p> <h3 id="_5-2-有结构文件-记录式文件"><a href="#_5-2-有结构文件-记录式文件" class="header-anchor">#</a> 5.2 有结构文件(记录式文件)</h3> <p>有结构文件按记录的组织形式可以分为如下几种：</p> <p><strong>顺序文件</strong></p> <p>文件中的记录一个接一个地顺序排列，记录通常是定长的，可以顺序存储或以链表形式存储。顺序文件有以下两种结构：</p> <ul><li>第一种是串结构，记录之间的顺序与关键字无关，通常是按存入时间的先后进行排列，对串结构文件进行检索必须从头开始顺序依次查找，比较费时。</li> <li>第二种是顺序结构，指文件中的所有记录按关键字顺序排列，可采用折半查找法，提高了检索效率。</li></ul> <p>在对记录进行批量操作，即每次要读或写一大批记录时，顺序文件的效率是所有逻辑文件中最高的。此外，对于顺序存储设备(如磁带)，也只有顺序文件才能被存储并能有效地工作。在经常需要查找、修改、增加或删除单个记录的场合，顺序文件的性能也比较差。</p> <hr> <p><strong>索引文件</strong></p> <p>对于定长记录文件，要查找第i条记录，可直接根据下式计算得到第i条记录相对于第1条记录的地址：A = i * L。然而，对于可变长记录的文件，要查找第 i 条记录，必须顺序地查找前 i - 1 条记录，从而获得相应记录的长度 L，进而按下式计算出第 i 条记录的首址：</p> <p><img src="data:image/png;base64,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" alt="image-20220402141146026" loading="lazy"></p> <p>注意：假定每条记录前用一个字节指明该记录的长度。</p> <p>变长记录文件只能顺序查找，效率较低。为此，可以建立一张索引表，为主文件的每个记录在索引表中分别设置一个表项，包含指向变长记录的指针（即逻辑起始地址）和记录长度，索引表按关键字排序，因此其本身也是一个定长记录的顺序文件。这样就把对变长记录顺序文件的检索转变为对定长记录索引文件的随机检索，从而加快了记录的检索速度。图4.4所示为索引文件示意图。</p> <p><img src="/assets/img/image-20220402141206952.ddbdd33d.png" alt="image-20220402141206952" loading="lazy"></p> <hr> <p><strong>索引顺序文件</strong></p> <p>索引顺序文件是顺序文件和索引文件的结合。最简单的索引顺序文件只使用了一级索引。索引顺序文件将顺序文件中的所有记录分为若干组，为顺序文件建立一张索引表，在索引表中为每组中的第一条记录建立一个索引项，其中含有该记录的关键字值和指向该记录的指针。</p> <p>主文件名包含姓名和其他数据项。姓名为关键字，索引表中为每组的第一条记录（不是每条记录）的关键字值，用指针指向主文件中该记录的起始位置。索引表只包含关键字和指针两个数据项，所有姓名关键字递增排列。主文件中记录分组排列，同一个组中的关键字可以无序，但组与组之间的关键字必须有序。查找一条记录时，首先通过索引表找到其所在的组，然后在该组中使用顺序查找，就能很快地找到记录。</p> <p><img src="/assets/img/image-20220406235216573.b09da80f.png" alt="image-20220406235216573" loading="lazy"></p> <p>对于含有N条记录的顺序文件，查找某关键字的记录时，平均需要查找N/2次。在索引顺序文件中，假设N条记录分为√N组，索引表中有√N个表项，每组有VN条记录，在查找某关键字的记录时，先顺序查找索引表，需要查找N12次，然后在主文件中对应的组中顺序查找，也需要查找√N12次，因此共需查找√N12+√N12=JN次。显然,索引顺序文件提高了查找效率，若记录数很多，则可采用两级或多级索引。这种方式就是数据结构中的分块查找。</p> <p>索引文件和索引顺序文件都提高了存取的速度，但因为配置索引表而增加了存储空间。</p> <hr> <p><strong>直接文件或散列文件(Hash File)</strong></p> <p>给定记录的键值或通过散列函数转换的键值直接决定记录的物理地址。这种映射结构不同于顺序文件或索引文件，没有顺序的特性。</p> <p>散列文件有很高的存取速度，但是会引起冲突，即不同关键字的散列函数值相同。</p> <p>复习了数据结构的读者读到这里时，会有这样的感觉:有结构文件逻辑上的组织，是为在文件中查找数据服务的(顺序查找、索引查找、索引顺序查找、哈希查找)。</p> <h2 id="六、文件的物理结构"><a href="#六、文件的物理结构" class="header-anchor">#</a> 六、文件的物理结构</h2> <p>前面说过，文件实际上是一种抽象数据类型，我们要研究它的逻辑结构、物理结构，以及关于它的一系列操作。文件的物理结构就是研究文件的实现，即文件数据在物理存储设备上是如何分布和组织的。同一个问题有两个方面的回答：一是文件的分配方式，讲的是对磁盘非空闲块的管理；二是文件存储空间管理，讲的是对磁盘空闲块的管理(详见4.3节)。</p> <p>文件分配对应于文件的物理结构，是指如何为文件分配磁盘块。常用的磁盘空间分配方法有三种：连续分配、链接分配和索引分配。有的系统(如RDOS操作系统)对三种方法都支持，但更普遍的是一个系统只支持一种方法。对于本节的内容，读者要注意与文件的逻辑结构区分，从历年的经验来看，这是很多读者容易搞混的地方</p> <h3 id="_6-1-连续分配"><a href="#_6-1-连续分配" class="header-anchor">#</a> 6.1 连续分配</h3> <p>连续分配方法要求每个文件在磁盘上占有一组连续的块。磁盘地址定义了磁盘上的一个线性排序，这种排序使作业访问磁盘时需要的寻道数和寻道时间最小。</p> <p><img src="/assets/img/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70.79353485.png" alt="img" loading="lazy"></p> <p>采用连续分配时，逻辑文件中的记录顺序也存储在相邻接的块中。一个文件的目录项中“文件物理地址”字段应包括第一块的地址和该文件所分配区域的长度，若文件长n块并从位置b开始，则该文件将占有块b,b+ 1,b+2,, b+n-1。</p> <p>连续分配支持顺序访问和直接访问。</p> <p>优点是实现简单、存取速度快。</p> <p>缺点是：</p> <ol><li>文件长度不宜动态增加，因为一个文件末尾后的盘块可能已分配给其他文件，一旦需要增加，就需要大量移动盘块。</li> <li>为保持文件的有序性，删除和插入记录时，需要对相邻的记录做物理上的移动，还会动态改变文件的长度。</li> <li>反复增删文件后会产生外部碎片(与内存管理分配方式中的碎片相似)。</li> <li>很难确定一个文件需要的空间大小，因而只适用于长度固定的文件。</li></ol> <h3 id="_6-2-链接分配"><a href="#_6-2-链接分配" class="header-anchor">#</a> 6.2 链接分配</h3> <p>链接分配是一种采用离散分配的方式。它消除了磁盘的外部碎片，提高了磁盘的利用率。可以动态地为文件分配盘块，因此无须事先知道文件的大小。此外，对文件的插入、删除和修改也非常方便。链接分配又可分为隐式链接和显式链接两种形式。</p> <p><strong>隐式链接</strong></p> <p>目录项中含有文件第一块的指针和最后一块的指针。每个文件对应一个磁盘块的链表；磁盘块分布在磁盘的任何地方，除最后一个盘块外，每个盘块都含有指向文件下一个盘块的指针，这些指针对用户是透明的。</p> <p><img src="/assets/img/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70-16492605132955.41295c9b.png" alt="img" loading="lazy"></p> <p>隐式链接的缺点是只适合顺序访问，若要访问文件的第i个盘块，则只能从第1个盘块开始通过盘块指针顺序查找到第i块，随机访问效率很低。隐式链接的稳定性也是一个问题，系统在运行过程中由于软件或硬件错误导致链表中的指针丢失或损坏，会导致文件数据的丢失。</p> <p>通常的解决方案是，将几个盘块组成簇(cluster)，按簇而不按块来分配，可以成倍地减少查找时间。比如一簇为4块，这样，指针所占的磁盘空间比例也要小得多。这种方法的代价是增加了内部碎片。簇可以改善许多算法的磁盘访问时间，因此应用于大多数操作系统。</p> <hr> <p><strong>显式链接</strong></p> <p>显式链接是指把用于链接文件各物理块的指针，从每个物理块的末尾中提取出来，显式地存放在内存的一张链接表中。该表在整个磁盘中仅设置一张，称为 <mark>文件分配表( File Allocation Table, FAT)</mark> 。每个表项中存放链接指针，即下一个盘块号。文件的第一个盘块号记录在目录项“物理地址”字段中，后续的盘块可通过查FAT找到。例如，某磁盘共有100个磁盘块，存放了两个文件：</p> <p>FAT表在系统启动时就会被读入内存，因此查找记录的过程是在内存中进行的，因而不仅显著地提高了检索速度，而且明显减少了访问磁盘的次数。</p> <p><img src="/assets/img/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70-16492605860217.5eb12c1e.png" alt="img" loading="lazy"></p> <p>FAT表在系统启动时就会被读入内存，因此查找记录的过程是在内存中进行的，因而不仅显著地提高了检索速度，而且明显减少了访问磁盘的次数。</p> <h3 id="_6-3-索引分配"><a href="#_6-3-索引分配" class="header-anchor">#</a> 6.3 索引分配</h3> <p>链接分配解决了连续分配的外部碎片和文件大小管理的问题。但依然存在问题：</p> <ol><li>链接分配不能有效支持直接访问(FAT除外)</li> <li>FAT需要占用较大的内存空间。</li></ol> <p>事实上，在打开某个文件时，只需将该文件对应盘块的编号调入内存即可，完全没有必要将整个FAT调入内存。为此，索引分配将每个文件所有的盘块号都集中放在一起构成索引块(表)，如图4.9所示。</p> <p><img src="/assets/img/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70.79353485.png" alt="img" loading="lazy"></p> <p>每个文件都有其索引块，这是一个磁盘块地址的数组。索引块的第 i 个条目指向文件的第 i 个块。要读第 i 块，通过索引块的第 i 个条目的指针来查找和读入所需的块。</p> <p>索引分配的优点是支持直接访问，且没有外部碎片问题。缺点是由于索引块的分配，增加了系统存储空间的开销。索引块的大小是一个重要的问题，每个文件必须有一个索引块，因此索引块应尽可能小，但索引块太小就无法支持大文件。可以采用以下机制来处理这个问题。</p> <ul><li>链接方案。一个索引块通常为一个磁盘块，因此它本身能直接读写。为了支持大文件，可以将多个索引块链接起来。</li> <li>多层索引。通过第一级索引块指向一组第二级的索引块，第二级索引块再指向文件块。查找时，通过第一级索引查找第二级索引，再采用这个第二级索引查找所需数据块。这种方法根据最大文件大小，可以继续到第三级或第四级。例如，4096B 的块，能在索引块中存入1024个4B的指针。两级索引支持1048576个数据块，即支持最大文件为4GB。</li> <li>混合索引。将多种索引分配方式相结合的分配方式。例如，系统既采用直接地址，又采用单级索引分配方式或两级索引分配方式。</li></ul> <p>此外，访问文件需两次访问外存，先读取索引块的内容，然后访问具体的磁盘块，因而降低了文件的存取速度。为了解决这一问题，通常将文件的索引块读入内存，以提高访问速度。</p> <h3 id="_6-4-混合索引分配"><a href="#_6-4-混合索引分配" class="header-anchor">#</a> 6.4 混合索引分配</h3> <p>为了能够较全面地照顾到小型、中型、大型和特大型文件，可采用混合索引分配方式。对于小文件，为了提高对众多小文件的访问速度，最好能将它们的每个盘块地址直接放入FCB，这样就可以直接从FCB中获得该文件的盘块地址，即为直接寻址。对于中型文件，可以采用单级索引方式，需要先从FCB中找到该文件的索引表，从中获得该文件的盘块地址，即为一次间址。对于大型或特大型文件，可以采用两级和三级索引分配方式。UNIX系统采用的就是这种分配方式，在其索引结点中，共设有13个地址项，即i.addr(0)~i.addr(12)，如图4.10所示。</p> <p><img src="/assets/img/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70-16492943845442.241179e7.png" alt="img" loading="lazy"></p> <ol><li>直接地址。为了提高对文件的检索速度，在索引结点中可设置10个直接地址项，即用i.addr(0)~iaddr(9)来存放直接地址，即文件数据盘块的盘块号。假如每个盘块的大小为4KB，当文件不大于40KB时，便可直接从索引结点中读出该文件的全部盘块号。</li> <li>一次间接地址。对于中、大型文件，只采用直接地址并不现实的。为此，可再利用索引结点中的地址项i.addr( 10)来提供-次间接地址。这种方式的实质就是一-级索引分配方式。图中的一次间址块也就是索引块，系统将分配给文件的多个盘块号记入其中。在-次间址块中可存放1024个盘块号，因而允许文件长达4MB.</li> <li>多次间接地址。当文件长度大于4MB + 40KB (一次间接地址与10个直接地址项)时，系统还需采用二次间接地址分配方式。这时，用地址项i.addr(1 1)提供二次间接地址。该方式的实质是两级索引分配方式。系统此时在二次间址块中记入所有一次间址块的盘号。地址项i.addr(11)作为二次间址块，允许文件最大长度可达4GB。同理，地址项iaddr(12)作为三次间址块，其允许的文件最大长度可达4TB.</li></ol></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><div class="edit-link"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon edit-icon"><path d="M117.953 696.992 64.306 959.696l265.931-49.336 450.204-452.505-212.284-213.376-450.204 452.513zm496.384-296.326L219.039 797.993l-46.108-46.34L568.233 354.33l46.104 46.335zm345.357-122.99-114.45 115.04-212.288-213.377 114.45-115.035 212.288 213.371zm0 0" fill="currentColor"></path></svg> <a href="https://github.com/lllllan-fv/notes/edit/main/cs-basic/os/wangdao/4/1/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a></div> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">2022年4月7日 09:20</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: 342310798@qq.com" class="contributor">
          lllllan
        </span> <!----></span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/cs-basic/os/wangdao/3/2/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 0 1-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 0 1 9.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        虚拟内存管理
      </a></span> <span class="next"><a href="/cs-basic/os/wangdao/4/2/">
        目录
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 0 1-18.616.092 15.368 15.368 0 0 1-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 0 1 5.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 0 1 5.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <!----> <!----> <div class="content__page-bottom"></div></main> <footer class="footer-wrapper"><!----> <div class="footer"><a href="https://beian.miit.gov.cn/" target="_blank">粤ICP备2021095794号</a></div> <div class="copyright">Copyright © 2022 lllllan</div></footer></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close" aria-label="Close" class="pswp__button pswp__button--close"></button> <button title="Share" aria-label="Share" class="pswp__button pswp__button--share"></button> <button title="Switch to full screen" aria-label="Switch to full screen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" aria-label="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Prev (Arrow Left)" aria-label="Prev (Arrow Left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (Arrow Right)" aria-label="Next (Arrow Right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/assets/js/app.3cfaf037.js" defer></script><script src="/assets/js/vendors~layout-Layout.57f7cf63.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.b5e5e957.js" defer></script><script src="/assets/js/page-文件管理.17c3170b.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout.3d94df6c.js" defer></script>
  </body>
</html>
