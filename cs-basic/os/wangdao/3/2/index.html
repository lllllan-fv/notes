<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>虚拟内存管理 | lllllan</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script src="https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <link rel="alternate" type="application/atom+xml" href="https://notes.lllllan.cn/atom.xml" title="lllllan Atom Feed">
    <link rel="alternate" type="application/json" href="https://notes.lllllan.cn/feed.json" title="lllllan JSON Feed">
    <link rel="alternate" type="application/rss+xml" href="https://notes.lllllan.cn/rss.xml" title="lllllan RSS Feed">
    <link rel="icon" href="/logo.png">
    <link rel="icon" href="/logo.png" type="image/png" sizes="512x512">
    <link rel="icon" href="/logo.png" type="image/png" sizes="192x192">
    <link rel="icon" href="/logo.png" type="image/png" sizes="512x512">
    <link rel="icon" href="/logo.png" type="image/png" sizes="192x192">
    <link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials">
    <link rel="apple-touch-icon" href="/logo.png">
    <meta name="description" content="">
    <meta property="og:url" content="/cs-basic/os/wangdao/3/2/">
    <meta property="og:site_name" content="lllllan">
    <meta property="og:title" content="虚拟内存管理">
    <meta property="og:description" content="转载声明《王道考研-操作系统》; 一、虚拟内存的基本概念 1.1 传统存储管理方式的特征 各种内存管理策略都是为了同时将多个进程保存在内存中，以便允许进行多道程序设计。它们都具有以下两个共同的特征： 1) 一次性。作业必须一次性全部装入内存后，才能开始运行。这会导致两种情况： 1) 当作业很大而不能全部被装入内存时，将使该作业无法运行 2) 当大量作业要求">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh">
    <meta property="og:locale:alternate" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="lllllan">
    <meta property="article:author" content="lllllan">
    <meta property="article:tag" content="操作系统">
    <meta name="theme-color" content="#46bd87">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/logo.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <link rel="preload" href="/assets/css/0.styles.8357e793.css" as="style"><link rel="preload" href="/assets/js/app.3cfaf037.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Layout.57f7cf63.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.b5e5e957.js" as="script"><link rel="preload" href="/assets/js/page-虚拟内存管理.544e96eb.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout.3d94df6c.js" as="script"><link rel="prefetch" href="/assets/js/146.8ecf0fcc.js"><link rel="prefetch" href="/assets/js/147.7277abfe.js"><link rel="prefetch" href="/assets/js/148.72b87788.js"><link rel="prefetch" href="/assets/js/149.5b1c78b5.js"><link rel="prefetch" href="/assets/js/150.9f3c442c.js"><link rel="prefetch" href="/assets/js/151.397eb6c6.js"><link rel="prefetch" href="/assets/js/152.946d1bed.js"><link rel="prefetch" href="/assets/js/layout-Blog.f99d2bb8.js"><link rel="prefetch" href="/assets/js/layout-Layout.54f62305.js"><link rel="prefetch" href="/assets/js/layout-NotFound.d261f6b6.js"><link rel="prefetch" href="/assets/js/layout-Slide.ea59fbea.js"><link rel="prefetch" href="/assets/js/page--07c97f1e.9682816c.js"><link rel="prefetch" href="/assets/js/page-ArrayList源码解读.ac617910.js"><link rel="prefetch" href="/assets/js/page-CPU缓存.b1450893.js"><link rel="prefetch" href="/assets/js/page-Class类文件的结构.fff783c4.js"><link rel="prefetch" href="/assets/js/page-ConcurrentHashMap源码解读.7d274ff4.js"><link rel="prefetch" href="/assets/js/page-HTTP传输大文件.d069f78c.js"><link rel="prefetch" href="/assets/js/page-HTTP各版本.0f54efa8.js"><link rel="prefetch" href="/assets/js/page-HTTP和HTTPS.a307440d.js"><link rel="prefetch" href="/assets/js/page-HTTP常见面试题.02cfb7ad.js"><link rel="prefetch" href="/assets/js/page-HashMap源码解读.e4b0b293.js"><link rel="prefetch" href="/assets/js/page-HashTable源码解读.8dfd411b.js"><link rel="prefetch" href="/assets/js/page-HotSpot的算法实现细节.b3692516.js"><link rel="prefetch" href="/assets/js/page-HotSpot虚拟机中的对象.d8064812.js"><link rel="prefetch" href="/assets/js/page-IO多路复用.ea148810.js"><link rel="prefetch" href="/assets/js/page-IO管理概述.db862336.js"><link rel="prefetch" href="/assets/js/page-JVM常见问题.e2418f44.js"><link rel="prefetch" href="/assets/js/page-Java-IO.6369db6e.js"><link rel="prefetch" href="/assets/js/page-Java-反射.67f807aa.js"><link rel="prefetch" href="/assets/js/page-Java-基本概念与常识.ee6063ec.js"><link rel="prefetch" href="/assets/js/page-Java-基础语法.bdad3a89.js"><link rel="prefetch" href="/assets/js/page-Java-异常.9839f810.js"><link rel="prefetch" href="/assets/js/page-Java-数据类型.94028146.js"><link rel="prefetch" href="/assets/js/page-Java-注解.e0de1c52.js"><link rel="prefetch" href="/assets/js/page-Java-面向对象.0cb9a8a8.js"><link rel="prefetch" href="/assets/js/page-Java集合框架基础知识.5041ae0e.js"><link rel="prefetch" href="/assets/js/page-MVCC.d3753661.js"><link rel="prefetch" href="/assets/js/page-MySQL基础架构.9323b9b1.js"><link rel="prefetch" href="/assets/js/page-MySQL日志系统.8c5ad6eb.js"><link rel="prefetch" href="/assets/js/page-MySQL面试题合集.79f4bdf0.js"><link rel="prefetch" href="/assets/js/page-OSI和TCPIP网络分层模型详解.9a83baa3.js"><link rel="prefetch" href="/assets/js/page-TCP可靠传输.dbf4f132.js"><link rel="prefetch" href="/assets/js/page-TCP常见面试题.17d88d75.js"><link rel="prefetch" href="/assets/js/page-Vector源码解读.1f7882ef.js"><link rel="prefetch" href="/assets/js/page-keep-alive.660d6377.js"><link rel="prefetch" href="/assets/js/page-next-key锁.1c1605b7.js"><link rel="prefetch" href="/assets/js/page-三次握手.eeca79bd.js"><link rel="prefetch" href="/assets/js/page-不稳定的快速排序.847b1f67.js"><link rel="prefetch" href="/assets/js/page-事务.7fd522ac.js"><link rel="prefetch" href="/assets/js/page-二叉搜索树代码实现.ba59d2ea.js"><link rel="prefetch" href="/assets/js/page-代理模式.33e7d015.js"><link rel="prefetch" href="/assets/js/page-低延迟垃圾收集器.5957b38b.js"><link rel="prefetch" href="/assets/js/page-内存分配与回收策略.fa1beb18.js"><link rel="prefetch" href="/assets/js/page-内存管理.21c2b061.js"><link rel="prefetch" href="/assets/js/page-内存管理概念.fd14d2bf.js"><link rel="prefetch" href="/assets/js/page-动态类型语言支持.cc325dab.js"><link rel="prefetch" href="/assets/js/page-同步与互斥.e0216efd.js"><link rel="prefetch" href="/assets/js/page-四次挥手.5f9bf01e.js"><link rel="prefetch" href="/assets/js/page-垃圾收集算法.4ffb0014.js"><link rel="prefetch" href="/assets/js/page-处理机调度.206354d1.js"><link rel="prefetch" href="/assets/js/page-字节后端实习.5f806ee8.js"><link rel="prefetch" href="/assets/js/page-字节后端日常实习.682f997d.js"><link rel="prefetch" href="/assets/js/page-字节客户端春招.5da03438.js"><link rel="prefetch" href="/assets/js/page-字节抖音直播支付日常实习.70b08b50.js"><link rel="prefetch" href="/assets/js/page-字节番茄后端实习.d08dd9b5.js"><link rel="prefetch" href="/assets/js/page-字节码指令简介.28f93755.js"><link rel="prefetch" href="/assets/js/page-字节码解释执行引擎.2e2e8d2c.js"><link rel="prefetch" href="/assets/js/page-字节飞书后端春招.a8861f6e.js"><link rel="prefetch" href="/assets/js/page-对象已死.81214d58.js"><link rel="prefetch" href="/assets/js/page-常见面试题.d9eb79ea.js"><link rel="prefetch" href="/assets/js/page-平衡搜索树.01472381.js"><link rel="prefetch" href="/assets/js/page-排序算法.0fc7cd5e.js"><link rel="prefetch" href="/assets/js/page-操作系统.bcbaa656.js"><link rel="prefetch" href="/assets/js/page-操作系统发展历程.1643b450.js"><link rel="prefetch" href="/assets/js/page-操作系统的基本概念.0d693799.js"><link rel="prefetch" href="/assets/js/page-操作系统结构.e665da9b.js"><link rel="prefetch" href="/assets/js/page-操作系统运行环境.fd564f64.js"><link rel="prefetch" href="/assets/js/page-数据结构.7bcfc44f.js"><link rel="prefetch" href="/assets/js/page-数据结构和算法.fd8d96d6.js"><link rel="prefetch" href="/assets/js/page-文件管理.17c3170b.js"><link rel="prefetch" href="/assets/js/page-文件系统.2119f002.js"><link rel="prefetch" href="/assets/js/page-方法调用.7c89d00f.js"><link rel="prefetch" href="/assets/js/page-无关性的基石.f9392463.js"><link rel="prefetch" href="/assets/js/page-框架技术概览.040752f8.js"><link rel="prefetch" href="/assets/js/page-概述.83749280.js"><link rel="prefetch" href="/assets/js/page-死锁.02c94d20.js"><link rel="prefetch" href="/assets/js/page-目录.18627bc0.js"><link rel="prefetch" href="/assets/js/page-磁盘和固态硬盘.ae5b6830.js"><link rel="prefetch" href="/assets/js/page-第一章、Web及网络基础.bd9f2488.js"><link rel="prefetch" href="/assets/js/page-第一章、浏览器生成消息.8487d4c1.js"><link rel="prefetch" href="/assets/js/page-第一章、进程与线程的基本概念.61ff5e39.js"><link rel="prefetch" href="/assets/js/page-第七章、HTTPS.705f7cf3.js"><link rel="prefetch" href="/assets/js/page-第七章、重排序与happens-before.f397aa11.js"><link rel="prefetch" href="/assets/js/page-第三章、HTTP报文.cd78f9a3.js"><link rel="prefetch" href="/assets/js/page-第三章、从网线到网络设备.ee12068c.js"><link rel="prefetch" href="/assets/js/page-第三章、线程组和线程优先级.eb5780ec.js"><link rel="prefetch" href="/assets/js/page-第九章、synchronized与锁.545db104.js"><link rel="prefetch" href="/assets/js/page-第九章、追加协议.4c3565e9.js"><link rel="prefetch" href="/assets/js/page-第二十章、计划任务.db158ba5.js"><link rel="prefetch" href="/assets/js/page-第二章、Java多线程入门类和接口.d67fade0.js"><link rel="prefetch" href="/assets/js/page-第二章、用电信号传输TCPIP数据.6ca26d3f.js"><link rel="prefetch" href="/assets/js/page-第二章、简单的HTTP协议.482c12da.js"><link rel="prefetch" href="/assets/js/page-第五章、Java线程间的通信.87783899.js"><link rel="prefetch" href="/assets/js/page-第五章、Web服务器.a3458c74.js"><link rel="prefetch" href="/assets/js/page-第八章、volatile.79caedc9.js"><link rel="prefetch" href="/assets/js/page-第八章、确认用户身份.d1254733.js"><link rel="prefetch" href="/assets/js/page-第六章、Http首部.4e518637.js"><link rel="prefetch" href="/assets/js/page-第六章、Java内存模型基础知识.c6da8868.js"><link rel="prefetch" href="/assets/js/page-第十一章、AQS（不懂）.511d4d29.js"><link rel="prefetch" href="/assets/js/page-第十一章、Web的攻击技术.fbf36423.js"><link rel="prefetch" href="/assets/js/page-第十七章、通信工具类.0fb368b3.js"><link rel="prefetch" href="/assets/js/page-第十三章、阻塞队列.208bddeb.js"><link rel="prefetch" href="/assets/js/page-第十九章、Stream并行计算原理（不懂）.e5a43d6c.js"><link rel="prefetch" href="/assets/js/page-第十二章、线程池原理.3278632a.js"><link rel="prefetch" href="/assets/js/page-第十五章、并发容器集合.41631d72.js"><link rel="prefetch" href="/assets/js/page-第十八章、ForkJoin框架.1b5c300c.js"><link rel="prefetch" href="/assets/js/page-第十六章、CopyOnWrite容器.704da6e8.js"><link rel="prefetch" href="/assets/js/page-第十四章、锁接口和类.193cf6db.js"><link rel="prefetch" href="/assets/js/page-第十章、CAS与原子操作.c70c1f56.js"><link rel="prefetch" href="/assets/js/page-第十章、构建Web内容的技术.0700ec3d.js"><link rel="prefetch" href="/assets/js/page-第四章、Http状态码.bf7c2706.js"><link rel="prefetch" href="/assets/js/page-第四章、Java线程的状态及主要转化方法.fac7b947.js"><link rel="prefetch" href="/assets/js/page-算法.87f91ecc.js"><link rel="prefetch" href="/assets/js/page-类加载器.0e8812ee.js"><link rel="prefetch" href="/assets/js/page-类加载的时机.8807ba03.js"><link rel="prefetch" href="/assets/js/page-类加载的过程.775f3dea.js"><link rel="prefetch" href="/assets/js/page-索引.efcf3576.js"><link rel="prefetch" href="/assets/js/page-经典垃圾收集器.58be1e98.js"><link rel="prefetch" href="/assets/js/page-虚拟机.6023f0a9.js"><link rel="prefetch" href="/assets/js/page-计算机基础.61f3ffaa.js"><link rel="prefetch" href="/assets/js/page-计算机网络-常见面试题.9082da64.js"><link rel="prefetch" href="/assets/js/page-设备独立性软件.7a800410.js"><link rel="prefetch" href="/assets/js/page-设计模式.e243f235.js"><link rel="prefetch" href="/assets/js/page-路由器和交换机.378394d6.js"><link rel="prefetch" href="/assets/js/page-输入url网址到页面显示.43f78fb6.js"><link rel="prefetch" href="/assets/js/page-运行时数据区域.4455e38d.js"><link rel="prefetch" href="/assets/js/page-运行时栈帧结构.e6b9f372.js"><link rel="prefetch" href="/assets/js/page-进程与线程.912285b0.js"><link rel="prefetch" href="/assets/js/page-进程和线程.2f7d4f3c.js"><link rel="prefetch" href="/assets/js/page-进程间通信.1fec56ad.js"><link rel="prefetch" href="/assets/js/page-选择合适的垃圾收集器.d5134ff8.js"><link rel="prefetch" href="/assets/js/page-项目主页.efb34bec.js"><link rel="prefetch" href="/assets/js/page-顺序一致性.ff3e582e.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.8857f3dd.js"><link rel="prefetch" href="/assets/js/vendors~mermaid.20000af9.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.e38cb1a8.js"><link rel="prefetch" href="/assets/js/vendors~reveal.bec24043.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8357e793.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="lllllan" class="logo"> <!----> <span class="site-name can-hide">lllllan</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link router-link-active"><i class="iconfont icon-home"></i>
  Blog Home
</a></div><div class="nav-item"><a href="/java/basic/" class="nav-link"><!---->
  Java
</a></div><div class="nav-item"><a href="/cs-basic/network/" class="nav-link"><!---->
  计算机网络
</a></div><div class="nav-item"><a href="/cs-basic/os/" class="nav-link router-link-active active"><!---->
  操作系统
</a></div><div class="nav-item"><a href="/mysql/" class="nav-link"><!---->
  MySQL
</a></div></nav> <!----> <a rel="noopener noreferrer" href="https://github.com/lllllan-fv/notes" target="_blank" class="repo-link can-hide">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="/" class="nav-link router-link-active"><i class="iconfont icon-home"></i>
  Blog Home
</a></div><div class="nav-item"><a href="/java/basic/" class="nav-link"><!---->
  Java
</a></div><div class="nav-item"><a href="/cs-basic/network/" class="nav-link"><!---->
  计算机网络
</a></div><div class="nav-item"><a href="/cs-basic/os/" class="nav-link router-link-active active"><!---->
  操作系统
</a></div><div class="nav-item"><a href="/mysql/" class="nav-link"><!---->
  MySQL
</a></div> <a rel="noopener noreferrer" href="https://github.com/lllllan-fv/notes" target="_blank" class="repo-link">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><a href="/cs-basic/os/" aria-current="page" class="sidebar-link"><i class="iconfont icon-page"></i>操作系统</a></li><li><a href="/cs-basic/os/processes&amp;threads/" class="sidebar-link"><i class="iconfont icon-page"></i>进程和线程</a></li><li><a href="/cs-basic/os/memory-manage/" class="sidebar-link"><i class="iconfont icon-page"></i>内存管理</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">补充</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable open"><!----> <span class="title">王道-操作系统</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">计算机系统概述</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">进程与线程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable open"><!----> <span class="title">内存管理</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/cs-basic/os/wangdao/3/1/" class="sidebar-link"><i class="iconfont icon-page"></i>内存管理概念</a></li><li><a href="/cs-basic/os/wangdao/3/2/" aria-current="page" class="active sidebar-link"><i class="iconfont icon-page"></i>虚拟内存管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#一、虚拟内存的基本概念" class="sidebar-link">一、虚拟内存的基本概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#_1-1-传统存储管理方式的特征" class="sidebar-link heading3">1.1 传统存储管理方式的特征</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#_1-2-局部性原理" class="sidebar-link heading3">1.2 局部性原理</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#_1-3-虚拟存储器的定义和特征" class="sidebar-link heading3">1.3 虚拟存储器的定义和特征</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#_1-4-虚叔内存技术的实现" class="sidebar-link heading3">1.4 虚叔内存技术的实现</a></li></ul></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#二、请求分页管理方式" class="sidebar-link">二、请求分页管理方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#_2-1-页表机制" class="sidebar-link heading3">2.1 页表机制</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#_2-2-缺页中断机构" class="sidebar-link heading3">2.2 缺页中断机构</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#_2-3-地址变换机构" class="sidebar-link heading3">2.3 地址变换机构</a></li></ul></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#三、页框分配" class="sidebar-link">三、页框分配</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#_3-1-驻留集大小" class="sidebar-link heading3">3.1 驻留集大小</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#_3-2-内存分配策略" class="sidebar-link heading3">3.2 内存分配策略</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#_3-3-物理块调入算法" class="sidebar-link heading3">3.3 物理块调入算法</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#_3-4-调入页面的时机" class="sidebar-link heading3">3.4 调入页面的时机</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#_3-5-从何处调入页面" class="sidebar-link heading3">3.5 从何处调入页面</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#_3-6-如何调入页面" class="sidebar-link heading3">3.6 如何调入页面</a></li></ul></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#四、页面置换算法" class="sidebar-link">四、页面置换算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#_4-1-最佳-opt-置换算法" class="sidebar-link heading3">4.1 最佳(OPT) 置换算法</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#_4-2-先进先出-fifo-页面置换算法" class="sidebar-link heading3">4.2 先进先出(FIFO)页面置换算法</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#_4-3-最近最久未使用-lru-置换算法" class="sidebar-link heading3">4.3 最近最久未使用(LRU)置换算法</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#_4-4-时钟-clock-置换算法" class="sidebar-link heading3">4.4 时钟(CLOCK)置换算法.</a></li></ul></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#五、抖动和工作集" class="sidebar-link">五、抖动和工作集</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#_5-1-抖动" class="sidebar-link heading3">5.1 抖动</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#_5-2-工作集" class="sidebar-link heading3">5.2 工作集</a></li></ul></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#六、内存映射文件" class="sidebar-link">六、内存映射文件</a></li><li class="sidebar-sub-header"><a href="/cs-basic/os/wangdao/3/2/#七、虚拟存储器性能影响因素" class="sidebar-link">七、虚拟存储器性能影响因素</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">文件管理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading clickable"><!----> <span class="title">IO管理</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb"><ol vocab="https://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a href="/cs-basic/" property="item" typeof="WebPage" class="router-link-active"><i class="iconfont icon-info"></i> <span property="name">计算机基础</span></a> <meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a href="/cs-basic/os/" property="item" typeof="WebPage" class="router-link-active"><i class="iconfont icon-page"></i> <span property="name">操作系统</span></a> <meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem" class="is-active"><a href="/cs-basic/os/wangdao/3/2/" aria-current="page" property="item" typeof="WebPage" class="router-link-exact-active router-link-active"><i class="iconfont icon-page"></i> <span property="name">虚拟内存管理</span></a> <meta property="position" content="3"></li></ol></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><i class="iconfont icon-page"></i> <span property="headline">虚拟内存管理</span></h1> <div class="page-info"><!----> <span aria-label="Author🖊" data-balloon-pos="down" categoryPath="/category/$category/" tagPath="/tag/$tag/"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon author-icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z" fill="currentColor"></path></svg> <span property="author">lllllan</span></span><span aria-label="Page views🔢" data-balloon-pos="down" defaultAuthor="lllllan" categoryPath="/category/$category/" tagPath="/tag/$tag/" class="visitor-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon eye-icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 0 0-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z" fill="currentColor"></path></svg> <span id="/cs-basic/os/wangdao/3/2/" data-flag-title="虚拟内存管理" class="leancloud_visitors waline-visitor-count"><span class="leancloud-visitors-count">...</span></span></span><span aria-label="Writing Date📅" data-balloon-pos="down" defaultAuthor="lllllan" categoryPath="/category/$category/" tagPath="/tag/$tag/" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2022-4-2</span></span><span role="navigation" aria-label="Category🌈" data-balloon-pos="down" defaultAuthor="lllllan" tagPath="/tag/$tag/" class="category-info enable"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon category-icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zm-.854 446.486H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zm446.371-446.486h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zm136.293 813.51H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z" fill="currentColor"></path></svg> <span property="articleSection">计算机基础</span></span><span aria-label="Tags🏷" data-balloon-pos="down" defaultAuthor="lllllan" categoryPath="/category/$category/"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon tag-icon"><path d="M939.902 458.563 910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 0 0 0 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z" fill="currentColor"></path></svg> <ul class="tags-wrapper"><li class="tag clickable tag0"><span role="navigation">操作系统</span></li><li class="tag clickable tag1"><span role="navigation">王道-操作系统</span></li></ul> <meta property="keywords" content="操作系统,王道-操作系统"></span><span aria-label="Reading Time⌛" data-balloon-pos="down" defaultAuthor="lllllan" categoryPath="/category/$category/" tagPath="/tag/$tag/" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon timer-icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z" fill="currentColor"></path></svg> <span>About 30 min</span> <meta property="timeRequired" content="PT30M"></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#一、虚拟内存的基本概念" class="anchor-link heading2"><div>一、虚拟内存的基本概念</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#_1-1-传统存储管理方式的特征" class="anchor-link heading3"><div>1.1 传统存储管理方式的特征</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#_1-2-局部性原理" class="anchor-link heading3"><div>1.2 局部性原理</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#_1-3-虚拟存储器的定义和特征" class="anchor-link heading3"><div>1.3 虚拟存储器的定义和特征</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#_1-4-虚叔内存技术的实现" class="anchor-link heading3"><div>1.4 虚叔内存技术的实现</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#二、请求分页管理方式" class="anchor-link heading2"><div>二、请求分页管理方式</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#_2-1-页表机制" class="anchor-link heading3"><div>2.1 页表机制</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#_2-2-缺页中断机构" class="anchor-link heading3"><div>2.2 缺页中断机构</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#_2-3-地址变换机构" class="anchor-link heading3"><div>2.3 地址变换机构</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#三、页框分配" class="anchor-link heading2"><div>三、页框分配</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#_3-1-驻留集大小" class="anchor-link heading3"><div>3.1 驻留集大小</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#_3-2-内存分配策略" class="anchor-link heading3"><div>3.2 内存分配策略</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#_3-3-物理块调入算法" class="anchor-link heading3"><div>3.3 物理块调入算法</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#_3-4-调入页面的时机" class="anchor-link heading3"><div>3.4 调入页面的时机</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#_3-5-从何处调入页面" class="anchor-link heading3"><div>3.5 从何处调入页面</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#_3-6-如何调入页面" class="anchor-link heading3"><div>3.6 如何调入页面</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#四、页面置换算法" class="anchor-link heading2"><div>四、页面置换算法</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#_4-1-最佳-opt-置换算法" class="anchor-link heading3"><div>4.1 最佳(OPT) 置换算法</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#_4-2-先进先出-fifo-页面置换算法" class="anchor-link heading3"><div>4.2 先进先出(FIFO)页面置换算法</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#_4-3-最近最久未使用-lru-置换算法" class="anchor-link heading3"><div>4.3 最近最久未使用(LRU)置换算法</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#_4-4-时钟-clock-置换算法" class="anchor-link heading3"><div>4.4 时钟(CLOCK)置换算法.</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#五、抖动和工作集" class="anchor-link heading2"><div>五、抖动和工作集</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#_5-1-抖动" class="anchor-link heading3"><div>5.1 抖动</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#_5-2-工作集" class="anchor-link heading3"><div>5.2 工作集</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#六、内存映射文件" class="anchor-link heading2"><div>六、内存映射文件</div></a></li><li class="anchor"><a href="/cs-basic/os/wangdao/3/2/#七、虚拟存储器性能影响因素" class="anchor-link heading2"><div>七、虚拟存储器性能影响因素</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><div class="custom-block warning"><p class="custom-block-title">转载声明</p> <ul><li>《王道考研-操作系统》</li></ul></div> <h2 id="一、虚拟内存的基本概念"><a href="#一、虚拟内存的基本概念" class="header-anchor">#</a> 一、虚拟内存的基本概念</h2> <h3 id="_1-1-传统存储管理方式的特征"><a href="#_1-1-传统存储管理方式的特征" class="header-anchor">#</a> 1.1 传统存储管理方式的特征</h3> <p>各种内存管理策略都是为了同时将多个进程保存在内存中，以便允许进行多道程序设计。它们都具有以下两个共同的特征：</p> <ol><li><p>一次性。作业必须一次性全部装入内存后，才能开始运行。这会导致两种情况：</p> <ol><li>当作业很大而不能全部被装入内存时，将使该作业无法运行</li> <li>当大量作业要求运行时，由于内存不足以容纳所有作业，只能使少数作业先运行，导致多道程序度的下降。</li></ol></li> <li><p>驻留性。作业被装入内存后，就一直驻留在内存中，其任何部分都不会被换出，直至作业运行结束。运行中的进程会因等待 I/O 而被阻塞，可能处于长期等待状态。</p></li></ol> <p>由以上分析可知，许多在程序运行中不用或暂时不用的程序（数据）占据了大量的内存空间，而一些需要运行的作业又无法装入运行，显然浪费了宝贵的内存资源。</p> <h3 id="_1-2-局部性原理"><a href="#_1-2-局部性原理" class="header-anchor">#</a> 1.2 局部性原理</h3> <p>要真正理解虚拟内存技术的思想，首先须了解著名的局部性原理。</p> <ol><li><strong>时间局部性</strong>。程序中的某条指令一旦执行，不久后该指令可能再次执行；某数据被访问过，不久后该数据可能再次被访问。产生的原因是程序中存在着大量的循环操作。</li> <li><strong>空间局部性</strong>。一旦程序访问了某个存储单元，在不久后，其附近的存储单元也将被访问，即程序在一段时间内所访问的地址，可能集中在一定的范围之内，因为指令通常是顺序存放、顺序执行的，数据也一般是以向量、数组、表等形式簇聚存储的。</li></ol> <p>时间局部性通过将近来使用的指令和数据保存到高速缓存中，并使用高速缓存的层次结构实现。空间局部性通常使用较大的高速缓存，并将预取机制集成到高速缓存控制逻辑中实现。虚拟内存技术实际上建立了【内存外存】的两级存储器结构，利用局部性原理实现高速缓存。</p> <h3 id="_1-3-虚拟存储器的定义和特征"><a href="#_1-3-虚拟存储器的定义和特征" class="header-anchor">#</a> 1.3 虚拟存储器的定义和特征</h3> <p>基于局部性原理，在程序装入时，仅须将程序当前要运行的少数页面或段先装入内存，而将其余部分暂留在外存，便可启动程序执行。在程序执行过程中，当所访问的信息不在内存时，由操作系统将所需要的部分调入内存，然后继续执行程序。另一方面，操作系统将内存中暂时不使用的内容换出到外存上，从而腾出空间存放将要调入内存的信息。这样，系统好像为用户提供了一个比实际内存容量大得多的存储器，称为 <mark>虚拟存储器</mark></p> <p>之所以将其称为虚拟存储器，是因为这种存储器实际上并不存在，只是由于系统提供了部分装入、请求调入和置换功能后（对用户透明），给用户的感觉是好像存在一个比实际物理内存大得多的存储器。但容量大只是一种错觉，是虚的。虚拟存储器有以下三个主要特征：</p> <ol><li>多次性。是指无须在作业运行时一次性地全部装入内存，而允许被分成多次调入内存运行，即只需将当前要运行的那部分程序和数据装入内存即可开始运行。以后每当要运行到尚未调入的那部分程序时，再将它调入。多次性是虚拟存储器最重要的特征。</li> <li>对换性。是指无须在作业运行时一直常驻内存，在进程运行期间，允许将那些暂不使用的程序和数据从内存调至外存的对换区（换出），待以后需要时再将它们从外存调至内存（换进）。正是由于对换性，才使得虚拟存储器得以正常运行。</li> <li>虚拟性。是指从逻辑上扩充内存的容量，使用户所看到的内存容量远大于实际的内存容量。这是虚拟存储器所表现出的最重要特征，也是实现虚拟存储器的最重要目标。</li></ol> <h3 id="_1-4-虚叔内存技术的实现"><a href="#_1-4-虚叔内存技术的实现" class="header-anchor">#</a> 1.4 虚叔内存技术的实现</h3> <p>虚拟内存技术允许将一个作业分多次调入内存。采用连续分配方式时，会使相当一部分内存空间都处于暂时或【永久】的空闲状态，造成内存资源的严重浪费，而且也无法从逻辑上扩大内存容最。因此，虚拟内存的实现需要建立在离散分配的内存管理方式的基础上。</p> <p>虚拟内存的实现有以下三种方式：</p> <ul><li>请求分页存储管理。</li> <li>请求分段存储管理。</li> <li>请求段页式存储管理。</li></ul> <p>不管哪种方式，都需要有一定的硬件支持。一般需要的支持有以下几个方面：</p> <ul><li>一定容量的内存和外存。</li> <li>页表机制（或段表机制），作为主要的数据结构。</li> <li>中断机构，当用户程序要访问的部分尚未调入内存时，则产生中断。</li> <li>地址变换机构，逻辑地址到物理地址的变换。</li></ul> <h2 id="二、请求分页管理方式"><a href="#二、请求分页管理方式" class="header-anchor">#</a> 二、请求分页管理方式</h2> <p>请求分页系统建立在基本分页系统基础之上，为了支持虚拟存储器功能而增加了请求调页功能和页面置换功能。请求分页是目前最常用的一种实现虛拟存储器的方法。</p> <p>在请求分页系统中，只要求将当前需要的一部分页面装入内存，便可以启动作业运行。在作业执行过程中，当所要访问的页面不在内存中时，再通过调页功能将其调入，同时还可通过置换功能将暂时不用的页面换出到外存上，以便腾出内存空间。</p> <h3 id="_2-1-页表机制"><a href="#_2-1-页表机制" class="header-anchor">#</a> 2.1 页表机制</h3> <p>请求分页系统的页表机制不同于基本分页系统，请求分页系统在一个作业运行之前不要求全部一次性调入内存，因此在作业的运行过程中，必然会出现要访问的页面不在内存中的情况，如何发现和处理这种情况是请求分页系统必须解决的两个基本问题。为此，在请求页表项中增加了4个字段，如图3.20所示。</p> <p><strong>页表项：</strong> <mark>页号 + 物理块号 + 状态位 + 访问字段 + 修改位 + 外存地址</mark></p> <p><img src="/assets/img/image-20220402133753810.cb7b977d.png" alt="image-20220402133753810" loading="lazy"></p> <p>增加的4个字段说明如下：</p> <ul><li>状态位P。用于指示该项是否已调入内存，供程序访问时参考。</li> <li>访问字段A。用于记录本页在一段时间内被访问的次数，或记录本页最近已有多长时间未被访问，供置换算法换出页面时参考。</li> <li>修改位M。标识该页在调入内存后是否被修改过，以确定页面置换时是否写回外存。</li> <li>外存地址。用于指出该页在外存上的地址，通常是物理块号，供调入该页时参考。</li></ul> <h3 id="_2-2-缺页中断机构"><a href="#_2-2-缺页中断机构" class="header-anchor">#</a> 2.2 缺页中断机构</h3> <p>在请求分页系统中，每当所要访问的页面不在内存中时，便产生一个缺页中断，请求操作系统将所缺的页调入内存。此时应将缺页的进程阻塞（调页完成唤醒），若内存中有空闲块，则分配一个块，将要调入的页装入该块，并修改页表中的相应页表项，若此时内存中没有空闲块，则要淘汰某页（若被淘汰页在内存期间被修改过，则要将其写回外存）。</p> <p>缺页中断作为中断，同样要经历诸如 <mark>保护 CPU 环境、分析中断原因、转入缺页中断处理程序、恢复CPU环境</mark> 等几个步骤。但与一般的中断相比，它有以下两个明显的区别：</p> <ul><li>在指令执行期间而非一条指令执行完后产生和处理中断信号，属于 <mark>内部异常</mark></li> <li>一条指令在执行期间，可能产生多次缺页中断。</li></ul> <h3 id="_2-3-地址变换机构"><a href="#_2-3-地址变换机构" class="header-anchor">#</a> 2.3 地址变换机构</h3> <p>请求分页系统中的地址变换机构，是在分页系统地址变换机构的基础上，为实现虚拟内存，又增加了某些功能而形成的，如产生和处理缺页中断，及从内存中换出一页 的功能等等。在进行地址变换时，先检索快表：</p> <p><img src="/assets/img/20160730160944404.de372365.png" alt="img" loading="lazy"></p> <ul><li>若找到要访问的页，则修改页表项中的访问位（写指令还需要重置修改位），然后利用页表项中给出的物理块号和页内地址形成物理地址。</li> <li>若未找到该页的页表项，则应到内存中去查找页表，再对比页表项中的状态位P，看该页是否已调入内存，若页面已调入，则将该页的页表写入快表，若快表已满，则需采用某种算法替换。若页面未调入，则产生缺页中断，请求从外存把该页调入内存。</li></ul> <h2 id="三、页框分配"><a href="#三、页框分配" class="header-anchor">#</a> 三、页框分配</h2> <h3 id="_3-1-驻留集大小"><a href="#_3-1-驻留集大小" class="header-anchor">#</a> 3.1 驻留集大小</h3> <p>对于分页式的虚拟内存，在进程准备执行时，不需要也不可能把一个进程的所有页都读入主存。因此，操作系统必须决定读取多少页，即决定给特定的进程分配几个页框。给一个进程分配的物理页框的集合就是这个进程的驻留集。需要考虑以下几点：</p> <ol><li>分配给一个进程的页框越少，驻留在主存中的进程就越多，从而可提高 CPU 的利用率。</li> <li>若一个进程在主存中的页面过少，则尽管有局部性原理，缺页率仍相对较高。</li> <li>若分配的页框过多，则由于局部性原理，对该进程的缺页率没有太明显的影响。</li></ol> <h3 id="_3-2-内存分配策略"><a href="#_3-2-内存分配策略" class="header-anchor">#</a> 3.2 内存分配策略</h3> <p>在请求分页系统中，可采取两种内存分配策略，即固定和可变分配策略。在进行置换时，也可采取两种策略，即全局置换和局部置换。于是可组合出下面三种适用的策略。</p> <p><strong>固定分配局部置换</strong></p> <p>为每个进程分配一定数目的物理块，在进程运行期间都不改变。所谓局部置换，是指如果进程在运行中发生缺页，则只能从分配给该进程在内存的页面中选出一页换出，然后再调入一页，以保证分配给该进程的内存空间不变。实现这种策略时，难以确定应为每个进程分配的物理块数目：太少会频繁出现缺页中断，太多又会降低 CPU 和其他资源的利用率。</p> <hr> <p><strong>可变分配全局置换</strong></p> <p>先为每个进程分配一定数目的物理块，在进程运行期间可根据情况适当地增加或减少。所谓全局置换，是指如果进程在运行中发生缺页，系统从空闲物理块队列中取出一块分配给该进程，并将所缺页调入。这种方法比固定分配局部置换更加灵活，可以动态增加进程的物理块，但也存在弊端，如它会自目地给进程增加物理块，从而导致系统多道程序的并发能力下降。</p> <hr> <p><strong>可变分配局部置换</strong></p> <p>为每个进程分配一定数目的物理块，当某进程发生缺页时，只允许从该进程在内存的页面中选出一页换出，因此不会影响其他进程的运行。若进程在运行中频繁地发生缺页中断，则系统再为该进程分配若干物理块，直至该进程的缺页率趋于适当程度；反之，若进程在运行中的缺页率特别低，则可适当减少分配给该进程的物理块，但不能引起其缺页率的明显增加。这种方法在保证进程不会过多地调页的同时，也保持了系统的多道程序并发能力。当然它需要更复杂的实现，也衢要更大的开销，但对比频繁地换入换出所浪费的计算机资源，这种牺牲是值得的。</p> <h3 id="_3-3-物理块调入算法"><a href="#_3-3-物理块调入算法" class="header-anchor">#</a> 3.3 物理块调入算法</h3> <p>采用固定分配策略时，将系统中的空闲物理块分配给各个进程，可采用下述几种算法。</p> <ol><li>平均分配算法，将系统中所有可供分配的物理块平均分配给各个进程。</li> <li>按比例分配算法，根据进程的大小按比例分配物理块。</li> <li>优先权分配算法，为重要和紧迫的进程分配较多的物理块。通常采取的方法是把所有可分配的物理块分成两部分：一部分按比例分配给各个进程，一部分则根据优先权分配。</li></ol> <h3 id="_3-4-调入页面的时机"><a href="#_3-4-调入页面的时机" class="header-anchor">#</a> 3.4 调入页面的时机</h3> <p>为确定系统将进程运行时所缺的页面调入内存的时机，可采取以下两种调页策略：</p> <ol><li>预调页策略。根据局部性原理，一次调入若干相邻的页会比一次调入一页更高效。但若调入的一批页面中的大多数都未被访问，则又是低效的。因此，需要采用以预测为基础的预调页策略，将那些预计在不久之后便会被访问的页面预先调入内存。但目前预调页的成功率仅约50%。因此这种策略主要用于进程的首次调入，由程序员指出应先调入哪些页。</li> <li>请求调页策略。进程在运行中需要访问的页面不在内存，便提出请求，由系统将其所需页面调入内存。由这种策略调入的页一定会被访问，且这种策略比较易于实现，因此目前的虚拟存储器大多采用此策略。其缺点是每次仅调入一页， 增加了磁盘I/O开销。预调入实际上就是运行前的调入，请求调页实际上就是运行期间调入。</li></ol> <h3 id="_3-5-从何处调入页面"><a href="#_3-5-从何处调入页面" class="header-anchor">#</a> 3.5 从何处调入页面</h3> <p>请求分页系统中的外存分为两部分：用于存放文件的文件区和用于存放对换页面的对换区。对换区采用连续分配方式，而文件区采用离散分配方式，因此对换区的磁盘I/O速度比文件区的更快。这样，当发生缺页请求时，系统从何处将缺页调入内存就分为三种情况：</p> <ol><li>系统拥有足够的对换区空间。可以全部从对换区调入所需页面，以提高调页速度。为此，在进程运行前，需将与该进程有关的文件从文件区复制到对换区。</li> <li>系统缺少足够的对换区空间。凡是不会被修改的文件都直接从文件区调入；而当换出这些页面时，由于它们未被修改而不必再将它们换出。但对于那些可能被修改的部分，在将它们換出时须调到对换区，以后需要时再从对换区调入（因为读比写的速度快）。</li></ol> <ol start="3"><li>UNIX 方式。与进程有关的文件都放在文件区，因此未运行过的页面都应从文件区调入。曾经运行过但又被换出的页面，由于是放在对换区，因此在下次调入时应从对换区调入。进程请求的共享页面若被其他进程调入内存，则无须再从对换区调入。</li></ol> <h3 id="_3-6-如何调入页面"><a href="#_3-6-如何调入页面" class="header-anchor">#</a> 3.6 如何调入页面</h3> <p>当进程所访问的页面不在内存中时（存在位为0），便向CPU发出缺页中断，中断响应后便转入缺页中断处理程序。该程序通过查找页表得到该页的物理块，此时如果内存未满， 则启动磁盘I/O，将所缺页谓入内存，并修改页表。如果内存已满，则先按某种置换算法从内存中选出一页准备换出；如果该页未被修改过（修改位为0），则无须将该页写回磁盘；但是，如果该页已被修改（修改位为1），则必须将该页写回磁盘，然后将所缺页调入内存，并修改页表中的相应表项，置其存在位为1。调入完成后，进程就可利用修改后的页表形成所要访间数据的内存地址。</p> <h2 id="四、页面置换算法"><a href="#四、页面置换算法" class="header-anchor">#</a> 四、页面置换算法</h2> <p>进程运行时，若其访问的页面不在内存中而需将其调入，但内存已无空闲空间时，就需要从内存中调出一页程序或数据，送入磁盘的对换区。</p> <p>选择调出页面的算法就称为页面置换算法。好的页面置换算法应有较低的页面更换频率，也就是说，应将以后不会再访问或以后较长时间内不会再访问的页面先调出。</p> <p>常见的置换算法有以下4种。</p> <h3 id="_4-1-最佳-opt-置换算法"><a href="#_4-1-最佳-opt-置换算法" class="header-anchor">#</a> 4.1 最佳(OPT) 置换算法</h3> <p>最佳置换算法选择的被淘汰页面是以后永不使用的页面，或是在最长时间内不再被访问的页面，以便保证获得最低的缺页率。然而，由于人们目前无法预知进程在内存下的若干页面中哪个是未来最长时间内不再被访问的，因而该算法无法实现。但可利用该算法去评价其他算法。</p> <p>假定系统为某进程分配了三个物理块，并考虑有页面号引用串：</p> <p><code>7, 0, 1, 2, 0, 3, 0, 4, 2, 3, 0, 3, 2, 1, 2, 0, 1, 7, 0, 1</code></p> <p>进程运行时，先将 <code>7, 0, 1</code> 三个页面依次装入内存。当进程要访问页面 2 时，产生缺页中断，根据最佳置换算法，选择将第 18 次访问才需调入的页面 7 淘汰。然后，访问页面 0 时，因为它已在内存中，所以不必产生缺页中断。访问页面 3 时，又会根据最佳置换算法将页面 1 淘汰......以此类推，从图中可以看出采用最佳置换算法时的情况。</p> <p><img src="/assets/img/image-20220406224938736.71514b73.png" alt="image-20220406224938736" loading="lazy"></p> <p>可以看到，发生缺页中断的次数为9，页面置换的次数为6。</p> <h3 id="_4-2-先进先出-fifo-页面置换算法"><a href="#_4-2-先进先出-fifo-页面置换算法" class="header-anchor">#</a> 4.2 先进先出(FIFO)页面置换算法</h3> <p>优先淘汰最早进入内存的页面，即淘汰在内存中驻留时间最久的页面。该算法实现简单，只需把已调入内存的页面根据先后次序链接成队列，设置一个指针总是指向最老的页面。但该算法与进程实际运行时的规律不适应，因为在进程中，有的页面经常被访问。</p> <p>这里仍用上面的例子采用FIFO算法进行页面置换。当进程访问页面2时，把最早进入内存的页面 7 换出。然后访问页面 3 时，把 <code>2, 0, 1</code> 中最先进入内存的页面 0 换出。由图3.23可以看出，利用FIFO算法时进行了 12 次页面置换，比最佳置换算法正好多一倍。</p> <div class="custom-block danger"><p class="custom-block-title">Belady 异常</p> <p>FIFO 算法还会产生所分配的物理块数增大而页故障数不减反增的异常现象，称为Belady异常。只有FIFO算法可能出现Belady异常，LRU 和OPT算法永远不会出现Belady异常。</p></div> <p><img src="/assets/img/image-20220406225221630.b9aa6414.png" alt="image-20220406225221630" loading="lazy"></p> <p>页面访问顺序为 <code>3, 2, 1, 0, 3, 2, 4, 3, 2, 1, 0, 4</code>。若采用FIFO置换算法，当分配的物理块为3个时，缺页次数为9次；当分配的物理块为4个时，缺页次数为10 次。分配给进程的物理块增多，但缺页次数不减反增。</p> <p><img src="/assets/img/image-20220402134604783.bbb6c785.png" alt="image-20220402134604783" loading="lazy"></p> <h3 id="_4-3-最近最久未使用-lru-置换算法"><a href="#_4-3-最近最久未使用-lru-置换算法" class="header-anchor">#</a> 4.3 最近最久未使用(LRU)置换算法</h3> <p>选择最近最长时间未访问过的页面予以淘汰，它认为过去一段时间内未访问过的页面，在最近的将来可能也不会被访问。该算法为每个页面设置一个访问字段，用来记录页面自上次被访问以来所经历的时间，淘汰页面时选择现有页面中值最大的予以淘汰。</p> <p>再对上面的例子采用LRU算法进行页面置换。进程第一次对页面 2 访问时，将最近最久未被访问的页面 7 置换出去。然后在访问页面 3 时，将最近最久未使用的页面 1 换出。</p> <p><img src="/assets/img/image-20220406225320628.beca4d80.png" alt="image-20220406225320628" loading="lazy"></p> <p>前 5 次置换的情况与最佳置换算法相同，但两种算法并无必然联系。实际上，LRU 算法根据各页以前的使用情况来判断，是“向前看”的，而最佳置换算法则根据各页以后的使用情况来判断，是“向后看”的。而页面过去和未来的走向之间并无必然联系。</p> <p>LRU算法的性能较好，但需要寄存器和栈的硬件支持。LRU是堆栈类的算法。理论上可以证明，堆栈类算法不可能出现 Belady 异常。FIFO 算法基于队列实现，不是堆栈类算法。</p> <h3 id="_4-4-时钟-clock-置换算法"><a href="#_4-4-时钟-clock-置换算法" class="header-anchor">#</a> 4.4 时钟(CLOCK)置换算法.</h3> <p>LRU 算法的性能接近 OPT 算法，但实现起来的开销大。因此，操作系统的设计者尝试了很多算法，试图用比较小的开销接近 LRU 算法的性能，这类算法都是CLOCK算法的变体。</p> <p><strong>简单的CLOCK置换算法</strong></p> <p>为每帧设置一位访问位，当某页首次被装入或被访问时，其访问位被置为1。对于替换算法，将内存中的所有页面视为一个循环队列，并有一个替换指针与之相关联，当某一页被替换时， 该指针被设置指向被替换页面的下一页。在选择一页淘汰时， 只需检查页的访问位：</p> <ul><li>若为0，就选择该页换出；</li> <li>若为1，则将它置为0，暂不换出，给予该页第二次驻留内存的机会，再依次顺序检查下一个页面。</li></ul> <p>当检查到队列中的最后一个页面时，若其访问位仍为 1，则返回到队首去循环检查。由于该算法是循环地检查各个页面的使用情况，故称CLOCK算法。但是，因为该算法只有一位访问位，而置换时将未使用过的页面换出，故又称最近未用(NRU)算法。</p> <p>假设页面访问顺序为 <code>7, 0, 1, 2, 0, 3, 0, 4, 2, 3, 0, 3, 2, 1, 3, 2</code>，采用简单CLOCK置换算法，分配 4 个页帧，每个页对应的结构为（页面号，访问位）。</p> <p><img src="/assets/img/image-20220402134738427.d02298f3.png" alt="image-20220402134738427" loading="lazy"></p> <p>首次访问 7, 0, 1, 2 时，产生缺页中断，依次调入主存，访问位都置为 1。访问 0 时，已存在，访问位置为 1。访问 3 时，产生第 5 次缺页中断，替换指针初始指向帧 1，此时所有帧的访问位均为 1，则替换指针完整地扫描一周， 把所有帧的访问位都置为 0，然后回到最初的位置（帧1），替换帧1中的页（包括置换页面和置访问位为1）。访问 0 时，已存在，访问位置为 1。访问 4 时，产生第 6 次缺页中断，替换指针指向帧 2（上次替换位置的下一帧），帧 2 的访问位为 1，将其修改为 0，继续扫描，帧 3 的访问位为0，替换帧 3 中的页。然后依次访问 2, 3, 0, 3, 2 均已存在，每次访问都将其访问位置为 1。访问 1 时，产生缺页中断，替换指针指向帧 4，此时所有帧的访问位均为 1，又完整扫描一周并置访问位为 0，回到帧 4，替换之。访问 3 时，已存在，访问位置为 1。访问 2 时，产生缺页中断，替换指针指向帧 1，帧 1 的访问位为 1，将其修改为 0，继续扫描，帧 2 的访问位为 0，替换帧 2 中的页。</p> <p><img src="/assets/img/image-20220402134812424.4759debf.png" alt="image-20220402134812424" loading="lazy"></p> <hr> <p><strong>改进型CLOCK置换算法</strong></p> <p>将一个页面换出时，若该页已被修改过，则要将该页写回磁盘，若该页未被修改过，则不必将它写回磁盘。可见，对于修改过的页面，替换代价更大。在改进型CLOCK算法中，除考虑页面使用情况外，还增加了置换代价一修改位。 在选择页面换出时，优先考虑既未使用过又未修改过的页面。由访问位A和修改位M可以组合成下面四种类型的页面：</p> <ul><li>1类A = 0，M = 0：最近未被访问且未被修改，是最佳淘汰页。</li> <li>2类A = 0，M = 1：最近未被访问，但已被修改，不是很好的淘汰页。</li> <li>3类A = 1，M = 0：最近已被访问，但未被修改，可能再被访问。</li> <li>4类A = 1，M = 1：最近已被访问且已被修改，可能再被访问。</li></ul> <p>内存中的每页必定都是这四类页面之一。在进行页面置换时，可采用与简单CLOCK算法类似的算法，差别在于该算法要同时检查访问位和修改位。算法执行过程如下：</p> <ol><li><p>从指针的当前位置开始，扫描循环队列，寻找A = 0且M = 0的 1 类页面，将遇到的第一个 1 类页面作为选中的淘汰页。在第一次扫描期间不改变访问位A。</p></li> <li><p>若第 1 步失败，则进行第二轮扫描，寻找A = 0且M = 1的 2 类页面。将遇到的第一个 2 类页面作为淘汰页。在第二轮扫描期间，将所有扫描过的页面的访问位都置为 0。</p></li> <li><p>若第 2 步也失败，则将指针返回到开始的位置，并将所有帧的访问位置为 0。重复第 1 步，并且若有必要，重复第 2 步，此时一定能找到被淘汰的页。</p></li></ol> <p>改进型CLOCK算法优于简单CLOCK算法的地方在于，可减少磁盘的 I/O 操作次数。但为了找到一个可置换的页，可能要经过几轮扫描，即实现算法本身的开销将有所增加。</p> <p>操作系统中的页面置换算法都有一个原则，即尽可能保留访问过的页面，而淘汰未访问的页面。简单的CLOCK算法只考虑页面是否被访问过；改进型CLOCK算法对这两类页面做了细分，分为修改过的页面和未修改的页面。因此，若有未使用过的页面，则当然优先将其中未修改过的页面换出。若全部页面都用过，还是优先将其中未修改过的页面换出。</p> <h2 id="五、抖动和工作集"><a href="#五、抖动和工作集" class="header-anchor">#</a> 五、抖动和工作集</h2> <h3 id="_5-1-抖动"><a href="#_5-1-抖动" class="header-anchor">#</a> 5.1 抖动</h3> <p>在页面置换过程中，一种最糟糕的情形是，刚刚换出的页面马上又要换入主存，刚刚换入的页面马上又要换出主存，这种频繁的页面调度行为称为 <mark>抖动或颠簸</mark></p> <p>系统发生抖动的根本原因是，系统中同时运行的进程太多，由此分配给每个进程的物理块太少，不能满足进程正常运行的基本要求，致使每个进程在运行时频繁地出现缺页，必须请求系统将所缺页面调入内存。这会使得在系统中排队等待页面调入/调出的进程数目增加。显然，对磁盘的有效访问时间也随之急剧增加，造成每个进程的大部分时间都用于页面的换入/换出，而几乎不能再去做任何有效的工作，进而导致发生处理机的利用率急剧下降并趋于零的情况。抖动是进程运行时出现的严重问题，必须采取相应的措施解决它。由于抖动的发生与系统为进程分配物理块的多少有关，于是又提出了关于进程工作集的概念。</p> <h3 id="_5-2-工作集"><a href="#_5-2-工作集" class="header-anchor">#</a> 5.2 工作集</h3> <p>工作集是指在某段时间间隔内，进程要访问的页面集合。基于局部性原理，可以用最近访问过的页面来确定工作集。一般来说，工作集 W 可由时间 t 和工作集窗口大小  ⊿ 来确定。例如，某进程对页面的访问次序如下：</p> <p><img src="data:image/png;base64,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" alt="image-20220402135036575" loading="lazy"></p> <p>假设系统为该进程设定的工作集窗口大小 ⊿ 为 5，则在 t1 时刻，进程的工作集为 {2, 3, 5}，在 t2 时刻，进程的工作集为 {1, 2, 3, 4}。</p> <p>实际应用中，工作集窗口会设置得很大，即对于局部性好的程序，工作集大小一般会比工作集窗口 ⊿ 小很多。工作集反映了进程在接下来的一段时间内很有可能会频繁访问的页面集合，因此，若分配给进程的物理块小于工作集大小，则该进程就很有可能频繁缺页，所以为了防止这种抖动现象，一般来说分配给进程的物理块数（即驻留集大小）要大于工作集大小。</p> <p>工作集模型的原理是，让操作系统跟踪每个进程的工作集，并为进程分配大于其工作集的物理块。落在工作集内的页面需要调入驻留集中，而落在工作集外的页面可从驻留集中换出。若还有空闲物理块，则可再调一个进程到内存。若所有进程的工作集之和超过了可用物理块总数，则操作系统会暂停-一个进程，将其页面调出并将物理块分配给其他进程，防止出现抖动现象。</p> <h2 id="六、内存映射文件"><a href="#六、内存映射文件" class="header-anchor">#</a> 六、内存映射文件</h2> <p>内存映射文件(Memory-MappedFiles)与虚拟内存有些相似，将磁盘文件的全部或部分内容与进程虚拟地址空间的某个区域建立映射关系，便可以直接访问被映射的文件，而不必执行文件I/O操作，也无须对文件内容进行缓存处理。这种特性非常适合用来管理大尺寸文件。</p> <p>使用内存映射文件所进行的任何实际交互都是在内存中进行的，并且是以标准的内存地址形式来访问的。磁盘的周期性分页是由操作系统在后台隐蔽实现的，对应用程序而言是完全透明的。系统内存中的所有页面都由虚拟存储器负责管理，虚拟存储器以统一的方式处理所有磁盘I/O。当进程退出或显式地解除文件映射时，所有被改动的页面会被写回磁盘文件。</p> <p>多个进程允许并发地内存映射同一文件，以便允许数据共享。实际上，很多时候，共享内存是通过内存映射来实现的。进程可以通过共享内存来通信，而共享内存是通过映射相同文件到通信进程的虚拟地址空间实现的。内存映射文件充当通信进程之间的共享内存区域。一个进程在共享内存上完成了写操作，此刻当另一个进程在映射到这个文件的虚拟地址空间上执行读操作时，就能立刻看到上一个进程写操作的结果。</p> <p><img src="/assets/img/attachments-2020-07-B00e2eHO5f0724211b691.cd6be48f.gif" alt="img" loading="lazy"></p> <h2 id="七、虚拟存储器性能影响因素"><a href="#七、虚拟存储器性能影响因素" class="header-anchor">#</a> 七、虚拟存储器性能影响因素</h2> <p>根据局部性原理，页面较大则缺页率较低，页面较小则缺页率较高。页面较小时，一方面减少了内存碎片，有利于提高内存利用率；另一方面，也会使每个进程要求较多的页面，导致页表过长，占用大量内存。页面较大时，虽然可以减少页表长度，但会使页内碎片增大。</p> <p>分配给进程的物理块数越多，缺页率就越低，但是当物理块超过某个数目时，再为进程增加一个物理块对缺页率的改善是不明显的。可见，此时已没有必要再为它分配更多的物理块，否则也只能是浪费内存空间。只要保证活跃页面在内存中，保持缺页率在一个很低的范围即可。</p> <p>好的页面置换算法可使进程在运行过程中具有较低的缺页率。选择LRU、CLOCK等置换算法，将未来有可能访问的页面尽量保留在内存中，从而提高页面的访问速度。</p> <p>写回磁盘(见《计算机组成原理考研复习指导》)的频率。换出已修改过的页面时，应当写回磁盘，如果每当一个页面被换出时就将它写回磁盘，那么每换出一个页面就需要启动一次磁盘，效率极低。为此在系统中建立一个已修改换出页面的链表，对每个要被换出的页面（已修改），可以暂不将它们写回磁盘，而将它们挂在该链表上，仅当被换出页面数达到给定值时，才将它们一起写回磁盘，这样就可显著减少磁盘I/O的次数，即减少已修改页面换出的开销。此外，如果有进程在这批数据还未写回磁盘时需要再次访问这些页面，就不需从外存调入，而直接从已修改换出页面链表上获取，这样也可以减少页面从磁盘读入内存的频率，减少页面换进
的开销。</p> <p>编写程序的局部化程度越高，执行时的缺页率就越低。如果存储采用的是按行存储，访问时就要尽量采用相同的访问方式，避免按列访问造成缺页率过高的现象。</p></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><div class="edit-link"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon edit-icon"><path d="M117.953 696.992 64.306 959.696l265.931-49.336 450.204-452.505-212.284-213.376-450.204 452.513zm496.384-296.326L219.039 797.993l-46.108-46.34L568.233 354.33l46.104 46.335zm345.357-122.99-114.45 115.04-212.288-213.377 114.45-115.035 212.288 213.371zm0 0" fill="currentColor"></path></svg> <a href="https://github.com/lllllan-fv/notes/edit/main/cs-basic/os/wangdao/3/2/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a></div> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">2022年4月20日 23:46</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: 342310798@qq.com" class="contributor">
          lllllan
        </span> <!----></span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/cs-basic/os/wangdao/3/1/" class="prev"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon prev-icon"><path d="M906.783 588.79c-.02 8.499-6.882 15.36-15.38 15.37l-443.7-.01 75.704 191.682c2.52 6.42.482 13.763-5.038 17.91-5.52 4.168-13.138 4.147-18.616-.092L123.228 524.175a15.362 15.362 0 0 1-6-12.165c0-4.782 2.222-9.277 6-12.185L499.753 210.35a15.388 15.388 0 0 1 9.38-3.195c3.236 0 6.502 1.034 9.236 3.103 5.52 4.147 7.578 11.49 5.038 17.91L447.683 419.84l443.72-.01c8.498.01 15.36 6.881 15.36 15.36l.02 153.6z" fill="currentColor"></path></svg>
        内存管理概念
      </a></span> <span class="next"><a href="/cs-basic/os/wangdao/4/1/">
        文件管理
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 0 1-18.616.092 15.368 15.368 0 0 1-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 0 1 5.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 0 1 5.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <!----> <!----> <div class="content__page-bottom"></div></main> <footer class="footer-wrapper"><!----> <div class="footer"><a href="https://beian.miit.gov.cn/" target="_blank">粤ICP备2021095794号</a></div> <div class="copyright">Copyright © 2022 lllllan</div></footer></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close" aria-label="Close" class="pswp__button pswp__button--close"></button> <button title="Share" aria-label="Share" class="pswp__button pswp__button--share"></button> <button title="Switch to full screen" aria-label="Switch to full screen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" aria-label="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Prev (Arrow Left)" aria-label="Prev (Arrow Left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (Arrow Right)" aria-label="Next (Arrow Right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/assets/js/app.3cfaf037.js" defer></script><script src="/assets/js/vendors~layout-Layout.57f7cf63.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.b5e5e957.js" defer></script><script src="/assets/js/page-虚拟内存管理.544e96eb.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout.3d94df6c.js" defer></script>
  </body>
</html>
