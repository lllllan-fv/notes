---
# 这是页面的图标
icon: page

# 这是文章的标题
title: 从输入 url 网址到显示页面的过程

# 设置作者
author: lllllan

# 设置写作时间
time: 2022-2-22

# 一个页面只能有一个分类
category: 计算机基础

# 一个页面可以有多个标签
tag:
- 计算机网络
- 面试题

# 此页面会在文章列表置顶
# sticky: true

# 此页面会出现在首页的文章板块中
star: true

# 你可以自定义页脚
# footer: 
---



::: warning 转载声明

- [前端经典面试题: 从输入URL到页面加载发生了什么？ - SegmentFault 思否](https://segmentfault.com/a/1190000006879700)
- [从URL输入到页面展现到底发生什么？ - SegmentFault 思否](https://segmentfault.com/a/1190000017184701)

:::



## 从输入 url 到页面显示发生了什么

总体来说分为以下几个过程:

1. DNS解析
2. TCP连接
3. 发送HTTP请求
4. 服务器处理请求并返回HTTP报文
5. 浏览器解析渲染页面
6. 断开连接



## 一、DNS 解析

**DNS解析的过程就是寻找哪台机器上有你需要资源的过程。**



### 1.1 DNS 解析过程

**DNS解析是一个递归查询的过程。**



![preview](README.assets/view.png)



浏览器通过向DNS服务器发送域名，DNS服务器查询到与域名相对应的IP地址，然后返回给浏览器，浏览器再将IP地址和请求参数搭载在协议上，一并发送给对应的服务器。



### 1.2 DNS 缓存

DNS 服务器有一个缓存功能，可以记住之前查询过的域名

- 如果要查询的域名和相关信息已经在缓存中，那么就可以直接返回响应。
- 当查询的域名不存在时，【不存在】这一响应结果也会被缓存
- 缓存信息设置有一个有效期，当信息超过有效期后，数据会从缓存中删除
- DNS服务器返回响应时，会告知这一响应结果是来自缓存还是来自负责管理该域名的DNS服务器



### 1.3 DNS 负载均衡

真实的互联网世界背后存在成千上百台服务器，大型的网站甚至更多。但是在用户的眼中，它需要的只是处理他的请求，哪台机器处理请求并不重要。DNS可以返回一个合适的机器的IP给用户，例如可以根据每台机器的负载量，该机器离用户地理位置的距离等等，这种过程就是DNS负载均衡，又叫做DNS重定向。大家耳熟能详的CDN(Content Delivery Network)就是利用DNS的重定向技术，DNS服务器会返回一个跟用户最接近的点的IP地址给用户，CDN节点的服务器负责响应用户的请求，提供所需的内容。



## 二、TCP 连接



## 三、发送 HTTP 请求



## 四、服务器处理并返回 HTTP 报文



## 五、浏览器解析渲染页面



> 感觉比较碎，大概知道个过程就算了，详细看转载的博客。