---
# 这是页面的图标
icon: page

# 这是文章的标题
title: 《深入浅出多线程》第一章、进程与线程的基本概念

# 设置作者
author: lllllan

# 设置写作时间
# time: 2020-01-20

# 一个页面只能有一个分类
category: Java

# 一个页面可以有多个标签
tag:
- Java 多线程
- 深入浅出多线程

# 此页面会在文章列表置顶
# sticky: true

# 此页面会出现在首页的文章板块中
star: true

# 你可以自定义页脚
# footer: 
---



::: warning 转载声明

- [深入浅出多线程 - 第一章 - GitHub](https://github.com/RedSpider1/concurrent/blob/develop/article/01/1.md)
- [进程和线程的由来与区别](https://blog.csdn.net/whl_program/article/details/70217354)
- [线程的几种状态转换](https://www.cnblogs.com/jijijiefang/articles/7222955.html)

:::



## 一、进程的由来



### 1.1 操作系统

在计算机发明之前，人们处理大量的计算是通过人工处理的，耗费人力，成本很大而且错误较多。为了处理大量的数学计算问题，人们发明了计算机。最初的计算机只能接受一些特定的指令，用户输入一个指令，计算机就做出一个操作。

当用户在思考或者输入时，计算机就在等待。显然这样**效率低下，在很多时候，计算机都处在等待状态**。



### 1.2 批处理操作体统

后来有了批处理操作系统,把一系列需要操作的指令写下来，形成一个清单，一次性 交给计算机。用户将多个需要执行的程序写在磁带上，然后交由计算机去读取并逐 个执行这些程序，并将输出结果写在另一个磁带上。

但是由于批处理操作系统的 **指令运行方式仍然是串行的，内存中始终只有一个程序在运行**，后面的程序需要等待 前面的程序执行完成后才能开始执行，而前面的程序有时会由于I/O操作、网络等 原因阻塞，所以**批处理操作效率也不高**

> 假如有两个任务A和B,需要读取大量的数据输入（I/O操作），而其实CPU只能处在等待状态，等任务A读取完数据再能继续进行，这样就白白浪费了CPU资源。于是人们就想，能否在任务A读取数据的过程中，让任务B去执行，当任务A读取完数据之后，暂停任务B，让任务A继续执行？



### 1.3 进程

这时候，人们就发明了进程，用进程来对应一个程序，每个进程来对应一定的内存地址空间。此时，CPU采用时间片轮转的方式运行进程：CPU为每个进程分配一个时间段，称 作它的时间片。如果在时间片结束时进程还在运行，则暂停这个进程的运行，并且 CPU分配给另一个进程（这个过程叫做上下文切换）。如果进程在时间片结束前阻 塞或结束，则CPU立即进行切换，不用等待时间片用完。

::: info 进程

进程就是应用程序在内存中分配的空间，也就是正在运行的程序，各个进程之间互不干扰

:::





## 二、线程的由来

虽然进程的出现，使得操作系统的性能大大提升，但是随着时间的推移，人们并不 满足一个进程在一段时间只能做一件事情，如果一个进程有多个子任务时，只能逐 个得执行这些子任务，很影响效率。

> 比如杀毒软件在检测用户电脑时，如果在某一项检测中卡住了，那么后面的 检测项也会受到影响。或者说当你使用杀毒软件中的扫描病毒功能时，在扫 描病毒结束之前，无法使用杀毒软件中清理垃圾的功能，这显然无法满足人们的要求。

于是人们又提出了线程的概念，让一个线程 执行一个子任务，这样一个进程就包含了多个线程，每个线程负责一个单独的子任 务。

> 使用线程之后，事情就变得简单多了。当用户使用扫描病毒功能时，就让扫 描病毒这个线程去执行。同时，如果用户又使用清理垃圾功能，那么可以先 暂停扫描病毒线程，先响应用户的清理垃圾的操作，让清理垃圾这个线程去 执行。响应完后再切换回来，接着执行扫描病毒线程。



## 三、进程和线程的区别

进程是一个独立的运行环境，而线程是在进程中执行的一个任务。他们两个本质的 区别是 ==是否单独占有内存地址空间及其它系统资源（比如I/O）==

- 进程单独占有一定的内存地址空间，所以进程间存在内存隔离，数据是分开 的，数据共享复杂但是同步简单，各个进程之间互不干扰；而线程共享所属进 程占有的内存地址空间和资源，数据共享简单，但是同步复杂。
- 进程单独占有一定的内存地址空间，一个进程出现问题不会影响其他进程，不影响主程序的稳定性，可靠性高；一个线程崩溃可能影响整个程序的稳定性， 可靠性较低。
- 进程单独占有一定的内存地址空间，进程的创建和销毁不仅需要保存寄存器和栈信息，还需要资源的分配回收以及页调度，开销较大；线程只需要保存寄存 器和栈信息，开销较小

另外一个重要区别是，==进程是操作系统进行资源分配的基本单位，而线程是操作系统进行调度的基本单位==，即CPU分配时间的单位 。



## 四、多进程和多线程

多进程方式确实可以实现并发，但使用多线程，有以下几个好处： 

- 进程间的通信比较复杂，而线程间的通信比较简单，通常情况下，我们需要使 用共享资源，这些资源在线程间的通信比较容易。 
- 进程是重量级的，而线程是轻量级的，故多线程方式的系统开销更小。
